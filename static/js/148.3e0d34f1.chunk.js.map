{"version":3,"file":"static/js/148.3e0d34f1.chunk.js","mappings":"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","sources":["emulator/utility.ts","emulator/joystick.ts","emulator/games/aztec.ts","emulator/games/firebug.ts","emulator/games/karateka.ts","emulator/games/wolfenstein.ts","emulator/game_mappings.ts","emulator/keyboard.ts","emulator/softswitches.ts","emulator/convertdsk2woz.ts","emulator/decodedisk.ts","emulator/assembler.ts","emulator/harddrivedata.ts","emulator/drivestate.ts","emulator/diskdata.ts","emulator/memory.ts","emulator/roms/rom_2e.ts","emulator/instructions.ts","emulator/assemblycode.ts","emulator/roms/slot_disk2_cx00.ts","emulator/cpu6502.ts","emulator/motherboard.ts","emulator/worker2main.ts","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["import { KeyboardEvent } from \"react\"\n\nexport enum STATE {\n  IDLE,\n  NEED_BOOT,\n  NEED_RESET,\n  RUNNING,\n  PAUSED,\n}\n\nexport enum COLOR_MODE {\n  COLOR,\n  NOFRINGE,\n  GREEN,\n  AMBER\n}\n\nexport enum ARROW {\n  LEFT,\n  RIGHT,\n  UP,\n  DOWN\n}\n\nexport const colorToName = (mode: COLOR_MODE) => {\n  return [\"Color\", \"Color (no fringe)\", \"Green\", \"Amber\"][mode]\n}\n\nexport const nameToColorMode = (name: string) => {\n  switch (name) {\n    case \"Color (no fringe)\": return COLOR_MODE.NOFRINGE\n    case \"Green\": return COLOR_MODE.GREEN\n    case \"Amber\": return COLOR_MODE.AMBER\n    default: return COLOR_MODE.COLOR\n  }\n}\n\nexport enum DRIVE {\n  MOTOR_OFF,\n  MOTOR_ON,\n  TRACK_END,\n  TRACK_SEEK,\n}\n\nexport enum MODE {\n  IMPLIED,  // BRK\n  IMM,      // LDA #$01\n  ZP_REL,   // LDA $C0 or BCC $FF\n  ZP_X,     // LDA $C0,X\n  ZP_Y,     // LDX $C0,Y\n  ABS,      // LDA $1234\n  ABS_X,    // LDA $1234,X\n  ABS_Y,    // LDA $1234,Y\n  IND_X,    // LDA ($FF,X) or JMP ($1234,X)\n  IND_Y,    // LDA ($FF),Y\n  IND       // JMP ($1234) or LDA ($C0)\n}\n\n// A hack to determine if this is a relative instruction.\nexport const isRelativeInstr = (instr: string) => instr.startsWith('B') && instr !== \"BIT\" && instr !== \"BRK\"\n\n// export const toBinary = (value: number, ndigits = 8) => {\n//   return (\"0000000000000000\" + value.toString(2)).slice(-ndigits)\n// }\n\nconst address = (vLo: number, vHi: number) => (vHi*256 + vLo)\n\nexport const toHex = (value: number, ndigits = 2) => {\n  if (value > 0xFF) {\n    ndigits = 4\n  }\n  return (\"0000\" + value.toString(16).toUpperCase()).slice(-ndigits)\n}\n\nconst getPStatusString = (P: number) => {\n  const result = ((P & 0x80) ? 'N' : 'n') +\n    ((P & 0x40) ? 'V' : 'v') +\n    '-' +\n    ((P & 0x10) ? 'B' : 'b') +\n    ((P & 0x8) ? 'D' : 'd') +\n    ((P & 0x4) ? 'I' : 'i') +\n    ((P & 0x2) ? 'Z' : 'z') +\n    ((P & 0x1) ? 'C' : 'c')\n  return result\n}\n\nexport const getProcessorStatus = (s6502: STATE6502) => {\n  return (\n    `A=${toHex(s6502.Accum)} X=${toHex(s6502.XReg)} ` +\n    `Y=${toHex(s6502.YReg)} P=${toHex(s6502.PStatus)} ${getPStatusString(s6502.PStatus)} S=${toHex(s6502.StackPtr)}`\n  )\n}\n\nconst modeString = (mode: MODE) => {\n  let prefix = \"\"\n  let suffix = \"\"\n  switch (mode) {\n    case MODE.IMM:\n      prefix = \"#\"\n      break\n    case MODE.ZP_X:\n    case MODE.ABS_X:\n      suffix = \",X\"\n      break\n    case MODE.ZP_Y:\n    case MODE.ABS_Y:\n      suffix = \",Y\"\n      break\n    case MODE.IND:\n      prefix = \"(\"\n      suffix = \")\"\n      break\n    case MODE.IND_X:\n      prefix = \"(\"\n      suffix = \",X)\"\n      break\n    case MODE.IND_Y:\n      prefix = \"(\"\n      suffix = \"),Y\"\n      break\n  }\n  return [prefix, suffix]\n}\n\nexport const getInstrString = (code: PCodeInstr, vLo: number, vHi: number, PC: number) => {\n  let result = `${toHex(PC,4)}`\n  if (code) {\n    let [prefix, suffix] = modeString(code.mode)\n    if (code.PC >= 2) {\n      prefix = `   ${code.name}   ${prefix}$`\n    }\n    if (isRelativeInstr(code.name)) {\n      // The extra +2 is for the branch instruction itself\n      const addr = PC + 2 + (vLo > 127 ? vLo - 256 : vLo)\n      result += `${prefix}${toHex(addr, 4)}${suffix}`\n    } else {\n      switch (code.PC) {\n        case 1:\n          result += `   ${code.name}`\n          break\n        case 2:\n          result += `${prefix}${toHex(vLo)}${suffix}`\n          break\n        case 3:\n          result += `${prefix}${toHex(address(vLo, vHi),4)}${suffix}`\n          break\n      }\n    }\n  } else {\n    result += \"         ???\"\n  }\n  return result\n}\n\nexport const convertAppleKey = (e: KeyboardEvent, uppercase=false) => {\n  let key = 0\n  if (e.key.length === 1) {\n    if (e.metaKey || e.altKey) {\n      return 0\n    }\n    key = e.key.charCodeAt(0)\n    if (e.ctrlKey) {\n      if (key >= 0x40 && key <= 0x7E) {\n        key &= 0b00011111\n      } else {\n        return 0\n      }\n    } else if (uppercase) {\n      key = e.key.toUpperCase().charCodeAt(0)\n    }\n  } else {\n    const keymap: { [key: string]: number } = {\n      Enter: 13,\n      ArrowRight: 21,\n      ArrowLeft: 8,\n      Backspace: 8,\n      ArrowUp: 11,\n      ArrowDown: 10,\n      Escape: 27,\n      Tab: 9,\n      Shift: -1,\n      Control: -1\n    };\n    if (e.key === \"Backspace\" && e.shiftKey) {\n      key = 0x7F\n    } else if (e.key in keymap) {\n      key = keymap[e.key]\n    }\n  }\n  return key\n};\n\nexport const getPrintableChar = (value: number, isAltCharSet: boolean) => {\n  let v1 = value\n  if (isAltCharSet) {\n    if ((v1 >= 0 && v1 <= 31) || (v1 >= 64 && v1 <= 95)) {\n      v1 += 64\n    } else if (v1 >= 128 && v1 <= 159) {\n      v1 -= 64\n    } else if (v1 >= 160) {\n      v1 -= 128\n    }\n  } else {\n    // Shift Ctrl chars and second ASCII's into correct ASCII range\n    if ((v1 >= 0 && v1 <= 0x1f) || (v1 >= 0x60 && v1 <= 0x9f)) {\n      v1 += 64\n    }\n    v1 &= 0b01111111\n  }\n  return v1\n}\n\nlet zpPrev = new Uint8Array(1)\nexport const debugZeroPage = (zp: Uint8Array) => {\n  if (zpPrev.length === 1) zpPrev = zp\n  let diff = \"\"\n  for (let i = 0; i < 256; i++) {\n    if (zp[i] !== zpPrev[i]) {\n      diff += \" \" + toHex(i) + \":\" + toHex(zpPrev[i]) + \">\" + toHex(zp[i])\n    }\n  }\n  if (diff !== \"\") console.log(diff)\n  zpPrev = zp\n}\n\nexport const toASCII = (s: String) => s.split('').map(char => char.charCodeAt(0))\nexport const uint16toBytes = (n: number) => [n & 0xFF, (n >>> 8) & 0xFF]\nexport const uint32toBytes = (n: number) => [n & 0xFF, (n >>> 8) & 0xFF,\n  (n >>> 16) & 0xFF, (n >>> 24) & 0xFF]\n\nexport const replaceSuffix = (fname: String, suffix: String) => {\n  const i = fname.lastIndexOf('.') + 1\n  return fname.substring(0, i) + suffix\n}\n\n","import { gamepadMapping, handleRumbleMapping } from \"./game_mappings\"\nimport { memSetC000 } from \"./memory\"\nimport { SWITCHES } from \"./softswitches\"\n// import { doSaveTimeSlice } from \"./motherboard\"\n// import { addToBufferDebounce } from \"./keyboard\"\n\nlet gamePads: EmuGamepad[]\nconst maxTimeoutCycles = Math.trunc(0.0028*1.020484e6)\nlet paddle0timeout = maxTimeoutCycles / 2\nlet paddle1timeout = maxTimeoutCycles / 2\nlet paddle2timeout = maxTimeoutCycles / 2\nlet paddle3timeout = maxTimeoutCycles / 2\n// let prevPaddle0timeout = paddle0timeout\n// let prevPaddle1timeout = paddle1timeout\nlet countStart = 0\nlet leftAppleDown = false\nlet rightAppleDown = false\nlet leftButtonDown = false\nlet rightButtonDown = false\nlet isPB2down = false\nlet isLeftDown = false\nlet isRightDown = false\n\nexport const setLeftButtonDown = () => { leftButtonDown = true }\nexport const setRightButtonDown = () => { rightButtonDown = true }\nexport const setPushButton2 = () => { isPB2down = true }\n\nconst valueToTimeout = (value: number) => {\n  value = Math.min(Math.max(value, -1), 1)\n  return (value + 1) * maxTimeoutCycles / 2\n}\n\nexport const setGamepad0 = (value: number) => {\n  paddle0timeout = valueToTimeout(value)\n}\nexport const setGamepad1 = (value: number) => {\n  paddle1timeout = valueToTimeout(value)\n}\nexport const setGamepad2 = (value: number) => {\n  paddle2timeout = valueToTimeout(value)\n}\nexport const setGamepad3 = (value: number) => {\n  paddle3timeout = valueToTimeout(value)\n}\n\nexport const setButtonState = () => {\n  const wasLeftDown = isLeftDown\n  const wasRightDown = isRightDown\n  isLeftDown = leftAppleDown || leftButtonDown\n  isRightDown = rightAppleDown || rightButtonDown\n  SWITCHES.PB0.isSet = isLeftDown\n  SWITCHES.PB1.isSet = isRightDown || isPB2down\n  SWITCHES.PB2.isSet = isPB2down\n  if ((isLeftDown && !wasLeftDown) || (isRightDown && !wasRightDown)) {\n//    doSaveTimeSlice()\n  }\n}\n\nexport const pressAppleCommandKey = (isDown: boolean, left: boolean) => {\n  if (left) {\n    leftAppleDown = isDown\n  } else {\n    rightAppleDown = isDown\n  }\n  setButtonState()\n}\n\nexport const resetJoystick = (cycleCount: number) => {\n  memSetC000(0xC064, 0x80)\n  memSetC000(0xC065, 0x80)\n  memSetC000(0xC066, 0x80)\n  memSetC000(0xC067, 0x80)\n  countStart = cycleCount\n}\n\n// const largeDiff = (v1: number, v2: number) => {\n//   return (Math.abs(v1 - v2) > 0.1 * maxTimeoutCycles)\n// }\n\nexport const checkJoystickValues = (cycleCount: number) => {\n//   if (largeDiff(prevPaddle0timeout, paddle0timeout) ||\n//     largeDiff(prevPaddle1timeout, paddle1timeout)) {\n//     prevPaddle0timeout = paddle0timeout\n//     prevPaddle1timeout = paddle1timeout\n//     doSaveTimeSlice()\n//   }\n  const diff = cycleCount - countStart\n  memSetC000(0xC064, (diff < paddle0timeout) ? 0x80 : 0)\n  memSetC000(0xC065, (diff < paddle1timeout) ? 0x80 : 0)\n  memSetC000(0xC066, (diff < paddle2timeout) ? 0x80 : 0)\n  memSetC000(0xC067, (diff < paddle3timeout) ? 0x80 : 0)\n}\n\nlet mapping: GamePadMapping\n\nexport const setGamepads = (gamePadsIn: EmuGamepad[]) => {\n  gamePads = gamePadsIn\n  mapping = gamepadMapping()\n}\n\nconst nearZero = (value: number) => {return value > -0.01 && value < 0.01}\n\nconst convertGamepadAxes = (axes: number[]) => {\n  let xstick = axes[nearZero(axes[0]) ? 2 : 0]\n  let ystick = axes[nearZero(axes[1]) ? 3 : 1]\n  if (nearZero(xstick)) xstick = 0\n  if (nearZero(ystick)) ystick = 0\n  const dist = Math.sqrt(xstick * xstick + ystick * ystick)\n  const clip = 0.95 * ((dist === 0) ? 1 :\n    Math.max(Math.abs(xstick), Math.abs(ystick)) / dist)\n  xstick = Math.min(Math.max(-clip, xstick), clip)\n  ystick = Math.min(Math.max(-clip, ystick), clip)\n  xstick = Math.trunc(maxTimeoutCycles*(xstick + clip)/(2*clip))\n  ystick = Math.trunc(maxTimeoutCycles*(ystick + clip)/(2*clip))\n  return [xstick, ystick]\n}\n\nconst handleGamepad = (gp: number) => {\n  if (!gamePads || gamePads.length <= gp) return\n  const stick = convertGamepadAxes(gamePads[gp].axes)\n  if (gp === 0) {\n    paddle0timeout = stick[0]\n    paddle1timeout = stick[1]\n    leftButtonDown = false\n    rightButtonDown = false\n  } else {\n    paddle2timeout = stick[0]\n    paddle3timeout = stick[1]\n    isPB2down = false\n  }\n  let buttonPressed = false\n  gamePads[gp].buttons.forEach((button, i) => {\n    if (button) {\n      mapping(i, gamePads.length > 1, gp === 1)\n      buttonPressed = true\n    }\n  });\n  // Special \"no buttons down\" call\n  if (!buttonPressed) mapping(-1, gamePads.length > 1, gp === 1)\n\n  handleRumbleMapping()\n  setButtonState()\n}\n\nexport const handleGamepads = () => {\n  handleGamepad(0)\n  handleGamepad(1)\n}\n","import { addToBuffer, addToBufferDebounce } from \"../keyboard\"\nimport { getTextPageAsString } from \"../memory\"\n\n// AZTEC Controls\n// A, D: move left or right (while using weapon); face left or right (otherwise)\n// W: go to walk mode\n// R: go to run mode\n// C: go to climb mode (ascends steps or mounds)\n// J: jump\n// S: stop walking, running, or climbing\n// G: crawl once\n// P: set explosive (must be crawling)\n// O: open box or clear trash mound\n// L: look in box\n// T: take object from ground or box\n// Z: inventory\n// F: draw machete if you have one, gun otherwise, does nothing if unarmed\n// S: turn around while using weapon\n// L: lunge while using machete\n// M: stab at ground while using machete\n// G: switch from machete to gun\n// <spacebar>: fire gun\nconst timeout = 300\nlet leftdown = 0\nlet rightdown = 0\nlet buttonreleased = false\nconst gamepad = (button: number) => {\n  if (button === 14) {\n    rightdown = 0\n    if (leftdown === 0) {\n      addToBuffer('A')\n      leftdown++\n    } else if (leftdown === 1 && buttonreleased) {\n      addToBufferDebounce('W', timeout)\n      leftdown++\n    } else if (leftdown === 2 && buttonreleased) {\n      addToBufferDebounce('R', timeout);\n    }\n    buttonreleased = false\n    return\n  }\n  if (button === 15) {\n    leftdown = 0\n    if (rightdown === 0) {\n      addToBuffer('D')\n      rightdown++\n    } else if (rightdown === 1 && buttonreleased) {\n      addToBufferDebounce('W', timeout);\n      rightdown++\n    } else if (rightdown === 2 && buttonreleased) {\n      addToBufferDebounce('R', timeout);\n    }\n    buttonreleased = false\n    return\n  }\n  switch (button) {\n    case 0: addToBufferDebounce('J', timeout); break  // jump\n    case 1: addToBufferDebounce('G', 50); break       // crawl\n    case 2: addToBuffer('M'); addToBufferDebounce('O', timeout); break  // open/dig\n    case 3: addToBufferDebounce('L', timeout); break  // look/lunge\n    case 4: addToBufferDebounce('F', timeout); break\n    case 5: addToBuffer('P'); addToBufferDebounce('T', timeout); break  // 5 RB\n    case 6: break  // 6 LT\n    case 7: addToBufferDebounce(' ', timeout); break  // 7 RT\n    case 8: break  // 8 Select?\n    case 9: const str = getTextPageAsString();\n      if (str.includes(\"'N'\")) {\n        addToBuffer('N');\n      } else if (str.includes(\"'S'\")) {\n        addToBuffer('S');\n      } else if (str.includes(\"NUMERIC KEY\")) {\n        addToBuffer('1');\n      } else {\n        addToBuffer('N');\n      }\n      break  // 9 Start?\n    case 10: addToBufferDebounce('G', timeout); break  // 10 Left thumb button\n    case 11: break  // 11 Right thumb button\n    case 12: addToBufferDebounce('C', timeout); break  // 12 D-pad U, climb\n    case 13: addToBufferDebounce('S', timeout); break  // 13 D-pad D, stop\n    case 14:  // 14 D-pad L\n      break\n    case 15: break // 15 D-pad R\n    case -1: buttonreleased = true; return\n    default: break;\n  }\n  leftdown = 0\n  rightdown = 0\n  buttonreleased = false\n}\n\n// Aztec gamepad\nconst helptext = \n`AZTEC\nPaul Stephenson, Datamost 1982\n\nW: walk\nR: run\nJ: jump\nS: stop\nC: climb\nA: turn left\nD: turn right\nG: crawl (G to move)\nP: place and light explosive\nT: take item\nO: opens box or dig in trash\nL: look in box\nZ: inventory\n\nF: goes to fight mode:\n   S: spin around\n   A: move one to left\n   D: move one to right\n   L: lunge with machete\n   M: strike down with machete\n   G: draw gun\n   Space: shoot gun`\n\nexport const aztec: GameLibraryItem = {\n  address: 0x196D,\n  data: [0xAD, 0x00, 0xC0],\n  keymap: {},\n  gamepad: gamepad,\n  rumble: () => {},\n  setup: () => {},\n  helptext: helptext}\n\n","\n\nconst helptext = `FIREBUG\nSilas Warner, Muse Software, 1982\n\nKEYBOARD\n  W      up\nA S D    left stop right\n  X      down\n\nP or Return   pick up gas can\nM or Space    drop gas can\n\nJOYSTICK\nButton 0: drop gas can\nButton 1: pick up gas can\n`\n\n// Firebug - allows P for pickup, M for drop, for phones\n\nexport const firebug: GameLibraryItem = {\n  address: 0x452A,\n  data: [0xAD, 0x00, 0xC0],\n  keymap: {'P': '\\x0D', 'M': '\\x20'},\n  gamepad: () => {},\n  rumble: () => {},\n  setup: () => {},\n  helptext: helptext}\n\n","import { memGet } from \"../memory\"\nimport { passRumble } from \"../worker2main\"\n\nlet memB6 = 14\nlet memB7 = 14\nconst karatekaRumble = () => {\n  let newValue = memGet(0xB6)\n  if (memB6 < 40 && newValue < memB6) {\n    passRumble({startDelay: 220, duration: 300, weakMagnitude: 1, strongMagnitude: 0})\n  }\n  memB6 = newValue\n  newValue = memGet(0xB7)\n  if (memB7 < 40 && newValue < memB7) {\n    passRumble({startDelay: 220, duration: 300, weakMagnitude: 0, strongMagnitude: 1})\n  }\n  memB7 = newValue\n}\n\nconst helptext = `KARATEKA\nJordan Mechner, Brderbund 1984\nPress K for Keyboard control\nPress J for Joystick control\n\nKEYBOARD\nFighting stance:\nQ A Z     punch high, middle, low\nW S X     kick high, middle, low\nM .      advance\nN ,      retreat\nSpace     stand up\n\nStanding up:\nB         bow\nM .      run forward\nN ,      stop\nSpace     fighting stance\n\nJOYSTICK\nPush the joystick up to stand up, and release it to get into a fighting stance.\n\nFighting stance:\nButton 1: punch\nButton 0: kick\nMove the joystick up and down to control the height of your punches  and kicks. Move it right to advance and left to retreat.\n\nTo run forward, start from a standing position. Then move the joystick to the upper right. Press button 1 to bow.\n`\n\n// Karateka - allows N/M and ,/. to work as left/right arrow keys, for phones\nexport const karateka: GameLibraryItem = {\n  address: 0x6E6C,\n  data: [0xAD, 0x00, 0xC0],\n  keymap: {'N': '\\x08', 'M': '\\x15', ',': '\\x08', '.': '\\x15'},\n  gamepad: () => {},\n  rumble: karatekaRumble,\n  setup: () => {},\n  helptext: helptext}\n\n","import { setLeftButtonDown, setRightButtonDown } from \"../joystick\"\nimport { addToBuffer, addToBufferDebounce } from \"../keyboard\"\nimport { getTextPageAsString, memGet, memSet } from \"../memory\"\nimport { passRumble } from \"../worker2main\"\n\nconst helptext = \n`Castle Wolfenstein\nSilas Warner, Muse Software 1981\n\nKEYBOARD:\nQWE\nASD    Movement (S = Stop)\nZXC\n\nIOP\nKL;    Aim gun (L = Fire)\n,./\n\nSpace: Search guards, unlock doors & chests\nT:  Throw grenade\nU:  Use contents of chest\nReturn:  Inventory\n\nJOYSTICK:\nJoystick:  Move or aim\nLeft button (0):  Aim\nRight button (1): Shoot\nX button:  Search/unlock\nY button:  Use chest contents\nRB button: Throw grenade\nLB button: Inventory`\n\nconst timeout = 300\nconst gamepad = (button: number) => {\n  switch (button) {\n    case 0: setLeftButtonDown(); break   // aim\n    case 1: setRightButtonDown(); break  // shoot\n    case 2: addToBufferDebounce(' ', timeout); break  // search/unlock\n    case 3: addToBufferDebounce('U', timeout); break  // Use chest contents\n    case 4: addToBufferDebounce('\\r', timeout); break\n    case 5: addToBufferDebounce('T', timeout); break\n    case 9: const str = getTextPageAsString();\n      if (str.includes(\"'N'\")) {\n        addToBuffer('N');\n      } else if (str.includes(\"'S'\")) {\n        addToBuffer('S');\n      } else if (str.includes(\"NUMERIC KEY\")) {\n        addToBuffer('1');\n      } else {\n        addToBuffer('N');\n      }\n      break  // 9 Start?\n    case 10: setLeftButtonDown(); break  // 10 Left thumb button\n    case -1: break\n    default: console.log(`${button}`); break;\n  }\n}\n\nconst wolfsetup = () => {\n  memSet(0x1408, 0)\n  memSet(0x140A, 4)\n  let i = 0x145A\n  memSet(i, 0xEA)\n  memSet(i + 1, 0xEA)\n  memSet(i + 2, 0xEA)\n  i = 0x1468\n  memSet(i, 0xEA)\n  memSet(i + 1, 0xEA)\n  memSet(i + 2, 0xEA)\n}\n\nconst rumble = () => {\n  if (memGet(0xC01A) < 0x80 && memGet(0xC01D) < 0x80) {\n    passRumble({startDelay: 0, duration: 300, weakMagnitude: 1, strongMagnitude: 0})\n  }\n}\n\nexport const wolfenstein: GameLibraryItem = {\n  address: 0x1289,\n  data: [0xAD, 0x00, 0xC0],\n  keymap: {},\n  gamepad: gamepad,\n  rumble: rumble,\n  setup: wolfsetup,\n  helptext: helptext}\n\n","import { matchMemory } from \"./memory\"\nimport { setGamepad0, setGamepad1,\n  setGamepad2,\n  setGamepad3,\n  setLeftButtonDown, setPushButton2, setRightButtonDown } from \"./joystick\"\nimport { passHelptext } from \"./worker2main\";\nimport { aztec } from \"./games/aztec\";\nimport { firebug } from \"./games/firebug\";\nimport { karateka } from \"./games/karateka\";\nimport { wolfenstein } from \"./games/wolfenstein\";\n\nconst gameLibrary = new Array<GameLibraryItem>()\n\ngameLibrary.push(aztec)\ngameLibrary.push(firebug)\ngameLibrary.push(karateka)\ngameLibrary.push(wolfenstein)\n\nconst defaultButtons: GamePadMapping = (button: number,\n  dualJoysticks: boolean, isJoystick2: boolean) => {\n  if (isJoystick2) {\n    switch (button) {\n      case 0: setPushButton2(); break  // button #0 becomes push button 2\n      case 1: break  // ignore button #1\n      case 12: setGamepad3(-1); break   // D-pad U\n      case 13: setGamepad3(1); break    // D-pad D\n      case 14: setGamepad2(-1); break   // D-pad L\n      case 15: setGamepad2(1); break    // D-pad R\n      default: break;\n    }\n  } else {\n    switch (button) {\n      case 0: setLeftButtonDown(); break\n      case 1: if (!dualJoysticks) setRightButtonDown(); break\n      case 12: setGamepad1(-1); break   // D-pad U\n      case 13: setGamepad1(1); break    // D-pad D\n      case 14: setGamepad0(-1); break   // D-pad L\n      case 15: setGamepad0(1); break    // D-pad R\n      default: break;\n    }\n  }\n}\n\nexport const keyMapping = (key: string) => {\n  for (let game of gameLibrary) {\n    if (matchMemory(game.address, game.data)) {\n      return (key in game.keymap) ? game.keymap[key] : key\n    }   \n  }\n  return key\n}\n\nexport const gamepadMapping = () => {\n  for (let game of gameLibrary) {\n    if (matchMemory(game.address, game.data)) {\n      return (game.gamepad.length > 0) ? game.gamepad : defaultButtons\n    }   \n  }\n  return defaultButtons\n}\n\nexport const handleRumbleMapping = () => {\n  for (let game of gameLibrary) {\n    if (matchMemory(game.address, game.data)) {\n      game.rumble()\n      return\n    }   \n  }\n}\n\nexport const handleGameSetup = (reset = false) => {\n  for (let game of gameLibrary) {\n    if (matchMemory(game.address, game.data)) {\n      passHelptext(game.helptext ? game.helptext : ' ')\n      game.setup()\n      return\n    }   \n  }\n  if (reset) passHelptext(' ')\n}\n","import { keyMapping } from \"./game_mappings\"\nimport { memGetC000, memSetC000 } from \"./memory\"\nimport { doSaveTimeSlice } from \"./motherboard\"\n\nconst keyPress = (key: number) => {\n  memSetC000(0xC000, key | 0b10000000, 32)\n}\n\nlet keyBuffer = ''\nlet prevCount = 0\nexport const popKey = (cycleCount: number) => {\n  const diff = cycleCount - prevCount\n  if (keyBuffer !== '' && (memGetC000(0xC000) < 128 || diff > 100000)) {\n    prevCount = cycleCount\n    let key = keyBuffer.charCodeAt(0)\n    keyPress(key)\n    keyBuffer = keyBuffer.slice(1)\n    if (keyBuffer.length === 0) {\n      doSaveTimeSlice()\n    }\n  }\n}\n\nlet prevKey = ''\n\nexport const addToBuffer = (text: string) => {\n  // Avoid repeating keys in the buffer if the Apple isn't processing them.\n  if (text === prevKey && keyBuffer.length > 0) {\n    return\n  }\n  prevKey = text.length === 1 ? text : ''\n  keyBuffer += text\n}\n\nlet tPrev = 0\n\nexport const addToBufferDebounce = (text: string, timeout: number) => {\n  // Avoid repeating keys in the buffer if the Apple isn't processing them.\n  const t = performance.now()\n  if ((t - tPrev) < timeout) {\n    return\n  }\n  tPrev = t\n  prevKey = text.slice(0,1)\n  keyBuffer += text\n}\n\nexport const sendTextToEmulator = (text: string) => {\n  if (text.length === 1) {\n    addToBuffer(keyMapping(text))\n//    keyPress(keyMapping(text).charCodeAt(0))\n  } else {\n    addToBuffer(text)\n  }\n}\n","import { memGetC000, memSetC000 } from \"./memory\"\nimport { popKey } from \"./keyboard\"\nimport { passClickSpeaker } from \"./worker2main\"\nimport { resetJoystick, checkJoystickValues } from \"./joystick\"\nimport { toHex } from \"./utility\"\n\ntype tSetFunc = ((addr: number, cycleCount: number) => void) | null\n\ntype softSwitch = {\n  offAddr: number\n  onAddr: number\n  isSetAddr: number\n  writeOnly: boolean\n  isSet: boolean\n  setFunc: tSetFunc\n}\n\nconst sswitch: Array<softSwitch> = []\n\nconst NewSwitch = (offAddr: number, isSetAddr: number,\n  writeOnly = false,\n  setFunc: tSetFunc = null): softSwitch => {\n  const result: softSwitch = {\n    offAddr: offAddr,\n    onAddr: offAddr + 1,\n    isSetAddr: isSetAddr,\n    writeOnly: writeOnly,\n    isSet: false,\n    setFunc: setFunc,\n  }\n  if (offAddr >= 0xC000) {\n    sswitch[offAddr - 0xC000] = result\n    sswitch[offAddr + 1 - 0xC000] = result\n  } \n  if (isSetAddr >= 0xC000) {\n    sswitch[isSetAddr - 0xC000] = result\n  } \n  return result\n}\n\nconst SLOT6 = 0x60\n\nconst rand = () => Math.floor(256 * Math.random())\n\nexport const handleBankedRAM = (addr: number) => {\n  // Only keep bits 0, 1, 3 of the 0xC08* number\n  addr &= 0b1011\n  SWITCHES.READBSR2.isSet = addr === 0\n  SWITCHES.WRITEBSR2.isSet = addr === 1\n  SWITCHES.OFFBSR2.isSet = addr === 2\n  SWITCHES.RDWRBSR2.isSet = addr === 3\n  SWITCHES.READBSR1.isSet = addr === 8\n  SWITCHES.WRITEBSR1.isSet = addr === 9\n  SWITCHES.OFFBSR1.isSet = addr === 0x0A\n  SWITCHES.RDWRBSR1.isSet = addr === 0x0B\n  // Set soft switches for reading the bank-switched RAM status\n  SWITCHES.BSRBANK2.isSet = (addr <= 3)\n  SWITCHES.BSRREADRAM.isSet = [0, 3, 8, 0x0B].includes(addr)\n}\n\nexport const SWITCHES = {\n  STORE80: NewSwitch(0xC000, 0xC018, true),\n  RAMRD: NewSwitch(0xC002, 0xC013, true),\n  RAMWRT: NewSwitch(0xC004, 0xC014, true),\n  INTCXROM: NewSwitch(0xC006, 0xC015, true),\n  ALTZP: NewSwitch(0xC008, 0xC016, true),\n  SLOTC3ROM: NewSwitch(0xC00A, 0xC017, true),\n  COLUMN80: NewSwitch(0xC00C, 0xC01F, true),\n  ALTCHARSET: NewSwitch(0xC00E, 0xC01E, true),\n  KBRDSTROBE: NewSwitch(0, 0xC010, false, () => {\n    const keyvalue = memGetC000(0xC000) & 0b01111111\n    memSetC000(0xC000, keyvalue, 32)\n  }),\n  BSRBANK2: NewSwitch(0, 0xC011),    // status location, not a switch\n  BSRREADRAM: NewSwitch(0, 0xC012),  // status location, not a switch\n  CASSOUT: NewSwitch(0xC020, 0),  // random value filled in checkSoftSwitches\n  SPEAKER: NewSwitch(0xC030, 0, false, (addr, cycleCount) => {\n    memSetC000(0xC030, rand())\n    passClickSpeaker(cycleCount)\n  }),\n  GCSTROBE: NewSwitch(0xC040, 0),    // strobe output to game connector\n  EMUBYTE: NewSwitch(0, 0xC04F, false, () => {memSetC000(0xC04F, 0xCD)}),\n  TEXT: NewSwitch(0xC050, 0xC01A),\n  MIXED: NewSwitch(0xC052, 0xC01B),\n  PAGE2: NewSwitch(0xC054, 0xC01C),\n  HIRES: NewSwitch(0xC056, 0xC01D),\n  AN0: NewSwitch(0xC058, 0),  // random value filled in checkSoftSwitches\n  AN1: NewSwitch(0xC05A, 0),  // random value filled in checkSoftSwitches\n  AN2: NewSwitch(0xC05C, 0),  // random value filled in checkSoftSwitches\n  AN3: NewSwitch(0xC05E, 0),  // random value filled in checkSoftSwitches\n  CASSIN1: NewSwitch(0, 0xC060, false, () => {memSetC000(0xC060, rand())}),\n  PB0: NewSwitch(0, 0xC061),  // status location, not a switch\n  PB1: NewSwitch(0, 0xC062),  // status location, not a switch\n  PB2: NewSwitch(0, 0xC063),  // status location, not a switch\n  JOYSTICK12: NewSwitch(0xC064, 0, false, (addr, cycleCount) => {\n    checkJoystickValues(cycleCount)\n  }),\n  JOYSTICK34: NewSwitch(0xC066, 0, false, (addr, cycleCount) => {\n    checkJoystickValues(cycleCount)\n  }),\n  CASSIN2: NewSwitch(0, 0xC068, false, () => {memSetC000(0xC068, rand())}),\n  FASTCHIP_LOCK: NewSwitch(0xC06A, 0),   // used by Total Replay\n  FASTCHIP_ENABLE: NewSwitch(0xC06B, 0), // used by Total Replay\n  FASTCHIP_SPEED: NewSwitch(0xC06D, 0),  // used by Total Replay\n  JOYSTICKRESET: NewSwitch(0xC070, 0, false, (addr, cycleCount) => {\n    resetJoystick(cycleCount)\n    memSetC000(0xC070, rand())\n  }),\n  BANKSEL: NewSwitch(0xC073, 0),  // Applied Engineering RAMWorks (ignored)\n  LASER128EX: NewSwitch(0xC074, 0),  // used by Total Replay (ignored)\n  READBSR2: NewSwitch(0xC080, 0),\n  WRITEBSR2: NewSwitch(0xC081, 0),\n  OFFBSR2: NewSwitch(0xC082, 0),\n  RDWRBSR2: NewSwitch(0xC083, 0),\n  READBSR1: NewSwitch(0xC088, 0),\n  WRITEBSR1: NewSwitch(0xC089, 0),\n  OFFBSR1: NewSwitch(0xC08A, 0),\n  RDWRBSR1: NewSwitch(0xC08B, 0),\n  DRVSM0: NewSwitch(0xC080 + SLOT6, 0),\n  DRVSM1: NewSwitch(0xC082 + SLOT6, 0),\n  DRVSM2: NewSwitch(0xC084 + SLOT6, 0),\n  DRVSM3: NewSwitch(0xC086 + SLOT6, 0),\n  DRIVE: NewSwitch(0xC088 + SLOT6, 0),\n  DRVSEL: NewSwitch(0xC08A + SLOT6, 0),\n  DRVDATA: NewSwitch(0xC08C + SLOT6, 0),\n  DRVWRITE: NewSwitch(0xC08E + SLOT6, 0),\n}\n\nSWITCHES.TEXT.isSet = true\n\n// const skipDebugFlags = [0xC000, 0xC001, 0xC00D, 0xC00F, 0xC030, 0xC054, 0xC055, 0xC01F]\n\nexport const checkSoftSwitches = (addr: number,\n  calledFromMemSet: boolean, cycleCount: number) => {\n  // if (!skipDebugFlags.includes(addr)) {\n  //   const s = memC000[addr - 0xC000] > 0x80 ? 1 : 0\n  //   console.log(`${cycleCount} $${toHex(s6502.PC)}: $${toHex(addr)} [${s}] ${calledFromMemSet ? \"set\" : \"\"}`)\n  // }\n  // Handle banked-RAM soft switches, since these have duplicate addresses\n  // and need to call our special function.\n  if (addr >= 0xC080 && addr <= 0xC08F) {\n    // $C084...87 --> $C080...83, $C08C...8F --> $C088...8B\n    addr -= addr & 4\n    handleBankedRAM(addr)\n    return\n  }\n  if (addr === 0xC000 && !calledFromMemSet) {\n    popKey(cycleCount)\n    return\n  }\n  const sswitch1 = sswitch[addr - 0xC000]\n  if (!sswitch1) {\n    console.error(\"Unknown softswitch \" + toHex(addr))\n    memSetC000(addr, rand())\n    return\n  }\n  if (sswitch1.setFunc) {\n    sswitch1.setFunc(addr, cycleCount)\n    return\n  }\n  if (addr === sswitch1.offAddr || addr === sswitch1.onAddr) {\n    if (!sswitch1.writeOnly || calledFromMemSet) {\n      sswitch1.isSet = (addr === sswitch1.onAddr)\n    }\n    if (sswitch1.isSetAddr) {\n      memSetC000(sswitch1.isSetAddr, sswitch1.isSet ? 0x8D : 0x0D)\n    }\n    // Many games expect random \"noise\" from these soft switches.\n    if (addr >= 0xC020) memSetC000(addr, rand())\n  } else if (addr === sswitch1.isSetAddr) {\n    memSetC000(addr, sswitch1.isSet ? 0x8D : 0x0D)\n  }\n}\n","// Code converted from the C code library available at:\n// https://github.com/mr-stivo/dsk2woz2\n//\nimport { toASCII, uint16toBytes, uint32toBytes } from \"./utility\"\n\n/**\n  Appends a byte to a woz at a supplied position: number, returning the\n  position immediately after the byte.\n  @param woz The woz to write into.\n  @param position The position to write at.\n  @param value The byte to write.\n  @returns The position immediately after the byte.\n*/\nconst write_byte = (woz: Uint8Array, position: number, value: number) => {\n  const shift = position & 7\n  const byte_position = position >>> 3\n  woz[byte_position] |= value >>> shift\n  if (shift) woz[byte_position+1] |= value << (8 - shift)\n  return position + 8;\n}\n\n/**\n  Encodes a byte into Apple 4-and-4 format and appends it to a woz.\n  @param woz The woz to write into.\n  @param position The position to write at.\n  @param value The byte to encode and write.\n  @returns The position immediately after the encoded byte.\n*/\nconst write_4_and_4 = (woz: Uint8Array, position: number, value: number) => {\n  position = write_byte(woz, position, (value >>> 1) | 0xAA);\n  position = write_byte(woz, position, value | 0xAA);\n  return position;\n}\n\n/**\n  Appends a 6-and-2-style 10-bit sync word to a woz.\n  @param woz The woz to write into.\n  @param position The position to write at.\n  @returns The position immediately after the sync word.\n*/\nconst write_sync = (woz: Uint8Array, position: number) => {\n  position = write_byte(woz, position, 0xFF);\n  // Skip two bits, i.e. leave them as 0s\n  return position + 2\n}\n\n/*!\n  Converts a 256-byte source woz into the 343 byte values that\n  contain the Apple 6-and-2 encoding of that woz.\n  @param dest The at-least-343 byte woz to which the encoded sector is written.\n  @param src The 256-byte source data.\n*/\nconst encode_6_and_2 = (src: Uint8Array) => {\n  const six_and_two_mapping = [\n    0x96, 0x97, 0x9A, 0x9B, 0x9D, 0x9E, 0x9F, 0xA6,\n    0xA7, 0xAB, 0xAC, 0xAD, 0xAE, 0xAF, 0xB2, 0xB3,\n    0xB4, 0xB5, 0xB6, 0xB7, 0xB9, 0xBA, 0xBB, 0xBC,\n    0xBD, 0xBE, 0xBF, 0xCB, 0xCD, 0xCE, 0xCF, 0xD3,\n    0xD6, 0xD7, 0xD9, 0xDA, 0xDB, 0xDC, 0xDD, 0xDE,\n    0xDF, 0xE5, 0xE6, 0xE7, 0xE9, 0xEA, 0xEB, 0xEC,\n    0xED, 0xEE, 0xEF, 0xF2, 0xF3, 0xF4, 0xF5, 0xF6,\n    0xF7, 0xF9, 0xFA, 0xFB, 0xFC, 0xFD, 0xFE, 0xFF\n  ];\n\n  const dest = new Uint8Array(343)\n\n  // Fill in byte values: the first 86 bytes contain shuffled\n  // and combined copies of the bottom two bits of the sector\n  // contents; the 256 bytes afterwards are the remaining\n  // six bits.\n  const bit_reverse = [0, 2, 1, 3];\n  for (let c = 0; c < 84; c++) {\n    dest[c] =\n      bit_reverse[src[c] & 3] |\n      (bit_reverse[src[c + 86] & 3] << 2) |\n      (bit_reverse[src[c + 172] & 3] << 4);\n  }\n  dest[84] =\n    (bit_reverse[src[84] & 3] << 0) |\n    (bit_reverse[src[170] & 3] << 2);\n  dest[85] =\n      (bit_reverse[src[85] & 3] << 0) |\n      (bit_reverse[src[171] & 3] << 2);\n\n  for (let c = 0; c < 256; c++) {\n    dest[86 + c] = src[c] >>> 2;\n  }\n\n  // Exclusive OR each byte with the one before it.\n  dest[342] = dest[341];\n  let location = 342;\n  while(location > 1) {\n    location--;\n    dest[location] ^= dest[location - 1];\n  }\n\n  // Map six-bit values up to full bytes.\n  for (let c = 0; c < 343; c++) {\n    dest[c] = six_and_two_mapping[dest[c]];\n  }\n  return dest\n}\n\n/*!\n  Converts a DSK-style track to a WOZ-style track.\n  @param dest The 6646-byte woz that will contain the WOZ track. Both track contents and the\n      proper suffix will be written.\n  @param src The 4096-byte woz that contains the DSK track  16 instances of 256 bytes, each\n      a fully-decoded sector.\n  @param track_number The track number to encode into this track.\n  @param is_prodos @c true if the DSK image is in Pro-DOS order; @c false if it is in DOS 3.3 order.\n*/\nconst serialise_track = (src: Uint8Array, track_number: number, is_prodos: boolean) => {\n  let track_position = 0;    // This is the track position **in bits**.\n  const dest = new Uint8Array(6646).fill(0)\n\n  // Write gap 1.\n  for (let c = 0; c < 16; c++) {\n      track_position = write_sync(dest, track_position);\n  }\n\n  // Step through the sectors in physical order.\n  for (let sector = 0; sector < 16; sector++) {\n    // Prologue.\n    track_position = write_byte(dest, track_position, 0xD5);\n    track_position = write_byte(dest, track_position, 0xAA);\n    track_position = write_byte(dest, track_position, 0x96);\n    // Volume, track, setor and checksum, all in 4-and-4 format.\n    track_position = write_4_and_4(dest, track_position, 254);\n    track_position = write_4_and_4(dest, track_position, track_number);\n    track_position = write_4_and_4(dest, track_position, sector);\n    track_position = write_4_and_4(dest, track_position, 254 ^ track_number ^ sector);\n    // Epilogue.\n    track_position = write_byte(dest, track_position, 0xDE);\n    track_position = write_byte(dest, track_position, 0xAA);\n    track_position = write_byte(dest, track_position, 0xEB);\n\n    // Write gap 2.\n    for (let c = 0; c < 7; c++) {\n        track_position = write_sync(dest, track_position);\n    }\n\n    // Write the sector body.\n    // Prologue.\n    track_position = write_byte(dest, track_position, 0xD5);\n    track_position = write_byte(dest, track_position, 0xAA);\n    track_position = write_byte(dest, track_position, 0xAD);\n\n    // Map from this physical sector to a logical sector.\n    const ls = (sector === 15) ? 15 : ((sector * (is_prodos ? 8 : 7)) % 15);\n\n    // Sector contents.\n    const contents = encode_6_and_2(src.slice(ls * 256, ls * 256 + 256));\n    for (let c = 0; c < contents.length; c++) {\n      track_position = write_byte(dest, track_position, contents[c]);            \n    }\n\n    // Epilogue.\n    track_position = write_byte(dest, track_position, 0xDE);\n    track_position = write_byte(dest, track_position, 0xAA);\n    track_position = write_byte(dest, track_position, 0xEB);\n\n    // Write gap 3.\n    for (let c = 0; c < 16; c++) {\n      track_position = write_sync(dest, track_position);\n    }\n  }\n  return dest\n}\n\nexport const convertdsk2woz = (dskData: Uint8Array, isPO: boolean) => {\n  if (dskData.length !== 35 * 16 * 256) {\n    return new Uint8Array()\n  }\n  const woz = new Uint8Array(512*3 + 512*35*13).fill(0)\n  woz.set(toASCII(\"WOZ2\\xFF\\n\\r\\n\"), 0)\n  woz.set(toASCII(\"INFO\"), 12)\n  woz[16] = 60    // Chunk size\n  woz[20] = 2     // INFO version: 2\n  woz[21] = 1     // Disk type: 5.25\"\n  woz[22] = 0     // Write protection: disabled\n  woz[23] = 0     // Cross-track synchronised image: no\n  woz[24] = 1     // MC3470 fake bits have been removed: yes\n  woz.fill(32, 25, 57)\n  woz.set(toASCII(\"Apple2TS (CT6502)\"), 25)\n  woz[57] = 1     // Disk sides: 1\n  woz[58] = 0     // Boot sector format: 0 (unknown)\n  woz[59] = 32    // Optimal bit timing: 32 (4us)\n  woz[60] = 0     // Compatible hardware: 0 (unknown)\n  woz[62] = 0     // Required RAM: 0 (unknown)\n  woz[64] = 13    // Largest track blocks (512 bytes): 13 (default track size)\n  woz.set(toASCII(\"TMAP\"), 80)\n  woz[84] = 160    // Chunk size\n  woz.fill(0xFF, 88, 88 + 160)  // Fill the TMAP with empty tracks\n  // Now fill in the quarter tracks around each whole track\n  let offset = 0;\n  for (let c = 0; c < 35; c++) {\n    offset = 88 + (c << 2)\n    if (c > 0) woz[offset - 1] = c\n    woz[offset] = woz[offset + 1] = c\n  }\n  woz.set(toASCII(\"TRKS\"), 248)\n  woz.set(uint32toBytes(1280 + 35*13*512), 252)\n  for (let c = 0; c < 35; c++) {\n    offset = 256 + (c << 3);\n    woz.set(uint16toBytes(3 + c*13), offset)  // start block\n    woz[offset + 2] = 13   // block count\n    woz.set(uint32toBytes(50304), offset + 4)  // start block\n    const trackInput = dskData.slice(c * 16 * 256, (c + 1) * 16 * 256)\n    const trackData = serialise_track(trackInput, c, isPO)\n    offset = 512 * (3 + 13 * c)\n    woz.set(trackData, offset)\n  }\n  return woz\n}\n","import { convertdsk2woz } from \"./convertdsk2woz\"\nimport { replaceSuffix } from \"./utility\";\n\nlet crcTable = new Uint32Array(256).fill(0)\n\nconst makeCRCTable = () => {\n  let c;\n  for (let n =0; n < 256; n++) {\n    c = n;\n    for (let k =0; k < 8; k++) {\n      c = ((c&1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    crcTable[n] = c;\n  }\n}\n\nexport const crc32 = (data: Uint8Array, offset = 0) => {\n  if (crcTable[255] === 0) {\n    makeCRCTable()\n  }\n  let crc = 0 ^ (-1);\n  for (let i = offset; i < data.length; i++) {\n    crc = (crc >>> 8) ^ crcTable[(crc ^ data[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)) >>> 0;\n};\n\nconst decodeWoz2 = (driveState: DriveState, diskData: Uint8Array): boolean => {\n  const woz2 = [0x57, 0x4F, 0x5A, 0x32, 0xFF, 0x0A, 0x0D, 0x0A]\n  const isWoz2 = woz2.find((value, i) => value !== diskData[i]) === undefined\n  if (!isWoz2) return false\n  driveState.isWriteProtected = diskData[22] === 1\n  const crc = diskData.slice(8, 12)\n  const storedCRC = crc[0] + (crc[1] << 8) + (crc[2] << 16) + crc[3] * (2 ** 24)\n  const actualCRC = crc32(diskData, 12)\n  if (storedCRC !== 0 && storedCRC !== actualCRC) {\n    alert(\"CRC checksum error: \" + driveState.filename)\n    return false\n  }\n  for (let htrack=0; htrack < 80; htrack++) {\n    const tmap_index = diskData[88 + htrack * 2]\n    if (tmap_index < 255) {\n      const tmap_offset = 256 + 8 * tmap_index\n      const trk = diskData.slice(tmap_offset, tmap_offset + 8)\n      driveState.trackStart[htrack] = 512*(trk[0] + (trk[1] << 8))\n      // const nBlocks = trk[2] + (trk[3] << 8)\n      driveState.trackNbits[htrack] = trk[4] + (trk[5] << 8) + (trk[6] << 16) + trk[7] * (2 ** 24)\n    } else {\n      driveState.trackStart[htrack] = 0\n      driveState.trackNbits[htrack] = 51200\n//        console.log(`empty woz2 track ${htrack / 2}`)\n    }\n  }\n  return true\n}\n\nconst decodeWoz1 = (driveState: DriveState, diskData: Uint8Array): boolean => {\n  const woz1 = [0x57, 0x4F, 0x5A, 0x31, 0xFF, 0x0A, 0x0D, 0x0A]\n  const isWoz1 = woz1.find((value, i) => value !== diskData[i]) === undefined\n  if (!isWoz1) {\n    return false\n  }\n  driveState.isWriteProtected = diskData[22] === 1\n  for (let htrack=0; htrack < 80; htrack++) {\n    const tmap_index = diskData[88 + htrack * 2]\n    if (tmap_index < 255) {\n      driveState.trackStart[htrack] = 256 + tmap_index * 6656\n      const trk = diskData.slice(driveState.trackStart[htrack] + 6646,\n        driveState.trackStart[htrack] + 6656)\n      driveState.trackNbits[htrack] = trk[2] + (trk[3] << 8)\n    } else {\n      driveState.trackStart[htrack] = 0\n      driveState.trackNbits[htrack] = 51200\n//        console.log(`empty woz1 track ${htrack / 2}`)\n    }\n  }\n  return true\n}\n\nconst isDSK = (filename: String) => {\n  const f = filename.toLowerCase()\n  const isDSK = f.endsWith(\".dsk\") || f.endsWith(\".do\")\n  const isPO = f.endsWith(\".po\")\n  return isDSK || isPO\n}\n\nconst decodeDSK = (driveState: DriveState, diskData: Uint8Array) => {\n  let f = driveState.filename.toLowerCase()\n  const isPO = f.endsWith(\".po\")\n  const newData = convertdsk2woz(diskData, isPO)\n  if (newData.length === 0) {\n    return new Uint8Array()\n  }\n  driveState.filename = replaceSuffix(driveState.filename, 'woz')\n  driveState.diskHasChanges = true\n  return newData\n}\n\nconst int32 = (data: Uint8Array) => {\n  return data[0] + 256 * (data[1] + 256 * (data[2] + 256 * data[3]))\n}\n\nconst decode2MG = (driveState: DriveState, diskData: Uint8Array): Uint8Array => {\n//    const nblocks = int32(diskData.slice(0x14, 0x18))\n  const offset = int32(diskData.slice(0x18, 0x1c))\n  const nbytes = int32(diskData.slice(0x1c, 0x20))\n  let magic = ''\n  for (let i = 0; i < 4; i++) magic += String.fromCharCode(diskData[i]) \n  if (magic !== '2IMG') {\n    console.error(\"Corrupt 2MG file.\")\n    return new Uint8Array()\n  }\n  if (diskData[12] !== 1) {\n    console.error(\"Only ProDOS 2MG files are supported.\")\n    return new Uint8Array()\n  }\n  driveState.filename = replaceSuffix(driveState.filename, 'hdv')\n  driveState.diskHasChanges = true\n  return diskData.slice(offset, offset + nbytes)\n}\n\nexport const isHardDriveImage = (filename: string) => {\n  const f = filename.toLowerCase()\n  return f.endsWith('.hdv') || f.endsWith('.po') || f.endsWith('.2mg')\n}\n\nexport const decodeDiskData = (driveState: DriveState, diskData: Uint8Array): Uint8Array => {\n  driveState.diskHasChanges = false\n  const fname = driveState.filename.toLowerCase()\n  if (isHardDriveImage(fname)) {\n    driveState.hardDrive = true\n    driveState.status = ''\n    if (fname.endsWith('.hdv') || fname.endsWith('.po')) {\n      return diskData\n    }\n    if (fname.endsWith('.2mg')) {\n      return decode2MG(driveState, diskData)\n    }\n  }\n  if (isDSK(driveState.filename)) {\n    diskData = decodeDSK(driveState, diskData)\n  }\n  if (decodeWoz2(driveState, diskData)) {\n    return diskData\n  }\n  if (decodeWoz1(driveState, diskData)) {\n    return diskData\n  }\n  if (fname !== '') {\n    console.error(\"Unknown disk format.\")\n  }\n  return new Uint8Array()\n}\n","import { pcodes } from \"./instructions\";\nimport { toHex, isRelativeInstr, MODE } from \"./utility\";\n\nconst doOutput = false\n\ntype CodeLine = {\n  label: string,\n  instr: string,\n  operand: string,\n}\n\ntype LabelOperand = {\n  label: string,\n  operation: string,\n  value: number\n}\n\nconst parseNumberOptionalAddressMode = (operand: string): [MODE, number] => {\n  let mode: MODE = MODE.IMPLIED;\n  let value = -1\n\n  if (operand.length > 0) {\n    if (operand.startsWith('#')) {\n      mode = MODE.IMM\n      operand = operand.substring(1)\n    } else if (operand.startsWith('(')) {\n      if (operand.endsWith(\",Y\")) {\n        mode = MODE.IND_Y\n      } else if (operand.endsWith(\",X)\")) {\n        mode = MODE.IND_X\n      } else {\n        mode = MODE.IND\n      }\n      operand = operand.substring(1)\n    } else if (operand.endsWith(\",X\")) {\n      mode = (operand.length > 5) ? MODE.ABS_X : MODE.ZP_X\n    } else if (operand.endsWith(\",Y\")) {\n      mode = (operand.length > 5) ? MODE.ABS_Y : MODE.ZP_Y\n    } else {\n      mode = (operand.length > 3) ? MODE.ABS : MODE.ZP_REL\n    }\n\n    if (operand.startsWith('$')) {\n      operand = \"0x\" + operand.substring(1)\n    }\n    value = parseInt(operand)\n  }\n\n  return [mode, value]\n}\n\n\nlet labels: { [key: string]: number } = {};\n\nconst splitOperand = (operand: string) => {\n  const s = operand.split(/([+-])/)\n  const codeLine: LabelOperand = {\n    label: s[0] ? s[0] : '',\n    operation: s[1] ? s[1] : '',\n    value: s[2] ? parseInt(s[2].replace('#','').replace('$','0x')) : 0\n  }\n  return codeLine\n}\n\nconst getOperandModeValue =\n  (pc: number, instr: string, operand: string, pass: 1 | 2): [MODE, number] => {\n    let mode = MODE.IMPLIED\n    let value = -1\n    if (operand.match(/^[#]?[$0-9()]+/)) {\n      return parseNumberOptionalAddressMode(operand)\n    }\n    const labelOperand = splitOperand(operand)\n    if (labelOperand.label) {\n      // See if we have an immediate value, like #CONST\n      const isImmediate = labelOperand.label.startsWith('#')\n      if (isImmediate) {\n        labelOperand.label = labelOperand.label.substring(1)\n      }\n      if (labelOperand.label in labels) {\n        value = labels[labelOperand.label]\n      } else if (pass === 2) {\n          throw new Error(\"Missing label: \" + labelOperand.label);\n      }\n      if (labelOperand.operation && labelOperand.value) {\n        switch (labelOperand.operation) {\n          case '+': value += labelOperand.value\n            break;\n          case '-': value -= labelOperand.value\n            break;\n          default:\n            throw new Error(\"Unknown operation in operand: \" + operand);\n        }\n        value = (value % 65536 + 65536) % 65536\n      }\n      if (isRelativeInstr(instr)) {\n        mode = MODE.ZP_REL\n        value = (value - pc + 254)\n        if (value > 255) value -= 256\n      } else {\n        if (isImmediate) {\n          mode = MODE.IMM\n        } else {\n          mode = (value >= 0 && value <= 255) ? MODE.ZP_REL : MODE.ABS\n        }\n      }\n    }\n    return [mode, value]\n}\n\nconst splitLine = (line: string, prevLabel: string) => {\n  line = line.replace(/\\s+/g, ' ')\n  const s = line.split(' ')\n  const codeLine: CodeLine = {\n    label: s[0] ? s[0] : prevLabel,\n    instr: s[1] ? s[1] : '',\n    operand: s[2] ? s[2] : ''\n  }\n  return codeLine\n}\n\nconst handleLabel = (parts: CodeLine, pc: number) => {\n  if (parts.label in labels) {\n    throw new Error(\"Redefined label: \" + parts.label)\n  }\n  if (parts.instr === 'EQU') {\n    const [mode, value] = parseNumberOptionalAddressMode(parts.operand)\n    if (mode !== MODE.ABS && mode !== MODE.ZP_REL) {\n      throw new Error(\"Illegal EQU value: \" + parts.operand)\n    }\n    labels[parts.label] = value\n  } else {\n    labels[parts.label] = pc\n  }\n}\n\nconst getHexCodesForInstruction = (match: number, value: number) => {\n  let newInstructions: Array<number> = [];\n  const pcode = pcodes[match]\n  newInstructions.push(match);\n  if (value >= 0) {\n    newInstructions.push(value % 256)\n    if (pcode.PC === 3) {\n      newInstructions.push(Math.trunc(value / 256))\n    }\n  }\n  return newInstructions\n}\n\nconst parseOnce = (start: number, code: Array<string>, pass: 1 | 2): Array<number> => {\n  let pc = start\n  let instructions: Array<number> = [];\n  let prevLabel = ''\n  code.forEach(line => {\n    line = (line.split(';'))[0].trimEnd().toUpperCase()\n    if (!line) return\n    let output = (line + '                   ').slice(0, 30) + toHex(pc, 4) + \"- \"\n\n    const codeLine = splitLine(line, prevLabel)\n    prevLabel = ''\n\n    // Just a label by itself, just tack onto the beginning of next line.\n    if (!codeLine.instr) {\n      prevLabel = codeLine.label\n      return\n    }\n\n    if (codeLine.instr === 'ORG') {\n      if (doOutput && pass === 2) console.log(output)\n      return\n    }\n\n    if (pass === 1 && codeLine.label) {\n      handleLabel(codeLine, pc)\n    }\n\n    if (codeLine.instr === 'EQU') {\n      return\n    }\n\n    const [mode, value] = getOperandModeValue(pc, codeLine.instr, codeLine.operand, pass)\n\n    if (isRelativeInstr(codeLine.instr) && (value < 0 || value > 255)) {\n      throw new Error(`Branch instruction out of range: ${line} value: ${value}`);\n    }\n\n    const match = pcodes.findIndex(pc => pc && pc.name === codeLine.instr && pc.mode === mode)\n    if (match < 0) {\n      throw new Error(`Unknown instruction: ${codeLine.instr} mode=${mode} pass=${pass}`);\n    }\n    const newInstructions = getHexCodesForInstruction(match, value)\n    pc += pcodes[match].PC\n\n    if (doOutput && pass === 2) {\n      newInstructions.forEach(i => {output += ` ${toHex(i)}`});\n      console.log(output)\n    }\n    instructions.push(...newInstructions)\n  });\n\n  return instructions\n}\n\nexport const parseAssembly = (start: number, code: Array<string>): Array<number> => {\n  labels = {}\n  try {\n    parseOnce(start, code, 1)\n    const instructions = parseOnce(start, code, 2)\n    return instructions\n  } catch (error) {\n    console.error(error)\n    return []\n  }\n}\n\n","import { parseAssembly } from \"./assembler\"\nimport { setX, setY, setCarry, s6502 } from \"./instructions\"\nimport { setSlotDriver, memGet, getDataBlock, setDataBlock, memSet } from \"./memory\"\nimport { getHardDriveData, getHardDriveState, passData } from \"./drivestate\"\nimport { toHex } from \"./utility\"\n\nlet timerID: any | number = 0\n\n// $Cx00 + driverAddr = address for our hard drive driver\n// SmartPort driver is this address + 3\nconst driverAddr = 0xC0\n\nconst code1 = `\n         LDX   #$20    ; Apple IIe looks for magic bytes $20, $00, $03.\n         LDA   #$00    ; These indicate a disk drive or SmartPort device.\n         LDX   #$03\n         LDA   #$00    ; $3C=disk drive, $00=SmartPort\n         BIT   $CFFF   ; Trigger all peripheral cards to turn off expansion ROMs\n         LDA   #$01    ; ProDOS command code = READ\n         STA   $42     ; Store ProDOS command code\n         LDA   #$4C    ; JMP\n         STA   $07FD\n         LDA   #$${toHex(driverAddr)}   ; jump address\n         STA   $07FE\n         LDA   #$60    ; Fake RTS to determine our slot\n         STA   $07FF\n         JSR   $07FF\n         TSX\n         LDA   $100,X  ; High byte of slot adddress\n         STA   $07FF   ; Store this for the high byte of our JMP command\n         ASL           ; Shift $Cs up to $s0 (e.g. $C7 -> $70)\n         ASL           ; We need this for the ProDOS unit number (below).\n         ASL           ; Format = bits DSSS0000\n         ASL           ; D = drive number (0), SSS = slot number (1-7)\n         STA   $43     ; Store ProDOS unit number here\n         LDA   #$08    ; Store block (512 bytes) at address $0800\n         STA   $45     ; Address high byte\n         LDA   #$00\n         STA   $44     ; Address low byte\n         STA   $46     ; Block 0 low byte\n         STA   $47     ; Block 0 high byte\n         JSR   $07FD   ; Read the block (will JMP to our driver and trigger it)\n         BCS   ERROR\n         LDA   #$0A    ; Store block (512 bytes) at address $0A00\n         STA   $45     ; Address high byte\n         LDA   #$01\n         STA   $46     ; Block 1 low byte\n         JSR   $07FD   ; Read\n         BCS   ERROR\n         LDA   $0801   ; Should be nonzero\n         BEQ   ERROR\n         LDA   #$01    ; Should always be 1\n         CMP   $0800\n         BNE   ERROR\n         LDX   $43     ; ProDOS block 0 code wants ProDOS unit number in X\n         JMP   $801    ; Continue reading the disk\nERROR    JMP   $E000   ; Out to BASIC on error\n`\nconst code2 = `\n         NOP           ; Hard drive driver address\n         BRA   DONE\n         TSX           ; SmartPort driver address\n         INX\n         INC   $100,X\n         INC   $100,X\n         INC   $100,X\nDONE     BCS   ERR\n         LDA   #$00\n         RTS\nERR      LDA   #$27\n         RTS\n`\n\n// $CnFE status byte\n//  bit 7 - Medium is removable.\n//  bit 6 - Device is interruptable.\n//  bit 5-4 - Number of volumes on the device (0-3).\n//  bit 3 - The device supports formatting.\n//  bit 2 - The device can be written to.\n//  bit 1 - The device can be read from (must be on).\n//  bit 0 - The device's status can be read (must be on).\n\nconst prodos8driver = () => {\n  const driver = new Uint8Array(256).fill(0)\n  const pcode1 = parseAssembly(0x0, code1.split(\"\\n\"))\n  driver.set(pcode1, 0)\n  const pcode2 = parseAssembly(0x0, code2.split(\"\\n\"))\n  driver.set(pcode2, driverAddr)\n  driver[0xFE] = 0b00010111  // see above\n  driver[0xFF] = driverAddr\n  return driver\n}\n\nlet code = new Uint8Array()\n\nexport const enableHardDrive = (enable = true) => {\n  const slot = 7\n  if (code.length === 0) {\n    code = prodos8driver()\n  }\n  code[1] = enable ? 0x20 : 0x00\n  const addr = 0xC000 + driverAddr + slot * 0x100\n  setSlotDriver(slot, code, addr, processHardDriveBlockAccess)\n  setSlotDriver(slot, code, addr + 3, processSmartPortAccess)\n}\n\nconst processSmartPortAccess = () => {\n  const ds = getHardDriveState()\n  if (!ds.hardDrive) return\n  const dd = getHardDriveData()\n  const S = 0x100 + s6502.StackPtr\n  const callAddr = memGet(S + 1) + 256 * memGet(S + 2)\n  const spCommand = memGet(callAddr + 1)\n  const spParamList = memGet(callAddr + 2) + 256 * memGet(callAddr + 3)\n  // These parameters are needed for status (0), read (1), and write (2)\n  const unitNumber = memGet(spParamList + 1)\n  const bufferAddr = memGet(spParamList + 2) + 256 * memGet(spParamList + 3)\n\n  switch (spCommand) {\n    case 0:\n      if (memGet(spParamList) !== 0x03) {\n        console.error(`Incorrect SmartPort parameter count at address ${spParamList}`)\n        setCarry()\n        return\n      }\n      const statusCode = memGet(spParamList + 4)\n      switch (statusCode) {\n        case 0:\n          if (unitNumber === 0) {\n            // Store number of SmartPort devices in the status buffer.\n            memSet(bufferAddr, 1)\n            setCarry(false)\n          } else {\n            console.error(`SmartPort status for unitNumber ${unitNumber} not implemented`)\n            setCarry()\n          }\n          break\n        default:\n          console.error(`SmartPort statusCode ${statusCode} not implemented`)\n          setCarry()\n          break\n      }\n      return\n    case 1:\n      if (memGet(spParamList) !== 0x03) {\n        console.error(`Incorrect SmartPort parameter count at address ${spParamList}`)\n        setCarry()\n        return\n      }\n      const block = memGet(spParamList + 4) + 256 * memGet(spParamList + 5) +\n        65536 * memGet(spParamList + 6)\n      const blockStart = 512 * block\n      const dataRead = dd.slice(blockStart, blockStart + 512)\n      setDataBlock(bufferAddr, dataRead)\n      break\n    case 2:\n      break\n    default:\n      console.error(`SmartPort command ${spCommand} not implemented`)\n      setCarry()\n      return\n  }\n  setCarry(false)\n  ds.motorRunning = true\n  if (!timerID) {\n    timerID = setTimeout(() => {\n      timerID = 0\n      if (ds) ds.motorRunning = false\n      passData()\n    }, 500)\n  }\n  passData()\n}\n\nexport const processHardDriveBlockAccess = () => {\n  const ds = getHardDriveState()\n  if (!ds.hardDrive) return\n  const dd = getHardDriveData()\n  const block = memGet(0x46) + 256 * memGet(0x47)\n  const blockStart = 512 * block\n  let bufferAddr = memGet(0x44) + 256 * memGet(0x45)\n  const dataLen = dd.length\n  ds.status = ` ${toHex(block, 4)} ${toHex(bufferAddr, 4)}`\n//  console.log(`cmd=${memGet(0x42)} ${ds.status}`)\n\n  switch (memGet(0x42)) {\n    case 0:\n      // Status test: 300: A2 AB A0 CD 8D 06 C0 A9 00 85 42 A9 70 85 43 20 EA C7 00\n      if (ds.filename.length === 0 || dataLen === 0) {\n        setX(0)\n        setY(0)\n        setCarry()\n        return\n      }\n      const nblocks = dataLen / 512\n      setX(nblocks & 0xFF)\n      setY(nblocks >>> 8)\n      break\n    case 1:\n      if (blockStart + 512 > dataLen) {\n        setCarry()\n        return\n      }\n      const dataRead = dd.slice(blockStart, blockStart + 512)\n      setDataBlock(bufferAddr, dataRead)\n      break;\n    case 2:\n      if (blockStart + 512 > dataLen) {\n        setCarry()\n        return\n      }\n      const dataWrite = getDataBlock(bufferAddr)\n      dd.set(dataWrite, blockStart)\n      ds.diskHasChanges = true\n      break\n    case 3:\n      console.error(\"Hard drive format not implemented yet\")\n      setCarry()\n      return\n    default:\n      console.error(\"unknown hard drive command\")\n      setCarry()\n      return\n  }\n\n  setCarry(false)\n  ds.motorRunning = true\n  if (!timerID) {\n    timerID = setTimeout(() => {\n      timerID = 0\n      if (ds) ds.motorRunning = false\n      passData()\n    }, 500)\n  }\n  passData()\n}","import { Buffer } from \"buffer\"\nimport { passDriveProps } from \"./worker2main\"\nimport { decodeDiskData, isHardDriveImage } from \"./decodedisk\"\nimport { doPauseDiskDrive, doResetDiskDrive } from \"./diskdata\"\nimport { enableHardDrive } from \"./harddrivedata\"\n\nconst initDriveState = (drive: number): DriveState => {\n  return {\n    hardDrive: drive === 0,\n    status: \"\",\n    filename: \"\",\n    diskHasChanges: false,\n    motorRunning: false,\n    isWriteProtected: false,\n    halftrack: 0,\n    prevHalfTrack: 0,\n    writeMode: false,\n    currentPhase: 0,\n    trackStart: drive > 0 ? Array<number>(80) : Array<number>(),\n    trackNbits: drive > 0 ? Array<number>(80) : Array<number>(),\n    trackLocation: 0,\n  }\n}\n\nconst driveState: DriveState[] = [initDriveState(0), initDriveState(1), initDriveState(2)]\nconst driveData: Array<Uint8Array> = [new Uint8Array(), new Uint8Array(), new Uint8Array()]\n\nlet currentDrive = 1\n\nexport const setCurrentDrive = (drive: number) => {currentDrive = drive}\n\nexport const getCurrentDriveState = () => driveState[currentDrive]\n\nexport const getCurrentDriveData = () => driveData[currentDrive]\n\nexport const getHardDriveState = () => driveState[0]\nexport const getHardDriveData = () => driveData[0]\n\nexport const getFilename = () => {\n  for (let i = 0; i < driveState.length; i++) {\n    if (driveState[i].filename !== \"\") return driveState[i].filename\n  }\n  return \"\"\n}\n\nexport const passData = () => {\n  for (let i = 0; i < driveState.length; i++) {\n    const dprops: DriveProps = {\n      hardDrive: driveState[i].hardDrive,\n      drive: i,\n      filename: driveState[i].filename,\n      status: driveState[i].status,\n      motorRunning: driveState[i].motorRunning,\n      diskHasChanges: driveState[i].diskHasChanges,\n      diskData: driveState[i].diskHasChanges ? driveData[i] : new Uint8Array()\n    }\n    passDriveProps(dprops)\n  }\n}\n\nexport const getDriveSaveState = (full: boolean) => {\n  let data = ['', '', '']\n  for (let i=(full ? 0 : 1); i < 3; i++) {\n    data[i] = Buffer.from(driveData[i]).toString(\"base64\")\n  }\n  return { currentDrive: currentDrive,\n    driveState: driveState, driveData: data }\n}\n\nexport const restoreDriveSaveState = (newState: any) => {\n  currentDrive = newState.currentDrive\n  for (let i=0; i < 3; i++) {\n    driveState[i] = newState.driveState[i]\n    if (newState.driveData[i] !== '') {\n      driveData[i] = new Uint8Array(Buffer.from(newState.driveData[i], 'base64'))\n    }\n  }\n  if (driveState[0].hardDrive) {\n    enableHardDrive(driveState[0].filename !== '')\n  }\n  passData()\n}\n\nexport const doResetDrive = () => {\n  doResetDiskDrive(driveState[1])\n  doResetDiskDrive(driveState[2])\n  passData()\n}\n\nexport const doPauseDrive = (resume = false) => {\n  doPauseDiskDrive(resume)\n  passData()\n}\n\nexport const doSetDriveProps = (props: DriveProps) => {\n  let drive = props.drive\n  // See if the \"wrong\" disk image was put into a drive. If so, swap the drive.\n  if (props.filename !== '') {\n    if (isHardDriveImage(props.filename)) {\n      drive = 0\n      driveState[0].hardDrive = true\n    } else {\n      if (drive === 0) drive = 1\n    }\n  }\n  driveState[drive] = initDriveState(drive)\n  driveState[drive].filename = props.filename\n  driveState[drive].motorRunning = props.motorRunning\n  driveData[drive] = decodeDiskData(driveState[drive], props.diskData)\n  if (driveData[drive].length === 0) {\n    driveState[drive].filename = ''\n  }\n  if (driveState[drive].hardDrive) {\n    enableHardDrive(driveState[drive].filename !== '')\n  }\n  passData()\n}\n","import { passDriveSound } from \"./worker2main\"\nimport { SWITCHES } from \"./softswitches\"\nimport { cycleCount } from './instructions'\nimport { toHex, DRIVE } from \"./utility\"\nimport { getCurrentDriveData, getCurrentDriveState, passData, setCurrentDrive } from \"./drivestate\"\n\nlet motorOffTimeout: any = 0\n\nexport const doResetDiskDrive = (driveState: DriveState) => {\n  SWITCHES.DRIVE.isSet = false\n  doMotorTimeout(driveState)\n  driveState.halftrack = 68\n  driveState.prevHalfTrack = 68\n}\n\nexport const doPauseDiskDrive = (resume = false) => {\n  if (resume) {\n    const ds = getCurrentDriveState()\n    if (ds.motorRunning) {\n      startMotor(ds)\n    }\n  } else {\n    passDriveSound(DRIVE.MOTOR_OFF)\n  }\n}\n\nconst moveHead = (ds: DriveState, offset: number) => {\n  if (ds.trackStart[ds.halftrack] > 0) {\n    ds.prevHalfTrack = ds.halftrack\n  }\n  ds.halftrack += offset\n  if (ds.halftrack < 0 || ds.halftrack > 68) {\n    passDriveSound(DRIVE.TRACK_END)\n    ds.halftrack = (ds.halftrack < 0) ? 0 : (ds.halftrack > 68 ? 68 : ds.halftrack)\n  } else {\n    passDriveSound(DRIVE.TRACK_SEEK)\n  }\n  ds.status = ` Track ${ds.halftrack / 2}`\n  passData()\n  // Adjust new track location based on arm position relative to old track loc.\n  if (ds.trackStart[ds.halftrack] > 0 && ds.prevHalfTrack !== ds.halftrack) {\n    // const oldloc = dState.trackLocation\n    ds.trackLocation = Math.floor(ds.trackLocation * (ds.trackNbits[ds.halftrack] / ds.trackNbits[ds.prevHalfTrack]))\n    if (ds.trackLocation > 3) {\n      ds.trackLocation -= 4\n    }\n  }\n}\n\nconst pickbit = [128, 64, 32, 16, 8, 4, 2, 1]\nconst clearbit = [0b01111111, 0b10111111, 0b11011111, 0b11101111,\n  0b11110111, 0b11111011, 0b11111101, 0b11111110]\n\nconst getNextBit = (ds: DriveState, dd: Uint8Array) => {\n  ds.trackLocation = ds.trackLocation % ds.trackNbits[ds.halftrack]\n  let bit: number\n  if (ds.trackStart[ds.halftrack] > 0) {\n    const fileOffset = ds.trackStart[ds.halftrack] + (ds.trackLocation >> 3)\n    const byte = dd[fileOffset]\n    const b = ds.trackLocation & 7\n    bit = (byte & pickbit[b]) >> (7 - b)\n  } else {\n    // TODO: Freak out like a MC3470 and return random bits\n    bit = 1\n  }\n  ds.trackLocation++\n  return bit\n}\n\nlet dataRegister = 0\n\nconst getNextByte = (ds: DriveState, dd: Uint8Array) => {\n  if (dd.length === 0) return 0\n  let result = 0\n  if (dataRegister === 0) {\n    while (getNextBit(ds, dd) === 0) {}\n    // This will become the high bit on the next read\n    dataRegister = 0x40\n    // Read the next 6 bits, all except the last one.\n    for (let i = 5; i >= 0; i--) {\n      dataRegister |= getNextBit(ds, dd) << i\n    }\n  } else {\n    // Read the last bit.\n    const bit = getNextBit(ds, dd)\n    dataRegister = (dataRegister << 1) | bit\n  }\n  result = dataRegister\n  if (dataRegister > 127) {\n    dataRegister = 0\n  }\n  return result\n}\n\nlet prevCycleCount = 0\n\nconst doWriteBit = (ds: DriveState, dd: Uint8Array, bit: 0 | 1) => {\n  ds.trackLocation = ds.trackLocation % ds.trackNbits[ds.halftrack]\n  // TODO: What about writing to empty tracks?\n  if (ds.trackStart[ds.halftrack] > 0) {\n    const fileOffset = ds.trackStart[ds.halftrack] + (ds.trackLocation >> 3)\n    let byte = dd[fileOffset]\n    const b = ds.trackLocation & 7\n    if (bit) {\n      byte |= pickbit[b]\n    } else {\n      byte &= clearbit[b]\n    }\n    dd[fileOffset] = byte\n  }\n  ds.trackLocation++\n}\n\nconst doWriteByte = (ds: DriveState, dd: Uint8Array, delta: number) => {\n  // Sanity check to make sure we aren't on an empty track. Is this correct?\n  if (dd.length === 0 || ds.trackStart[ds.halftrack] === 0) {\n    return\n  }\n  if (dataRegister > 0) {\n    if (delta >= 16) {\n      for (let i = 7; i >= 0; i--) {\n        doWriteBit(ds, dd, dataRegister & 2**i ? 1 : 0)      \n      }\n    }\n    if (delta >= 36) {\n      doWriteBit(ds, dd, 0)\n    }\n    if (delta >= 40) {\n      doWriteBit(ds, dd, 0)\n    }\n    debugCache.push(delta >= 40 ? 2 : delta >= 36 ? 1 : dataRegister)\n    ds.diskHasChanges = true\n    dataRegister = 0\n  }\n}\n\nconst doMotorTimeout = (ds: DriveState) => {\n  motorOffTimeout = 0\n  if (!SWITCHES.DRIVE.isSet) {\n    ds.motorRunning = false\n  }\n  passData()\n  passDriveSound(DRIVE.MOTOR_OFF)\n}\n\nconst startMotor = (ds: DriveState) => {\n  if (motorOffTimeout) {\n    clearTimeout(motorOffTimeout)\n    motorOffTimeout = 0\n  }\n  ds.motorRunning = true\n  passData()\n  passDriveSound(DRIVE.MOTOR_ON)\n}\n\nconst stopMotor = (ds: DriveState) => {\n  if (motorOffTimeout === 0) {\n    motorOffTimeout = setTimeout(() => doMotorTimeout(ds), 1000);\n  }\n}\n\nlet debugCache:number[] = []\nconst doDebugDrive = false\n\nconst dumpData = (ds: DriveState, addr: number) => {\n  // if (dataRegister !== 0) {\n  //   console.error(`addr=${toHex(addr)} writeByte= ${dataRegister}`)\n  // }\n  if (debugCache.length > 0 && ds.halftrack === 2 * 0x00) {\n    if (doDebugDrive) {\n      let output = `TRACK ${toHex(ds.halftrack/2)}: `\n      let out = ''\n      debugCache.forEach(element => {\n        switch (element) {\n          case 1: out = 'Ff'; break;\n          case 2: out = 'FF'; break;\n          default: out = element.toString(16); break;\n        }\n        output += out + ' '\n      });\n      console.log(output)\n    }\n    debugCache = []\n  }\n}\n\nexport const handleDriveSoftSwitches =\n  (addr: number, value: number): number => {\n  let ds = getCurrentDriveState()\n  let dd = getCurrentDriveData()\n  let result = 0\n  if (ds.hardDrive) return result\n  const delta = cycleCount - prevCycleCount\n  // if (doDebugDrive && value !== 0x96) {\n  //   const dc = (delta < 100) ? `  deltaCycles=${delta}` : ''\n  //   const wb = (dataRegister > 0) ? `  writeByte=$${toHex(dataRegister)}` : ''\n  //   const v = (value > 0) ? `  value=$${toHex(value)}` : ''\n  //   console.log(`write ${ds.writeMode}  addr=$${toHex(addr)}${dc}${wb}${v}`)\n  // }\n  if (addr === SWITCHES.DRVDATA.offAddr) {  // $C08C SHIFT/READ\n    if (ds.motorRunning && !ds.writeMode) {\n      return getNextByte(ds, dd)\n    }\n  }\n  if (addr === SWITCHES.DRIVE.onAddr) {  // $C089\n    startMotor(ds)\n    dumpData(ds, addr)\n    return result\n  }\n  if (addr === SWITCHES.DRIVE.offAddr) {  // $C088\n    stopMotor(ds)\n    dumpData(ds, addr)\n    return result\n  }\n  if (addr === SWITCHES.DRVSEL.offAddr || addr === SWITCHES.DRVSEL.onAddr) {\n    const currentDrive = (addr === SWITCHES.DRVSEL.offAddr) ? 1 : 2\n    const dsOld = getCurrentDriveState()\n    setCurrentDrive(currentDrive)\n    ds = getCurrentDriveState()\n    if (ds !== dsOld && dsOld.motorRunning) {\n      dsOld.motorRunning = false\n      ds.motorRunning = true\n      passData()\n    }\n    return result\n  }\n  const ps = [SWITCHES.DRVSM0, SWITCHES.DRVSM1,\n    SWITCHES.DRVSM2, SWITCHES.DRVSM3]\n  const a = addr - SWITCHES.DRVSM0.offAddr\n  // One of the stepper motors has been turned on or off\n  if (a >= 0 && a <= 7) {\n    const ascend = ps[(ds.currentPhase + 1) % 4]\n    const descend = ps[(ds.currentPhase + 3) % 4]\n    // Make sure our current phase motor has been turned off.\n    if (!ps[ds.currentPhase].isSet) {\n      if (ds.motorRunning && ascend.isSet) {\n        moveHead(ds, 1)\n        ds.currentPhase = (ds.currentPhase + 1) % 4\n\n      } else if (ds.motorRunning && descend.isSet) {\n        moveHead(ds, -1)\n        ds.currentPhase = (ds.currentPhase + 3) % 4\n      }\n    }\n    // if (doDebugDrive) {\n    //   const phases = `${ps[0].isSet ? 1 : 0}${ps[1].isSet ? 1 : 0}` +\n    //     `${ps[2].isSet ? 1 : 0}${ps[3].isSet ? 1 : 0}`\n    //   console.log(`***** PC=${toHex(s6502.PC,4)}  addr=${toHex(addr,4)} ` +\n    //     `phase ${a >> 1} ${a % 2 === 0 ? \"off\" : \"on \"}  ${phases}  ` +\n    //     `track=${dState.halftrack / 2}`)\n    // }\n    dumpData(ds, addr)\n  } else if (addr === SWITCHES.DRVWRITE.offAddr) {  // $C08E READ\n    if (ds.motorRunning && ds.writeMode) {\n      doWriteByte(ds, dd, delta)\n      // Reset the Disk II Logic State Sequencer clock\n      prevCycleCount = cycleCount\n    }\n    ds.writeMode = false\n    if (SWITCHES.DRVDATA.isSet) {\n      result = ds.isWriteProtected ? 0xFF : 0\n    }\n    dumpData(ds, addr)\n  } else if (addr === SWITCHES.DRVWRITE.onAddr) {  // $C08F WRITE\n    ds.writeMode = true\n    // Reset the Disk II Logic State Sequencer clock\n    prevCycleCount = cycleCount\n    if (value >= 0) {\n      dataRegister = value\n    }\n  } else if (addr === SWITCHES.DRVDATA.onAddr) {  // $C08D LOAD/READ\n    if (ds.motorRunning) {\n      if (ds.writeMode) {\n        doWriteByte(ds, dd, delta)\n        // Reset the Disk II Logic State Sequencer clock\n        prevCycleCount = cycleCount\n      }\n      if (value >= 0) {\n        dataRegister = value\n      }\n    }\n  }\n\n  return result\n}\n","import { SWITCHES, checkSoftSwitches } from \"./softswitches\";\nimport { cycleCount } from \"./instructions\"\nimport { handleDriveSoftSwitches } from \"./diskdata\"\nimport { romBase64 } from \"./roms/rom_2e\"\nimport { Buffer } from \"buffer\";\nimport { handleGameSetup } from \"./game_mappings\";\n\n// 00000: main memory\n// 10000: aux memory \n// 20000...23FFF: ROM\n// 24000...246FF: Slots 1-7\n// Bank1 of $D000-$DFFF is stored at 0x*D000-0x*DFFF (* 0 for main, 1 for aux)\n// Bank2 of $D000-$DFFF is stored at 0x*C000-0x*CFFF (* 0 for main, 1 for aux)\nexport let memory = (new Uint8Array(600 * 256)).fill(0)\n\n// Mappings from real Apple II address to memory array above.\n// 256 pages of memory, from $00xx to $FFxx\nconst addressGetTable = (new Array<number>(256)).fill(-1)\nconst addressSetTable = (new Array<number>(256)).fill(-1)\n\nconst ROMindexMinusC0 = 0x200 - 0xC0\nconst SLOTindexMinusC1 = 0x240 - 0xC1\nconst AUXindex = 0x100\nconst ROMstartMinusC000 = 256 * ROMindexMinusC0\nconst SLOTstartMinusC100 = 256 * SLOTindexMinusC1\nconst AUXstart = 256 * AUXindex\n\nconst updateMainAuxMemoryTable = () => {\n  const offsetAuxRead = SWITCHES.RAMRD.isSet ? AUXindex : 0\n  const offsetAuxWrite = SWITCHES.RAMWRT.isSet ? AUXindex : 0\n  const offsetPage2 = SWITCHES.PAGE2.isSet ? AUXindex : 0\n  const offsetTextPageRead = SWITCHES.STORE80.isSet ? offsetPage2 : offsetAuxRead\n  const offsetTextPageWrite = SWITCHES.STORE80.isSet ? offsetPage2 : offsetAuxWrite\n  const offsetHgrPageRead = (SWITCHES.STORE80.isSet && SWITCHES.HIRES.isSet) ? offsetPage2 : offsetAuxRead\n  const offsetHgrPageWrite = (SWITCHES.STORE80.isSet && SWITCHES.HIRES.isSet) ? offsetPage2 : offsetAuxWrite\n  for (let i = 2; i < 256; i++) {\n    addressGetTable[i] = i + offsetAuxRead;\n    addressSetTable[i] = i + offsetAuxWrite;\n  }\n  for (let i = 4; i <= 7; i++) {\n    addressGetTable[i] = i + offsetTextPageRead;\n    addressSetTable[i] = i + offsetTextPageWrite;\n  }\n  for (let i = 0x20; i <= 0x3F; i++) {\n    addressGetTable[i] = i + offsetHgrPageRead;\n    addressSetTable[i] = i + offsetHgrPageWrite;\n  }\n}\n\nconst updateReadBankSwitchedRamTable = () => {\n  const offsetZP = SWITCHES.ALTZP.isSet ? AUXindex : 0\n  addressGetTable[0] = offsetZP;\n  addressGetTable[1] = 1 + offsetZP;\n  addressSetTable[0] = offsetZP;\n  addressSetTable[1] = 1 + offsetZP;\n  if (SWITCHES.BSRREADRAM.isSet) {\n    for (let i = 0xD0; i <= 0xFF; i++) {\n      addressGetTable[i] = i + offsetZP;\n    }\n    if (!SWITCHES.BSRBANK2.isSet) {\n      // Bank1 of $D000-$DFFF is actually in 0xC0...0xCF\n      for (let i = 0xD0; i <= 0xDF; i++) {\n        addressGetTable[i] = i - 0x10 + offsetZP;\n      }\n    }\n  } else {\n    // ROM ($C000...$FFFF) is in 0x200...0x23F\n    for (let i = 0xC0; i <= 0xFF; i++) {\n      addressGetTable[i] = ROMindexMinusC0 + i;\n    }\n  }\n}\n\nconst updateWriteBankSwitchedRamTable = () => {\n  const offsetZP = SWITCHES.ALTZP.isSet ? AUXindex : 0\n  const writeRAM = SWITCHES.WRITEBSR1.isSet || SWITCHES.WRITEBSR2.isSet ||\n    SWITCHES.RDWRBSR1.isSet || SWITCHES.RDWRBSR2.isSet\n  if (writeRAM) {\n    for (let i = 0xD0; i <= 0xFF; i++) {\n      addressSetTable[i] = i + offsetZP;\n    }\n    if (!SWITCHES.BSRBANK2.isSet) {\n      // Bank1 of $D000-$DFFF is actually in 0xC0...0xCF\n      for (let i = 0xD0; i <= 0xDF; i++) {\n        addressSetTable[i] = i - 0x10 + offsetZP;\n      }\n    }\n  } else {\n    // ROM is not writeable\n    for (let i = 0xC0; i <= 0xFF; i++) {\n      addressSetTable[i] = -1;\n    }\n  }\n}\n\nconst updateSlotRomTable = () => {\n  // Read peripheral slot ROM\n  if (!SWITCHES.INTCXROM.isSet) {\n    // TODO: Currently, $C800-$CFFF is not being filled in for cards.\n    for (let i = 0xC1; i <= 0xC7; i++) {\n      addressGetTable[i] = SLOTindexMinusC1 + i;\n    }\n  }\n  if (!SWITCHES.SLOTC3ROM.isSet) {\n    addressGetTable[0xC3] = ROMindexMinusC0 + 0xC3\n  }\n}\n\nexport const updateAddressTables = () => {\n  updateMainAuxMemoryTable()\n  updateReadBankSwitchedRamTable()\n  updateWriteBankSwitchedRamTable()\n  updateSlotRomTable()\n  // Scale all of our mappings up by 256 to get to offsets in memory array.\n  for (let i = 0; i < 256; i++) {\n    addressGetTable[i] = 256 * addressGetTable[i];\n    addressSetTable[i] = 256 * addressSetTable[i];\n  }\n}\n\nexport const specialJumpTable = new Map<number, () => void>();\n\nexport const setSlotDriver = (slot: number, driver: Uint8Array, jump = 0, fn = () => {}) => {\n  memory.set(driver, SLOTstartMinusC100 + 0xC000 + slot * 0x100)\n  if (jump) {\n    specialJumpTable.set(jump, fn)\n  }\n}\n\nexport const memoryReset = () => {\n  memory.fill(0xFF, 0, 0x1FFFF)\n  const rom64 = romBase64.replace(/\\n/g, \"\")\n  const rom = new Uint8Array(\n    Buffer.from(rom64, \"base64\")\n  )\n  memory.set(rom, ROMstartMinusC000 + 0xC000)\n  updateAddressTables()\n}\n\n// Fill all pages of either main or aux memory with 0, 1, 2,...\nexport const memorySetForTests = (aux = false) => {\n  memoryReset()\n  const offset = aux ? AUXstart : 0\n  for (let i=0; i <= 0xFF; i++) {\n    memory.fill(i, i * 256 + offset, (i + 1) * 256 + offset)\n  }\n}\n\n// Set $C007: FF to see this code\n// Hack to change the cursor\n// rom[0xC26F - 0xC000] = 161\n// rom[0xC273 - 0xC000] = 161\n// Hack to speed up the cursor\n// rom[0xC288 - 0xC000] = 0x20\n\nexport const readWriteAuxMem = (addr: number, write = false) => {\n  let useAux = write ? SWITCHES.RAMWRT.isSet : SWITCHES.RAMRD.isSet\n  if (addr <= 0x1FF || addr >= 0xC000) {\n    useAux = SWITCHES.ALTZP.isSet\n  } else if (addr >= 0x400 && addr <= 0x7FF) {\n    if (SWITCHES.STORE80.isSet) {\n      useAux = SWITCHES.PAGE2.isSet\n    }\n  } else if (addr >= 0x2000 && addr <= 0x3FFF) {\n    if (SWITCHES.STORE80.isSet) {\n      if (SWITCHES.HIRES.isSet) {\n        useAux = SWITCHES.PAGE2.isSet\n      }\n    }\n  }\n  return useAux\n}\n\nconst memGetSoftSwitch = (addr: number, code=0): number => {\n  // $C019 Vertical blanking status (0 = vertical blanking, 1 = beam on)\n  if (addr === 0xC019) {\n    // Return \"low\" for 70 scan lines out of 262 (70 * 65 cycles = 4550)\n    return ((cycleCount % 17030) > 12480) ? 0x0D : 0x8D\n  }\n  checkSoftSwitches(addr, false, cycleCount)\n  if (addr >= SWITCHES.DRVSM0.offAddr && addr <= SWITCHES.DRVWRITE.onAddr) {\n    return handleDriveSoftSwitches(addr, -1)\n  }\n  updateAddressTables()\n  return memory[ROMstartMinusC000 + addr]\n}\n\nexport const memGet = (addr: number, code=0): number => {\n  const page = addr >>> 8\n  if (page === 0xC0) {\n    return memGetSoftSwitch(addr, code)\n  }\n  const shifted = addressGetTable[page]\n  return memory[shifted + (addr & 255)]\n}\n\nexport const memSet = (addr: number, value: number) => {\n  const page = addr >>> 8\n  if (page === 0xC0) {\n    if (addr >= SWITCHES.DRVSM0.offAddr && addr <= SWITCHES.DRVWRITE.onAddr) {\n      handleDriveSoftSwitches(addr, value)\n    } else {\n      checkSoftSwitches(addr, true, cycleCount)\n      updateAddressTables()\n    }\n    return\n  }\n  const shifted = addressSetTable[page]\n  if (shifted < 0) return\n  memory[shifted + (addr & 255)] = value\n}\n\nexport const memGetC000 = (addr: number) => {\n  return memory[ROMstartMinusC000 + addr]\n}\n\nexport const memSetC000 = (addr: number, value: number, repeat = 1) => {\n  const start = ROMstartMinusC000 + addr\n  memory.fill(value, start, start + repeat)\n}\n\nconst TEXT_PAGE1 = 0x400\nconst TEXT_PAGE2 = 0x800\nconst offset = [\n  0, 0x80, 0x100, 0x180, 0x200, 0x280, 0x300, 0x380, 0x28, 0xA8, 0x128, 0x1A8,\n  0x228, 0x2A8, 0x328, 0x3A8, 0x50, 0xD0, 0x150, 0x1D0, 0x250, 0x2D0, 0x350,\n  0x3D0,\n]\n\nexport const getTextPage = (getLores = false) => {\n  let jstart = 0\n  let jend = 24\n  let is80column = false\n  if (getLores) {\n    if (SWITCHES.TEXT.isSet || SWITCHES.HIRES.isSet) {\n      return new Uint8Array()\n    }\n    jend = SWITCHES.MIXED.isSet ? 20 : 24\n    is80column = SWITCHES.COLUMN80.isSet && !SWITCHES.AN3.isSet\n  } else {\n    if (!SWITCHES.TEXT.isSet && !SWITCHES.MIXED.isSet) {\n      return new Uint8Array()\n    }\n    if (!SWITCHES.TEXT.isSet && SWITCHES.MIXED.isSet) jstart = 20\n    is80column = SWITCHES.COLUMN80.isSet\n  }\n  if (is80column) {\n    // Only select second 80-column text page if STORE80 is also OFF\n    const pageOffset = (SWITCHES.PAGE2.isSet && !SWITCHES.STORE80.isSet) ? TEXT_PAGE2 : TEXT_PAGE1\n    const textPage = new Uint8Array(80 * (jend - jstart)).fill(0xA0)\n    for (let j = jstart; j < jend; j++) {\n      const joffset = 80 * (j - jstart)\n      for (let i = 0; i < 40; i++) {\n        textPage[joffset + 2 * i + 1] = memory[pageOffset + offset[j] + i]\n        textPage[joffset + 2 * i] = memory[AUXstart + pageOffset + offset[j] + i]\n      }\n    }\n    return textPage\n  } else {\n    const pageOffset = SWITCHES.PAGE2.isSet ? TEXT_PAGE2 : TEXT_PAGE1\n    const textPage = new Uint8Array(40 * (jend - jstart))\n    for (let j = jstart; j < jend; j++) {\n      const joffset = 40 * (j - jstart)\n      let start = pageOffset + offset[j]\n      textPage.set(memory.slice(start, start + 40), joffset)\n    }\n    return textPage\n  }\n}\n\nexport const getTextPageAsString = () => {\n  return Buffer.from(getTextPage().map((n) => (n &= 127))).toString()\n}\n\nexport const getHires = () => {\n  if (SWITCHES.TEXT.isSet || !SWITCHES.HIRES.isSet) {\n    return new Uint8Array()\n  }\n  const doubleRes = SWITCHES.COLUMN80.isSet && !SWITCHES.AN3.isSet\n  const nlines = SWITCHES.MIXED.isSet ? 160 : 192\n  if (doubleRes) {\n    // Only select second 80-column text page if STORE80 is also OFF\n    const pageOffset = (SWITCHES.PAGE2.isSet && !SWITCHES.STORE80.isSet) ? 0x4000 : 0x2000\n    const hgrPage = new Uint8Array(80 * nlines)\n    for (let j = 0; j < nlines; j++) {\n      const addr = pageOffset + 40 * Math.trunc(j / 64) +\n        1024 * (j % 8) + 128 * (Math.trunc(j / 8) & 7)\n      for (let i = 0; i < 40; i++) {\n        hgrPage[j * 80 + 2 * i + 1] = memory[addr + i]\n        hgrPage[j * 80 + 2 * i] = memory[AUXstart + addr + i]\n      }\n    }\n    return hgrPage\n  } else {\n    const pageOffset = SWITCHES.PAGE2.isSet ? 0x4000 : 0x2000\n    const hgrPage = new Uint8Array(40 * nlines)\n    for (let j = 0; j < nlines; j++) {\n      const addr = pageOffset + 40 * Math.trunc(j / 64) +\n        1024 * (j % 8) + 128 * (Math.trunc(j / 8) & 7)\n      hgrPage.set(memory.slice(addr, addr + 40), j * 40)\n    }\n    return hgrPage\n  }\n}\n\nexport const getDataBlock = (addr: number) => {\n  const offset = addressGetTable[addr >>> 8]\n  return memory.slice(offset, offset + 512)\n}\n\nexport const setDataBlock = (addr: number, data: Uint8Array) => {\n  const offset = addressSetTable[addr >>> 8] + (addr & 255)\n  memory.set(data, offset)\n  handleGameSetup()\n}\n\nexport const matchMemory = (addr: number, data: number[]) => {\n  for (let i = 0; i < data.length; i++) {\n   if (memGet(addr + i) !== data[i]) return false\n  }\n  return true\n}","export const romBase64=`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\ncM5oYLEoLB/AEBmNAcCEKphFIGqwBK1VwMiYSqixKCxUwKQqLB7AEAbJILACCUBg\nSCn/MBat+wRqaEiQDiwewBAJSUAsrM7wAklALB/AEB2NAcBIhCqYRSBKsAStVcDI\nmEqoaJEorVTApCpoYJEoaGBImEisewUgRM6NewYpgEmrTM3OSJhIrHsFrXsGIHDO\naKhoYCBxzan/hTKt+wQpBPACRjKteweFKK37B4UprfsFhSVgLBLAED2pBs2z+/A2\nogMsEcAwAqILjbP7LIDArbP7yQbwAegsgcAsgcCgAKn4hTeENrE2kTbI0PnmN9D1\nvYDAvYDAYAAAAOmBStAUpD+mPtABiMqKGOU6hT4QAciY5TvQQKQvuT0AkTqIEPgg\nSPkgGvwgGvxM4/ylPSCO+Kq9APrFQtATvcD5xUPQDKVEpC7AnfCzxS7wysY90Nzm\nRMY18NakNJiqTNL8IMf/rQACyaDwEsmN0AFgIKf/yZPQ5Yrw4iB4/qkDhT0gE/8K\n6b7JwpDRCgqiBAomQiZDyhD4xj3w9BDkogUgyMSlRAoKBTXJILAGpjXwAgmAhUSE\nNLkAAsm78ATJjdC0TGvP32/YZdf43JTZsdsw89jf4duP85jz5PHd8dTxJPIx8kDy\n1/Ph8+j2/fZo92735vdX/CD3Jvd092zybvJy8nbyf/JO8mrZVfKF8qXyyvIX87vz\nnvNh8kXaPdkR2cjZSNj0AyDZatnb2W3Y69mD58jYr9gS43rn1NqV2KTWadaf20jW\nkOsj7K/rCgDe4hLUzd//4o3uru9B6Qnv6u/x7zrwnvBk59bmxeMH5+XmRuZa5obm\nkeZ5wOd5qed7gel7aOp9lu5QVN9GTt9/z+5/l95kZN9FTsRGT9JORVjUREFUwUlO\nUFXUREXMREnNUkVBxEfSVEVY1FBSo0lOo0NBTMxQTE/USExJzlZMSc5IR1KySEfS\nSENPTE9SvUhQTE/URFJB11hEUkHXSFRBwkhPTcVST1S9U0NBTEW9U0hMT0HEVFJB\nQ8VOT1RSQUPFTk9STUHMSU5WRVJTxUZMQVPIQ09MT1K9UE/QVlRBwkhJTUVNukxP\nTUVNuk9ORVLSUkVTVU3FUkVDQUzMU1RPUsVTUEVFRL1MRdRHT1TPUlXOScZSRVNU\nT1LFpkdPU1XCUkVUVVLOUkXNU1RP0E/OV0FJ1ExPQcRTQVbFREXGUE9LxVBSSU7U\nQ09O1ExJU9RDTEVB0kdF1E5F11RBQqhUz0bOU1BDqFRIRc5B1E5P1FNURdCrraqv\n3kFOxE/Svr28U0fOSU7UQULTVVPSRlLFU0NSTqhQRMxQT9NTUdJSTsRMT8dFWNBD\nT9NTSc5UQc5BVM5QRUXLTEXOU1RSpFZBzEFTw0NIUqRMRUZUpFJJR0hUpE1JRKQA\nTkVYVCBXSVRIT1VUIEZP0lNZTlRB2FJFVFVSTiBXSVRIT1VUIEdPU1XCT1VUIE9G\nIERBVMFJTExFR0FMIFFVQU5USVTZT1ZFUkZMT9dPVVQgT0YgTUVNT1LZVU5ERUYn\nRCBTVEFURU1FTtRCQUQgU1VCU0NSSVDUUkVESU0nRCBBUlJB2URJVklTSU9OIEJZ\nIFpFUs9JTExFR0FMIERJUkVD1FRZUEUgTUlTTUFUQ8hTVFJJTkcgVE9PIExPTsdG\nT1JNVUxBIFRPTyBDT01QTEXYQ0FOJ1QgQ09OVElOVcVVTkRFRidEIEZVTkNUSU/O\nIEVSUk9SBwAgSU4gAA1CUkVBSwcAuujo6Oi9AQHJgdAhpYbQCr0CAYWFvQMBhYbd\nAwHQB6WF3QIB8AeKGGkSqtDYYCDj04VthG44pZblm4VeqKWX5Zyq6JjwI6WWOOVe\nhZawA8aXOKWU5V6FlLAIxpWQBLGWkZSI0PmxlpGUxpfGlcrQ8mAKaTawNYVeuuRe\nkC5gxHCQKNAExW+QIkiiCZhItZPKEPoghOSi92iVnegw+mioaMRwkAbQBcVvsAFg\nok0k2BADTOnyIPvaIFrbvWDSSCBc2+hoEPUgg9apUKDTIDrbpHbI8AMgGe0g+9qi\n3SAu1Ya4hLlG2CCxAKrw7KL/hnaQBiBZ1UwF2KavhmmmsIZqIAzaIFnVhA8gGtaQ\nRKABsZuFX6VphV6lnIVhpZuI8ZsYZWmFaYVgpWpp/4Vq5ZyqOKWb5WmosAPoxmEY\nZV6QA8ZfGLFekWDI0PnmX+ZhytDyrQAC8Dilc6R0hW+EcKVphZZlD4WUpGqEl5AB\nyISVIJPTpVCkUY3+AYz/AaVtpG6FaYRqpA+5+wGIkZvQ+CBl1qVnpGiFXoRfGKAB\nsV7QC6Vpha+laoWwTDzUoATIsV7Q+8iYZV6qoACRXqVfaQDIkV6GXoVfkNKigIYz\nIGr94O+QAqLvqQCdAAKK8Au9/wEpf53/AcrQ9akAov+gAWAgDP0pf2CmuMqgBIQT\nJNYQCGhoIGXWTNLX6CCM9yQTcATJIPD0hQ7JIvB0cE3JP9AEqbrQRckwkATJPJA9\nhK2p0IWdqc+FnqAAhA+IhrjKyNAC5p7oIIz3ySDw+DjxnfDuyYDQQQUPycXQDSCH\n98lO8DTJT/AwqcWkrejImfsBufsB8Dk46TrwBMlJ0AKFEzjpeNCGhQ4gjPfw38UO\n8NvImfsB6NDwprjmD7GdyNAC5p4KkPaxndCdIJr3ELuZ/QHGuan/hbhgpWemaKAB\nhZuGnLGb8B/IyKVR0ZuQGPADiNAJpVCI0ZuQDPAKiLGbqoixm7DXGGDQ/akAhdao\nkWfIkWelZ2kChWmFr6VoaQCFaoWwIJfWqQDQKqVzpHSFb4RwpWmkaoVrhGyFbYRu\nIEnYolWGUmioaKL4mkiYSKkAhXqFFGAYpWdp/4W4pWhp/4W5YJAK8AjJyfAEySzQ\n5SAM2iAa1iC3APAQycnwBMks0IQgsQAgDNrQymhopVAFUdAGqf+FUIVRoAGxm/BE\nIFjYIPvayLGbqsixm8VR0ATkUPACsC2EhSCq96kgpIUpfyBc2yC09+qQByD72qkF\nhSTIsZvQHaixm6rIsZuGm4Wc0LapDSBc20zS18jQAuaesZ1gEMw46X+qhIWg0ISd\noM+EnqD/yvAHICzXEPsw9qkgIFzbICzXMAUgXNvQ9iBc26kg0JipgIUUIEbaIGXT\n0AWKaQ+qmmhoqQkg1tMgo9kYmGW4SKW5aQBIpXZIpXVIqcEgwN4gat0gZ92logl/\nJZ6FnqmvoNeFXoRfTCDeqROg6SD56iC3AMnH0AYgsQAgZ90ggusgFd6lhkilhUip\ngUi6hvggWNiluKS5pnbo8ASFeYR6oACxuNBXoAKxuBjwNMixuIV1yLG4hXaYZbiF\nuJAC5rkk8hAUpnbo8A+pIyBc26Z1pXYgJO0gV9sgsQAgKNhM0tfwYvAt6YCQEclA\nsBQKqLkB0Ei5ANBITLEATEbayTrwv0zJ3jilZ+kBpGiwAYiFfYR+YK0AwMmD8AFg\nIFPVov8k2BADTOnyyQOwARjQPKW4pLmmdujwDIV5hHqldaR2hXeEeGhoqV2g05AD\nTDHUTDzU0Bei0qR60ANMEtSleYW4hLmld6R4hXWEdmA4pa/lZ4VQpbDlaIVRIPDY\nIM3+IAHZTM3+IPDYIP3+GKVnZVCFaaVoZVGFaqVShdYgAdkg/f4k1hADTGXWTPLU\nqVCgAIU8hD2pUoU+hD+E1mClZ6RohTyEPaVppGqFPoQ/YAjGdijQA0xl1iBs1kw1\n2akDINbTpblIpbhIpXZIpXVIqbBIILcAID7ZTNLXIAzaIKbZpXbFUbALmDhluKa5\nkAfosASlZ6ZoIB7WkB6lm+kBhbilnOkAhblg0P2p/4WFIGXTmsmw8AuiFiyiWkwS\n1EzJ3mhowELwO4V1aIV2aIW4aIW5IKPZmBhluIW4kALmuWCiOiyiAIYNoACEDqUO\npg2FDYYOsbjw6MUO8OTIySLQ8/DpaGhoYCB73SC3AMmr8AWpxCDA3qWd0AUgptnw\ntyC3ALADTD7ZTCjYIPjmSMmw8ATJq9CJxqHQBGhMKtggsQAgDNrJLPDuaGCiAIZQ\nhlGw9+kvhQ2lUYVeyRmw1KVQCiZeCiZeZVCFUKVeZVGFUQZQJlGlUGUNhVCQAuZR\nILEATBLaIOPfhYWEhqnQIMDepRJIpRFIIHvdaCogbd3QGGgQEiBy6yAM4aAApaCR\nhciloZGFYEwn62igArGgxXCQF9AHiLGgxW+QDqShxGqQCNANpaDFabAHpaCkoUy3\n2qAAsaAg1eOljKSNhauErCDU5amdoACFjISNIDXmoACxjJGFyLGMkYXIsYyRhWAg\nPdsgtwDwJPApycDwPMnDGPA3ySwY8BzJO/BEIHvdJBEw3SA07SDn40zP2qkNIFzb\nSf9gILT3MAnJGJAFIPva0B5pECnwqjiwDAgg9ebJKdBiKJAHyiDD95AFqujK0AYg\nsQBM19ogV9vQ8iDn4yAA5qqgAOjK8LuxXiBc28jJDdDzIADbTETbqSAsqT8JgMmg\nkAIF8yDt/Sl/SKXxIKj8aGClFfASMASg/9AEpXukfIV1hHZMyd5oJNgQBaL+TOny\nqe+g3CA626V5pHqFuIS5YCAG46IBoAKpAI0BAqlAIOvbYMki0A4ggd6pOyDA3iA9\n20zH2yBa2yAG46ksjf8BICzVrQACyQPQEExj2CBa20ws1aZ9pH6pmCypAIUVhn+E\ngCDj34WFhIaluKS5hYeEiKZ/pICGuIS5ILcA0B4kFVAOIAz9KX+NAAKi/6AB0Agw\nfyBa2yDc24a4hLkgsQAkERAxJBVQCeiGuKkAhQ3wDIUNySLwB6k6hQ2pLBiFDqW4\npLlpAJAByCDt4yA95yB72kxy3EitAALwMGggSuylEiBj2iC3APAHySzwA0xx26W4\npLmFf4SApYekiIW4hLkgtwDwMyC+3kzx26UV0MxMhtsgo9nIqtASoirIsbjwX8ix\nuIV7yLG4yIV8sbiqIJjZ4IPQ3Uwr3KV/pICmFRADTFPYoACxf/AHqd+g3Ew622A/\nRVhUUkEgSUdOT1JFRA0AP1JFRU5URVINANAEoADwAyDj34WFhIYgZdPwBKIA8Gma\n6Ojo6Iro6Ojo6OiGYKABIPnqur0JAYWipYWkhiC+5yAn66ABILTrujj9CQHwF70P\nAYV1vRABhXa9EgGFuL0RAYW5TNLXimkRqpogtwDJLNDxILEAIP/cIHvdGCQ4JBEw\nA7ADYLD9oqNMEtSmuNACxrnGuKIAJEiKSKkBINbTIGDeqQCFiSC3ADjpz5AXyQOw\nE8kBKkkBRYnFiZBhhYkgsQBMmN2midAssHtpB5B3ZRHQA0yX5Wn/hV4KZV6oaNmy\n0LBnIGrdSCD93WikhxAXqvBW0F9GEYoqprjQAsa5xrigG4WJ0NfZstCwSJDZubTQ\nSLmz0EggEN6liUyG3UzJ3qWivrLQqGiFXuZeaIVfmEggcuuloUiloEiln0ilnkil\nnUhsXgCg/2jwI8lk8AMgat2Eh2hKhRZohaVohaZohadohahohalohapFooWrpZ1g\nqQCFESCxALADTErsIH3gsGTJLvD0ycnwVcnI8OfJItAPpbikuWkAkAHIIOfjTD3n\nycbQEKAY0DilndADoAEsoABMAePJwtADTFTjydKQA0wM3yC73iB73akpLKkoLKks\noADRuNADTLEAohBMEtSgFWhoTNfdIOPfhaCEoaYR8AWiAIasYKYSEA2gALGgqsix\noKiKTPLiTPnqILEAIOzxiqTwIHH4qCAB40y43snX8OkKSKogsQDgz5AgILveIHvd\nIL7eIGzdaKqloUiloEiKSCD45mioikhMP98gst5oqLncz4WRud3PhZIgkABMat2l\npQWd0AulpfAEpZ3QA6AALKABTAHjIG3dsBOlqgl/JaaFpqmloAAgsuuqTLDfqQCF\nEcaJIADmhZ2GnoSfpaikqSAE5oaohKmqOOWd8AipAZAEpp2p/4WioP/oyMrQB6ai\nMA8YkAyxqNGe8O+i/7ACogHoiiolFvACqQFMk+sg++YgHvtMAeMgvt6qIOjfILcA\n0PRgogAgtwCGEIWBILcAIH3gsANMyd6iAIYRhhJMB+BMKPFMPNTEILEAkAUgfeCQ\nC6ogsQCQ+yB94LD2ySTQBqn/hRHQEMkl0BOlFDDGqYCFEgWBhYGKCYCqILEAhoI4\nBRTpKNADTB7hJBQwAnD3qQCFFKVppmqgAIachZvkbNAExWvwIqWB0ZvQCKWCyNGb\n8GyIGKWbaQeQ4ejQ3MlBkAXpWzjppWBoSMnX0A+6vQIByd7QB6maoOBgAACla6Rs\nhZuEnKVtpG6FloSXGGkHkAHIhZSElSCT06WUpJXIhWuEbKAApYGRm8ilgpGbqQDI\nkZvIkZvIkZvIkZvIkZulmxhpAqSckAHIhYOEhGClDwppBWWbpJyQAciFlISVYJCA\nAAAgsQAgZ92lojANpZ3JkJAJqf6g4CCy69B+TPLrpRTQR6UQBRJIpRFIoACYSKWC\nSKWBSCAC4WiFgWiFgmiour0CAUi9AQFIpaCdAgGloZ0BAcggtwDJLPDShA8guN5o\nhRFohRIpf4UQpmulbIabhZzFbtAE5G3wP6AAsZvIxYHQBqWC0ZvwFsixmxhlm6rI\nsZtlnJDXomssojVMEtSieKUQ0PelFPACOGAg7eClD6AE0ZvQ4UxL4qUU8AWiKkwS\n1CDt4CDj06kAqIWuogWlgZGbEAHKyKWCkZsQAsrKhq2lD8jIyJGbogupACQQUAho\nGGkBqmhpAMiRm8iKkZsgreKGrYWupF7GD9DcZZWwXYWVqIpllJADyPBSIOPThW2E\nbqkA5q6krfAFiJGU0PvGlcau0PXmlTilbeWboAKRm6VuyOWckZulENBiyLGbhQ+p\nAIWtha7IaKqFoGiFodGbkA7QBsiK0ZuQB0yW4UwQ1MilrgWtGPAKIK3iimWgqpik\nXmWhhq3GD9DKha6iBaWBEAHKpYIQAsrKhmSpACC24opllIWDmGWVhYSopYNghF6x\nm4VkiLGbhWWpEIWZogCgAIoKqpgqqLCkBq0mrpALGIplZKqYZWWosJPGmdDjYKUR\n8AMgAOYghOQ4pW/lbailcOVuogCGEYWehJ+ikEyb66QkqQA48OymdujQoaKVLKLg\nTBLUIEHjIAbjILveqYCFFCDj3yBq3SC43qnQIMDeSKWESKWDSKW5SKW4SCCV2Uyv\n46nCIMDeCYCFFCDq34WKhItMat0gQeOli0ilikggst4gat1ohYpohYugArGKhYOq\nyLGK8JmFhMixg0iIEPqkhCAr66W5SKW4SLGKhbjIsYqFuaWESKWDSCBn3WiFimiF\niyC3APADTMneaIW4aIW5oABokYpoyJGKaMiRimjIkYpoyJGKYCBq3aAAIDbtaGip\n/6AA8BKmoKShhoyEjSBS5IaehJ+FnWCiIoYNhg6Fq4SshZ6En6D/yLGr8AzFDfAE\nxQ7Q88ki8AEYhJ2YZauFraaskAHohq6lrPAEyQLQC5gg1eOmq6SsIOLlplLgXtAF\nor9MEtSlnZUApZ6VAaWflQKgAIaghKGIhBGGU+jo6IZSYEYTSEn/OGVvpHCwAYjE\nbpAR0ATFbZALhW+EcIVxhHKqaGCiTaUTMLgghOSpgIUTaNDQpnOldIZvhXCgAISL\npW2mboWbhpypVaIAhV6GX8VS8AUgI+Xw96kHhY+laaZqhV6GX+Rs0ATFa/AFIBnl\n8POFlIaVqQOFj6WUppXkbtAHxW3QA0xi5YVehl+gALFeqsixXgjIsV5llIWUyLFe\nZZWFlSgQ04ow0MixXqAACmkFZV6FXpAC5l+mX+SV0ATFlPC6ICPl8POxXjA1yLFe\nEDDIsV7wK8ixXqrIsV7FcJAG0B7kb7AaxZyQFtAE5JuQEIabhZylXqZfhYqGi6WP\nhZGljxhlXoVekALmX6ZfoABgpovw96WRKQRKqIWRsYplm4WWpZxpAIWXpW+mcIWU\nhpUgmtOkkcillJGKquaVpZXIkYpMiOSloUiloEggYN4gbN1ohatohaygALGrGHGg\nkAWisEwS1CDV4yDU5aWMpI0gBOYg5uWlq6SsIATmICrkTJXdoACxq0jIsauqyLGr\nqGiGXoRfqPAKSIixXpFxmND4aBhlcYVxkALmcmAgbN2loKShhV6EXyA15gigALFe\nSMixXqrIsV6oaCjQE8Rw0A/kb9ALSBhlb4VvkALmcGiGXoRfYMRU0AzFU9AIhVLp\nA4VToABgIPvmikipASDd42igAJGeaGhMKuQguebRjJiQBLGMqphIikgg3eOljKSN\nIATmaKhoGGVehV6QAuZfmCDm5Uwq5CC55hjxjEn/TGDmqf+FoSC3AMkp8AYgvt4g\n+OYguebKikgYogDxjLC4Sf/FoZCzpaGwryC43mioaIWRaGhoqmiFjGiFjaWRSJhI\noACK8B1gINzmTAHjIP3logCGEahgINzm8AigALFeqEwB40yZ4SCxACBn3SAI4aag\n0PCmoUy3ACDc5tADTE7oprikuYathK6mXoa4GGVehWCmX4a5kAHohmGgALFgSKkA\nkWAgtwAgSuxooACRYKatpK6GuIS5YCBn3SBS5yC+3kz45qWdyZGwmiDy66WgpKGE\nUIVRYKVQSKVRSCBS56AAsVCoaIVRaIVQTAHjIEbniqAAkVBgIEbnhoWiACC3APAD\nIEznhoagALFQRYYlhfD4YKlkoO5Mvucg4+mlokn/haJFqoWrpZ1Mwecg8OiQPCDj\n6dADTFPrpqyGkqKlpaWo8M445Z3wJJAShJ2kqoSiSf9pAKAAhJKindAEoACErMn5\nMMeopaxWASAH6SSrEFegneCl8AKgpThJ/2WShay5BAD1BIWhuQMA9QOFoLkCAPUC\nhZ+5AQD1AYWesAMgnuigAJgYpp7QSqafhp6moIafpqGGoKashqGErGkIySDQ5KkA\nhZ2FomBlkoWspaFlqYWhpaBlqIWgpZ9lp4WfpZ5lpoWeTI3oaQEGrCahJqAmnyae\nEPI45Z2wx0n/aQGFnZAO5p3wQmaeZp9moGahZqxgpaJJ/4WipZ5J/4WepZ9J/4Wf\npaBJ/4WgpaFJ/4WhpaxJ/4Ws5qzQDuah0ArmoNAG5p/QAuaeYKJFTBLUomG0BISs\ntAOUBLQClAO0AZQCpKSUAWkIMOjw5ukIqKWssBQWAZAC9gF2AXYBdgJ2A3YEasjQ\n7BhggQAAAAADf15Wy3mAE5sLZIB2OJMWgjiqOyCANQTzNIE1BPM0gIAAAACAMXIX\n+CCC6/ACEANMmeGlnel/SKmAhZ2pLaDpIL7nqTKg6SBm6qkToOkgp+epGKDpIFzv\nqTeg6SC+52gg1eypPKDpIOPp0ANM4ukgDuqpAIVihWOFZIVlpawgsOmloSCw6aWg\nILDppZ8gsOmlniC16Uzm6tADTNroSgmAqJAZGKVlZamFZaVkZaiFZKVjZaeFY6Vi\nZaaFYmZiZmNmZGZlZqyYStDWYIVehF+gBLFehamIsV6FqIixXoWniLFehapFooWr\npaoJgIWmiLFehaWlnWClpfAfGGWdkAQwHRgsEBRpgIWd0ANMUuilq4WiYKWiSf8w\nBWhoTE7oTNXoIGPrqvAQGGkCsPKiAIarIM7n5p3w52CEIAAAACBj66lQoOqiAIar\nIPnqTGnqIOPp8HYgcuupADjlnYWdIA7q5p3wuqL8qQGkpsSe0BCkp8Sf0AqkqMSg\n0ASkqcShCCqQCeiVZfAyEDSpASiwDgapJqgmpyamsOYwzhDiqKWp5aGFqaWo5aCF\nqKWn5Z+Fp6Wm5Z6FpphMpuqpQNDOCgoKCgoKhawoTObqooVMEtSlYoWepWOFn6Vk\nhaClZYWhTC7ohV6EX6AEsV6FoYixXoWgiLFehZ+IsV6FogmAhZ6IsV6FnYSsYKKY\nLKKToADwBKaFpIYgcuuGXoRfoASloZFeiKWgkV6IpZ+RXoilogl/JZ6RXoilnZFe\nhKxgpaqFoqIFtaSVnMrQ+YasYCBy66IGtZyVpMrQ+YasYKWd8PsGrJD3IMbo0PJM\nj+ilnfAJpaIqqf+wAqkBYCCC64WeqQCFn6KIpZ5J/yqpAIWhhaCGnYWshaJMKehG\nomCFYIRhoACxYMiq8MSxYEWiMMLkndAhsWAJgMWe0BnIsWDFn9ASyLFgxaDQC8ip\nf8WssWDlofAopaKQAkn/TIjrpZ3wSjjpoCSiEAmqqf+FpCCk6Iqincn5EAYg8OiE\npGCopaIpgEaeBZ6FniAH6YSkYKWdyaCwICDy64SspaKEokmAKqmghZ2loYUNTCno\nhZ6Fn4WghaGoYKAAogqUmcoQ+5APyS3QBIaj8ATJK9AFILEAkFvJLvAuyUXQMCCx\nAJAXycnwDskt8ArJyPAIySvwBNAHZpwgsQCQXCScEA6pADjlmkyg7GabJJtQw6Wa\nOOWZhZrwEhAJIFXq5prQ+fAHIDnqxprQ+aWjMAFgTNDuSCSbEALmmSA56mg46TAg\n1exMYexIIGPraCCT66WqRaKFq6adTMHnpZrJCpAJqWQknDARTNXoCgoYZZoKGKAA\ncbg46TCFmkyH7Js+vB/9nm5rJ/2ebmsoAKlYoNMgMe2ldqZ1hZ6Gn6KQOCCg6yA0\n7Uw626ABqS2IJKIQBMiZ/wCFooStyKkwpp3QA0xX7qkA4IDwArAJqRSg7SB/6an3\nhZmpD6DtILLr8B4QEqkKoO0gsuvwAhAOIDnqxpnQ7iBV6uaZ0NwgoOcg8uuiAaWZ\nGGkKMAnJC7AGaf+qqQI46QKFmoaZivACEBOkrakuyJn/AIrwBqkwyJn/AIStoACi\ngKWhGHls7oWhpaB5a+6FoKWfeWruhZ+lnnlp7oWe6LAEEN4wAjDaipAESf9pCmkv\nyMjIyISDpK3Iqil/mf8AxpnQBqkuyJn/AIStpIOKSf8pgKrAJNCqpK25/wCIyTDw\n+Mku8AHIqSummvAuEAipADjlmqqpLZkBAalFmQABiqIvOOjpCrD7aTqZAwGKmQIB\nqQCZBAHwCJn/AKkAmQABqQCgAWCAAAAAAPoKHwAAmJaA//C9wAABhqD//9jwAAAD\n6P///5wAAAAK/////yBj66lkoO4g+erwcKWl0ANMUOiiiqAAICvrpaoQDyAj7KmK\noAAgsuvQA5ikDSBV65hIIEHpqYqgACB/6SAJ72hKkAqlnfAGpaJJ/4WiYIE4qjsp\nB3E0WD5WdBZ+sxt3L+7jhXodhBwqfGNZWAp+df3nxoAxchgQgQAAAACp26DuIH/p\npaxpUJADIHrrhZIgZuulncmIkAMgK+ogI+ylDRhpgfDzOOkBSKIFtaW0nZWdlKXK\nEPWlkoWsIKrnINDuqeCg7iBy76kAhatoIBDqYIWthK4gIeupkyB/6SB276mToABM\nf+mFrYSuIB7rsa2Fo6StyJjQAuauha2kriB/6aWtpK4YaQWQAciFrYSuIL7nqZig\nAMaj0ORgmDVEemgosUYgguuqMBipyaAAIPnqivDnqaag7yB/6amqoO8gvuemoaWe\nhaGGnqkAhaKlnYWsqYCFnSAu6KLJoABMK+upZqDwIL7nIGPrqWug8KaqIF7qIGPr\nICPsqQCFqyCq56lwoPAgp+elokgQDSCg56WiMAmlFkn/hRYg0O6pcKDwIL7naBAD\nINDuqXWg8Exc7yAh66kAhRYg8e+iiqAAIOfvqZOgACD56qkAhaKlFiBi8KmKoABM\nZupITCPwgUkP2qKDSQ/aon8AAAAABYTmGi0bhigH+/iHmWiJAYcjNd/hhqVd5yiD\nSQ/aoqbTwcjUyNXEzsqlokgQAyDQ7qWdSMmBkAepE6DpIGbqqc6g8CBc72jJgZAH\nqWag8CCn52gQA0zQ7mALdrODvdN5HvSm9XuD/LAQfAwfZ8p83lPLwX0UZHBMfbfq\nUXp9YzCIfn6SRJk6fkzMkcd/qqqqE4EAAAAA5rjQAua5rWDqyTqwCskg8O846TA4\n6dBggE/HUlii/4Z2ovuaqSig8YUBhAKFBIQFIHPyqUyFAIUDhZCFCqmZoOGFC4QM\nohy9CvGVsIbxytD2hvKKhaSFVEipA4WPIPvaqQGN/QGN/AGiVYZSqQCgCIVQhFGg\nAOZRsVBJ/5FQ0VDQCEn/kVDRUPDspFClUSnwhHOFdIRvhXCiAKAIhmeEaKAAhNaY\nkWfmZ9AC5milZ6RoIOPTIEvWqTqg24UEhAWpPKDUhQGEAmwBACBn3SBS52xQACD4\n5opMi/4g+OaKTJX+IPjm4DCwE4bwqSwgwN4g+ObgMLAFhiyGLWBMmeEg7PHk8LAI\npfCFLIUthvCpxSDA3iD45uAwsOJgIOzxiqTwwCiw10wA+CAJ8oqkLMAosMqk8EwZ\n+CAJ8oqowCiwvKXwTCj4IPjmikxk+CD45sqKyRiwp0xb+yD45opJ/6rohvFgOJAY\nZvJgqf/QAqk/ogCFMobzYKl/okDQ9SBn3SBS56VQxW2lUeVusANMENSlUIVzhW+l\nUYV0hXBgIGfdIFLnpVDFc6VR5XSw4KVQxWmlUeVqkNalUIVppVGFakxs1qmrIMDe\npbiF9KW5hfU4ZtildYX2pXaF9yCm2UyY2YbepviG36V1hdqldoXbpXmF3KV6hd2l\n9IW4pfWFuaX2hXWl94V2ILcAID7ZTNLXpdqFdaXbhXal3IW4pd2FuabfmkzS10zJ\n3rD7pq+GaaawhmogDNogGtalm4VgpZyFYaksIMDeIAza5lDQAuZRIBrWpZvFYKWc\n5WGwAWCgALGbkWDmm9AC5pzmYNAC5mGlacWbpWrlnLDmpmGkYNAByoiGaoRpTPLU\nrVbArVPATED7rVTATDn7INn3oAOxm6qIsZvpAbAByoVQhlEgzf4gd/dMzf4g2fcg\n/f6gArGbxVDIsZvlUbADTBDUIHf3TP3+LFXALFLAqUDQCKkgLFTALFPAheatV8Ct\nUMCpAIUcpeaFG6AAhBqlHJEaIH70yND25hulGykf0O5gheKG4IThSCnAhSZKSgUm\nhSZohScKCgomJwomJwpmJqUnKR8F5oUnisAA8AWgI2kEyOkHsPuE5aq9ufSFMJhK\npeSFHLAoYCAR9KUcUSYlMFEmkSZgECOlMEqwBUnAhTBgiBACoCepwIUwhOWlHArJ\nwBAGpRxJf4UcYKUwCkmAMN2pgcjAKJDgoACw3Bil0SkE8CWpfyUwMSbQGebqqX8l\nMBARGKXRKQTwDrEmRRwlMNAC5upRJpEmpdFl0ykDyQJqsJIwMBilJyy59dAiBiaw\nGizN9PAFaR84sBJpI0ilJmmwsAJp8IUmaLACaR9mJmn8hSdgGKUnaQQsufXQ8wYm\nkBhp4BgsCPXwEqUmaVBJ8PACSfCFJqXmkAJp4GYmkNFIqQCF4IXhheJoSDjl4EiK\n5eGF07AKaEn/aQFIqQDl04XRhdVohdCF1GiF4IbhmBjl4pAESf9p/oXShOJm0zjl\n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\ng39dzLX8Fxf1A/sDYvr6ww==`\n","import { toHex, MODE } from \"./utility\"\nimport { memGet, memSet } from \"./memory\"\n// var startTime = performance.now()\n\nexport let s6502: STATE6502 = {\n  PStatus: 0,\n  PC: 0,\n  Accum: 0,\n  XReg: 0,\n  YReg: 0,\n  StackPtr: 0\n}\n\nexport const setX = (value: number) => {\n  s6502.XReg = value\n}\n\nexport const setY = (value: number) => {\n  s6502.YReg = value\n}\n\nexport let cycleCount = 0\n\nexport const setCycleCount = (cycles: number) => { cycleCount = cycles }\n\nexport const set6502State = (new6502: any) => {\n  s6502 = new6502\n}\n\nexport const reset6502 = () => {\n  s6502.Accum = 0\n  s6502.XReg = 0\n  s6502.YReg = 0\n  s6502.PStatus = 0b00100100\n  s6502.StackPtr = 0xFF\n  setPC(memGet(0xFFFD) * 256 + memGet(0xFFFC))\n}\n\nexport const incrementPC = (value: number) => {\n  setPC((s6502.PC + value + 65536) % 65536)\n}\n\nexport const setPC = (value: number) => {\n  console.assert(!isNaN(value), \"illegal PC\")\n  s6502.PC = value\n}\n\nconst setPStatus = (value: number) => {\n  s6502.PStatus = value | 0b00110000\n}\n\nexport const stack = new Array<string>(256).fill('')\n\nconst pushStack = (call: string, value: number) => {\n  stack[s6502.StackPtr] = call\n  memSet(0x100 + s6502.StackPtr, value)\n  s6502.StackPtr = (s6502.StackPtr + 255) % 256\n}\n\nconst popStack = () => {\n  s6502.StackPtr = (s6502.StackPtr + 1) % 256;\n  const value = memGet(0x100 + s6502.StackPtr);\n  if (isNaN(value)) {\n    throw new Error(\"illegal stack value\");\n  }\n  return value\n}\n\nexport const isCarry = () => { return ((s6502.PStatus & 0x01) !== 0); }\nexport const setCarry = (set = true) => s6502.PStatus = set ? s6502.PStatus | 1 :\n  s6502.PStatus & 0b11111110\n\nconst isZero = () => { return ((s6502.PStatus & 0x02) !== 0); }\nconst setZero = (set = true) => s6502.PStatus = set ? s6502.PStatus | 2 :\n  s6502.PStatus & 0b11111101\n\n// const isInterrupt = () => { return ((PStatus & 0x04) !== 0); }\nexport const setInterrupt = (set = true) => s6502.PStatus = set ? s6502.PStatus | 4 :\n  s6502.PStatus & 0b11111011\n\nconst isDecimal = () => { return ((s6502.PStatus & 0x08) !== 0); }\nconst BCD = () => (isDecimal() ? 1 : 0)\nconst setDecimal = (set = true) => s6502.PStatus = set ? s6502.PStatus | 8 :\n  s6502.PStatus & 0b11110111\n\nexport const isBreak = () => { return ((s6502.PStatus & 0x10) !== 0); }\nconst setBreak = (set = true) => s6502.PStatus = set ? s6502.PStatus | 0x10 :\n  s6502.PStatus & 0b11101111\n\nconst isOverflow = () => { return ((s6502.PStatus & 0x40) !== 0); }\nconst setOverflow = (set = true) => s6502.PStatus = set ? s6502.PStatus | 0x40 :\n  s6502.PStatus & 0b10111111\n\nconst isNegative = () => { return ((s6502.PStatus & 0x80) !== 0); }\nconst setNegative = (set = true) => s6502.PStatus = set ? s6502.PStatus | 0x80 :\n  s6502.PStatus & 0b01111111\n\nconst checkStatus = (value: number) => {\n  setZero(value === 0);\n  setNegative(value >= 128);\n}\n\n// Return number of clock cycles taken\nexport const doBranch = (takeBranch: boolean, offset: number) => {\n  if (takeBranch) {\n    const oldPC = s6502.PC\n    incrementPC((offset > 127) ? (offset - 256) : offset)\n    return 3 + pageBoundary(oldPC, s6502.PC)\n  }\n  return 2\n}\n\nconst oneByteAdd = (value: number, offset: number) => (value + offset + 256) % 256\nconst address = (vLo: number, vHi: number) => (vHi*256 + vLo)\nconst twoByteAdd = (vLo: number, vHi: number, offset: number) => (vHi*256 + vLo + offset + 65536) % 65536\nconst pageBoundary = (addr1: number, addr2: number) => (((addr1 >> 8) !== (addr2 >> 8)) ? 1 : 0)\n\nexport const pcodes = new Array<PCodeInstr>(256)\n\nconst PCODE = (name: string, mode: MODE, pcode: number, PC: number, code: PCodeFunc) => {\n  console.assert(!pcodes[pcode], \"Duplicate instruction: \" + name + \" mode=\" + mode)\n  pcodes[pcode] = {name: name, pcode: pcode, mode: mode, PC: PC, execute: code}\n}\n\nconst doIndirectYinstruction = (vZP: number,\n  doInstruction: (addr: number) => void,\n  addBCD: boolean) => {\n  const vLo = memGet(vZP)\n  const vHi = memGet((vZP + 1) % 256)\n  const addr = twoByteAdd(vLo, vHi, s6502.YReg)\n  doInstruction(addr)\n  let cycles = 5 + pageBoundary(addr, address(vLo, vHi))\n  if (addBCD) cycles += BCD()\n  return cycles\n}\n\nconst doIndirectInstruction = (vZP: number,\n  doInstruction: (addr: number) => void,\n  addBCD: boolean) => {\n  const vLo = memGet(vZP)\n  const vHi = memGet((vZP + 1) % 256)\n  const addr = address(vLo, vHi)\n  doInstruction(addr)\n  let cycles = 5\n  if (addBCD) cycles += BCD()\n  return cycles\n}\n\n// 300: F8 18 B8 A9 BD 69 00 D8 00\nconst doADC_BCD = (value: number) => {\n  let ones = (s6502.Accum & 0x0F) + (value & 0x0F) + (isCarry() ? 1 : 0)\n  // Handle illegal BCD hex values by wrapping to \"tens\" digit\n  if (ones >= 0xA) {\n    ones += 6\n  }\n  let tmp = (s6502.Accum & 0xF0) + (value & 0xF0) + ones\n  // Pretend we're doing normal addition to set overflow flag\n  const bothPositive = (s6502.Accum <= 127 && value <= 127)\n  const bothNegative = (s6502.Accum >= 128 && value >= 128)\n  setOverflow((tmp & 0xFF) >= 128 ? bothPositive : bothNegative)\n  // Handle illegal BCD hex values by wrapping to \"hundreds\" digit\n  setCarry(tmp >= 0xA0)\n  if (isCarry()) {\n    tmp += 0x60\n  }\n  s6502.Accum = tmp & 0xFF\n  // Assume we're a 65c02 and set the zero flag properly.\n  // This doesn't happen on a 6502 for BCD mode.\n  checkStatus(s6502.Accum)\n}\n\nconst doADC_HEX = (value: number) => {\n  let tmp = s6502.Accum + value + (isCarry() ? 1 : 0)\n  setCarry(tmp >= 256)\n  tmp = tmp % 256\n  const bothPositive = (s6502.Accum <= 127 && value <= 127)\n  const bothNegative = (s6502.Accum >= 128 && value >= 128)\n  setOverflow(tmp >= 128 ? bothPositive : bothNegative)\n  s6502.Accum = tmp\n  checkStatus(s6502.Accum)\n}\n\nconst doADC = (addr: number) => {\n  if (isDecimal()) {\n    doADC_BCD(memGet(addr))\n  } else {\n    doADC_HEX(memGet(addr))\n  }\n}\n\nPCODE('ADC', MODE.IMM, 0x69, 2, (value) => {\n  if (BCD()) {doADC_BCD(value)} else {doADC_HEX(value)}; return 2 + BCD()})\nPCODE('ADC', MODE.ZP_REL, 0x65, 2, (vZP) => {doADC(vZP); return 3 + BCD()})\nPCODE('ADC', MODE.ZP_X, 0x75, 2, (vZP) =>\n  {doADC(oneByteAdd(vZP, s6502.XReg)); return 4 + BCD()})\nPCODE('ADC', MODE.ABS, 0x6D, 3, (vLo, vHi) =>\n  {doADC(address(vLo, vHi)); return 4 + BCD()})\nPCODE('ADC', MODE.ABS_X, 0x7D, 3, (vLo, vHi) =>\n  {const addr = twoByteAdd(vLo, vHi, s6502.XReg);\n  doADC(addr); return 4 + BCD() + pageBoundary(addr, address(vLo, vHi))})\nPCODE('ADC', MODE.ABS_Y, 0x79, 3, (vLo, vHi) =>\n  {const addr = twoByteAdd(vLo, vHi, s6502.YReg);\n  doADC(addr); return 4 + BCD() + pageBoundary(addr, address(vLo, vHi))})\nPCODE('ADC', MODE.IND_X, 0x61, 2, (vOffset) =>\n  {const vZP = oneByteAdd(vOffset, s6502.XReg);\n  doADC(address(memGet(vZP), memGet(vZP + 1))); return 6 + BCD()})\nPCODE('ADC', MODE.IND_Y, 0x71, 2, (vZP) => doIndirectYinstruction(vZP, doADC, true))\nPCODE('ADC', MODE.IND, 0x72, 2, (vZP) => doIndirectInstruction(vZP, doADC, true))\n\nconst doAND = (addr: number) => {\n  s6502.Accum &= memGet(addr)\n  checkStatus(s6502.Accum)}\nPCODE('AND', MODE.IMM, 0x29, 2, (value) => {s6502.Accum &= value; checkStatus(s6502.Accum); return 2})\nPCODE('AND', MODE.ZP_REL, 0x25, 2, (vZP) => {doAND(vZP); return 3})\nPCODE('AND', MODE.ZP_X, 0x35, 2, (vZP) => {doAND(oneByteAdd(vZP, s6502.XReg)); return 4})\nPCODE('AND', MODE.ABS, 0x2D, 3, (vLo, vHi) => {doAND(address(vLo, vHi)); return 4})\nPCODE('AND', MODE.ABS_X, 0x3D, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.XReg);\n  doAND(addr); return 4 + pageBoundary(addr, address(vLo, vHi))})\nPCODE('AND', MODE.ABS_Y, 0x39, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.YReg);\n  doAND(addr); return 4 + pageBoundary(addr, address(vLo, vHi))})\nPCODE('AND', MODE.IND_X, 0x21, 2, (vOffset) => {const vZP = oneByteAdd(vOffset, s6502.XReg);\n  doAND(address(memGet(vZP), memGet(vZP + 1))); return 6})\nPCODE('AND', MODE.IND_Y, 0x31, 2, (vZP) => doIndirectYinstruction(vZP, doAND, false))\nPCODE('AND', MODE.IND, 0x32, 2, (vZP) => doIndirectInstruction(vZP, doAND, false))\n\nconst doASL = (addr: number) => {\n  let v = memGet(addr)\n  memGet(addr)  // extra strobe of the address (Sather IIe p. 4-27)\n  setCarry((v & 128) === 128)\n  v = (v << 1) % 256\n  memSet(addr, v)\n  checkStatus(v)}\nPCODE('ASL', MODE.IMPLIED, 0x0A, 1, () => {setCarry((s6502.Accum & 128) === 128);\n  s6502.Accum = (s6502.Accum << 1) % 256; checkStatus(s6502.Accum); return 2})\nPCODE('ASL', MODE.ZP_REL, 0x06, 2, (vZP) => {doASL(vZP); return 5})\nPCODE('ASL', MODE.ZP_X, 0x16, 2, (vZP) => {doASL(oneByteAdd(vZP, s6502.XReg)); return 6})\nPCODE('ASL', MODE.ABS, 0x0E, 3, (vLo, vHi) => {doASL(address(vLo, vHi)); return 6})\nPCODE('ASL', MODE.ABS_X, 0x1E, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.XReg);\n  doASL(addr);\n  return 6 + pageBoundary(addr, address(vLo, vHi))})\n\nPCODE('BCC', MODE.ZP_REL, 0x90, 2, (value) => doBranch(!isCarry(), value))\nPCODE('BCS', MODE.ZP_REL, 0xB0, 2, (value) => doBranch(isCarry(), value))\nPCODE('BEQ', MODE.ZP_REL, 0xF0, 2, (value) => doBranch(isZero(), value))\nPCODE('BMI', MODE.ZP_REL, 0x30, 2, (value) => doBranch(isNegative(), value))\nPCODE('BNE', MODE.ZP_REL, 0xD0, 2, (value) => doBranch(!isZero(), value))\nPCODE('BPL', MODE.ZP_REL, 0x10, 2, (value) => doBranch(!isNegative(), value))\nPCODE('BVC', MODE.ZP_REL, 0x50, 2, (value) => doBranch(!isOverflow(), value))\nPCODE('BVS', MODE.ZP_REL, 0x70, 2, (value) => doBranch(isOverflow(), value))\nPCODE('BRA', MODE.ZP_REL, 0x80, 2, (value) => doBranch(true, value))\n\nconst doBit = (value: number) => {\n  setZero((s6502.Accum & value) === 0);\n  setNegative((value & 0b10000000) !== 0);\n  setOverflow((value & 0b01000000) !== 0);\n}\nPCODE('BIT', MODE.ZP_REL, 0x24, 2, (vZP) => {doBit(memGet(vZP)); return 3})\nPCODE('BIT', MODE.ABS, 0x2C, 3, (vLo, vHi) => {doBit(memGet(address(vLo, vHi))); return 4})\nPCODE('BIT', MODE.IMM, 0x89, 2, (value) => {doBit(value); return 2})\nPCODE('BIT', MODE.ZP_X, 0x34, 2, (vZP) => {doBit(memGet(oneByteAdd(vZP, s6502.XReg))); return 4})\nPCODE('BIT', MODE.ABS_X, 0x3C, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.XReg);\n  doBit(memGet(addr)); return 4 + pageBoundary(addr, address(vLo, vHi))})\n\nPCODE('BRK', MODE.IMPLIED, 0x00, 1, () => {\n  setBreak();\n  memSet(0xC00A, 0)\n  memSet(0xC006, 0)\n  const PC2 = (s6502.PC + 2) % 65536\n  const vLo = memGet(0xFFFE)\n  const vHi = memGet(0xFFFF)\n  pushStack(\"BRK $\" + toHex(vHi) + toHex(vLo), Math.trunc(PC2 / 256))\n  pushStack(\"BRK\", PC2 % 256)\n  pushStack(\"S\", s6502.PStatus)\n  setDecimal(false)  // 65c02 only\n  setInterrupt()\n  setPC(twoByteAdd(vLo, vHi, -1));\n  return 7})\n\nPCODE('CLC', MODE.IMPLIED, 0x18, 1, () => {setCarry(false); return 2})\nPCODE('CLD', MODE.IMPLIED, 0xD8, 1, () => {setDecimal(false); return 2})\nPCODE('CLI', MODE.IMPLIED, 0x58, 1, () => {setInterrupt(false); return 2})\nPCODE('CLV', MODE.IMPLIED, 0xB8, 1, () => {setOverflow(false); return 2})\n\nconst doCMP = (addr: number) => {\n  const value = memGet(addr)\n  setCarry(s6502.Accum >= value)\n  checkStatus((s6502.Accum - value + 256) % 256)\n}\nconst doCMP1 = (addr: number) => {\n  const value = memGet(addr)\n  setCarry(s6502.Accum >= value)\n  checkStatus((s6502.Accum - value + 256) % 256)\n}\nPCODE('CMP', MODE.IMM, 0xC9, 2, (value) => {setCarry(s6502.Accum >= value);\n  checkStatus((s6502.Accum - value + 256) % 256); return 2})\nPCODE('CMP', MODE.ZP_REL, 0xC5, 2, (vZP) => {doCMP(vZP); return 3})\nPCODE('CMP', MODE.ZP_X, 0xD5, 2, (vZP) => {doCMP(oneByteAdd(vZP, s6502.XReg)); return 4})\nPCODE('CMP', MODE.ABS, 0xCD, 3, (vLo, vHi) => {doCMP(address(vLo, vHi)); return 4})\nPCODE('CMP', MODE.ABS_X, 0xDD, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.XReg);\n  doCMP1(addr); return 4 + pageBoundary(addr, address(vLo, vHi))})\nPCODE('CMP', MODE.ABS_Y, 0xD9, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.YReg);\n  doCMP(addr); return 4 + pageBoundary(addr, address(vLo, vHi))})\nPCODE('CMP', MODE.IND_X, 0xC1, 2, (vOffset) => {const vZP = oneByteAdd(vOffset, s6502.XReg);\n  doCMP(address(memGet(vZP), memGet(vZP + 1))); return 6})\nPCODE('CMP', MODE.IND_Y, 0xD1, 2, (vZP) => doIndirectYinstruction(vZP, doCMP, false))\nPCODE('CMP', MODE.IND, 0xD2, 2, (vZP) => doIndirectInstruction(vZP, doCMP, false))\n\nconst doCPX = (addr: number) => {\n  const value = memGet(addr)\n  setCarry(s6502.XReg >= value)\n  checkStatus((s6502.XReg - value + 256) % 256)\n}\nPCODE('CPX', MODE.IMM, 0xE0, 2, (value) => {setCarry(s6502.XReg >= value);\n  checkStatus((s6502.XReg - value + 256) % 256); return 2})\nPCODE('CPX', MODE.ZP_REL, 0xE4, 2, (vZP) => {doCPX(vZP); return 3})\nPCODE('CPX', MODE.ABS, 0xEC, 3, (vLo, vHi) => {doCPX(address(vLo, vHi)); return 4})\n\nconst doCPY = (addr: number) => {\n  const value = memGet(addr)\n  setCarry(s6502.YReg >= value)\n  checkStatus((s6502.YReg - value + 256) % 256)\n}\nPCODE('CPY', MODE.IMM, 0xC0, 2, (value) => {setCarry(s6502.YReg >= value);\n  checkStatus((s6502.YReg - value + 256) % 256); return 2})\nPCODE('CPY', MODE.ZP_REL, 0xC4, 2, (vZP) => {doCPY(vZP); return 3})\nPCODE('CPY', MODE.ABS, 0xCC, 3, (vLo, vHi) => {doCPY(address(vLo, vHi)); return 4})\n\nconst doDEC = (addr: number) => {\n  const v = oneByteAdd(memGet(addr), -1)\n  memSet(addr, v)\n  checkStatus(v)\n}\nPCODE('DEC', MODE.IMPLIED, 0x3A, 1, () => {s6502.Accum = oneByteAdd(s6502.Accum, -1);\n  checkStatus(s6502.Accum); return 2})\nPCODE('DEC', MODE.ZP_REL, 0xC6, 2, (vZP) => {doDEC(vZP); return 5})\nPCODE('DEC', MODE.ZP_X, 0xD6, 2, (vZP) => {doDEC(oneByteAdd(vZP, s6502.XReg)); return 6})\nPCODE('DEC', MODE.ABS, 0xCE, 3, (vLo, vHi) => {doDEC(address(vLo, vHi)); return 6})\nPCODE('DEC', MODE.ABS_X, 0xDE, 3, (vLo, vHi) => {\n  const addr = twoByteAdd(vLo, vHi, s6502.XReg)\n  memGet(addr)  // extra strobe of the address (Sather IIe p. 4-27)\n  doDEC(addr)\n  return 7})\n\nPCODE('DEX', MODE.IMPLIED, 0xCA, 1, () => {s6502.XReg = oneByteAdd(s6502.XReg, -1);\n  checkStatus(s6502.XReg); return 2})\nPCODE('DEY', MODE.IMPLIED, 0x88, 1, () => {s6502.YReg = oneByteAdd(s6502.YReg, -1);\n  checkStatus(s6502.YReg); return 2})\n\nconst doEOR = (addr: number) => {\n  s6502.Accum ^= memGet(addr)\n  checkStatus(s6502.Accum)\n}\nPCODE('EOR', MODE.IMM, 0x49, 2, (value) => {s6502.Accum ^= value; checkStatus(s6502.Accum); return 2})\nPCODE('EOR', MODE.ZP_REL, 0x45, 2, (vZP) => {doEOR(vZP); return 3})\nPCODE('EOR', MODE.ZP_X, 0x55, 2, (vZP) => {doEOR(oneByteAdd(vZP, s6502.XReg)); return 4})\nPCODE('EOR', MODE.ABS, 0x4D, 3, (vLo, vHi) => {doEOR(address(vLo, vHi)); return 4})\nPCODE('EOR', MODE.ABS_X, 0x5D, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.XReg);\n  doEOR(addr); return 4 + pageBoundary(addr, address(vLo, vHi))})\nPCODE('EOR', MODE.ABS_Y, 0x59, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.YReg);\n  doEOR(addr); return 4 + pageBoundary(addr, address(vLo, vHi))})\nPCODE('EOR', MODE.IND_X, 0x41, 2, (vOffset) => {const vZP = oneByteAdd(vOffset, s6502.XReg);\n  doEOR(address(memGet(vZP), memGet(vZP + 1))); return 6})\nPCODE('EOR', MODE.IND_Y, 0x51, 2, (vZP) => doIndirectYinstruction(vZP, doEOR, false))\nPCODE('EOR', MODE.IND, 0x52, 2, (vZP) => doIndirectInstruction(vZP, doEOR, false))\n\nconst doINC = (addr: number) => {\n  const v = oneByteAdd(memGet(addr), 1)\n  memSet(addr, v)\n  checkStatus(v)\n}\nPCODE('INC', MODE.IMPLIED, 0x1A, 1, () => {s6502.Accum = oneByteAdd(s6502.Accum, 1);\n  checkStatus(s6502.Accum); return 2})\nPCODE('INC', MODE.ZP_REL, 0xE6, 2, (vZP) => {doINC(vZP); return 5})\nPCODE('INC', MODE.ZP_X, 0xF6, 2, (vZP) => {doINC(oneByteAdd(vZP, s6502.XReg)); return 6})\nPCODE('INC', MODE.ABS, 0xEE, 3, (vLo, vHi) => {doINC(address(vLo, vHi)); return 6})\nPCODE('INC', MODE.ABS_X, 0xFE, 3, (vLo, vHi) => {\n  const addr = twoByteAdd(vLo, vHi, s6502.XReg)\n  memGet(addr)  // extra strobe of the address (Sather IIe p. 4-27)\n  doINC(addr)\n  return 7})\n\nPCODE('INX', MODE.IMPLIED, 0xE8, 1, () => {s6502.XReg = oneByteAdd(s6502.XReg, 1);\n  checkStatus(s6502.XReg); return 2})\nPCODE('INY', MODE.IMPLIED, 0xC8, 1, () => {s6502.YReg = oneByteAdd(s6502.YReg, 1);\n  checkStatus(s6502.YReg); return 2})\n\nPCODE('JMP', MODE.ABS, 0x4C, 3, (vLo, vHi) => {setPC(twoByteAdd(vLo, vHi, -3)); return 3})\n// 65c02 - this fixes the 6502 indirect JMP bug across page boundaries\nPCODE('JMP', MODE.IND, 0x6C, 3, (vLo, vHi) => {const a = address(vLo, vHi);\n  vLo = memGet(a); vHi = memGet((a + 1) % 65536); setPC(twoByteAdd(vLo, vHi, -3)); return 6})\nPCODE('JMP', MODE.IND_X, 0x7C, 3, (vLo, vHi) => {const a = twoByteAdd(vLo, vHi, s6502.XReg);\n  vLo = memGet(a); vHi = memGet((a + 1) % 65536); setPC(twoByteAdd(vLo, vHi, -3)); return 6})\n\nPCODE('JSR', MODE.ABS, 0x20, 3, (vLo, vHi) => {\n  // Push the (address - 1) of the next instruction\n  const PC2 = (s6502.PC + 2) % 65536\n  pushStack(\"JSR $\" + toHex(vHi) + toHex(vLo), Math.trunc(PC2 / 256));\n  pushStack(\"JSR\", PC2 % 256);\n  setPC(twoByteAdd(vLo, vHi, -3)); return 6})\n\nconst doLDA = (addr: number) => {\n  s6502.Accum = memGet(addr)\n  checkStatus(s6502.Accum)\n}\nPCODE('LDA', MODE.IMM, 0xA9, 2, (value) => {s6502.Accum = value; checkStatus(s6502.Accum); return 2})\nPCODE('LDA', MODE.ZP_REL, 0xA5, 2, (vZP) => {doLDA(vZP); return 3})\nPCODE('LDA', MODE.ZP_X, 0xB5, 2, (vZP) => {doLDA(oneByteAdd(vZP, s6502.XReg)); return 4})\nPCODE('LDA', MODE.ABS, 0xAD, 3, (vLo, vHi) => {doLDA(address(vLo, vHi)); return 4})\nPCODE('LDA', MODE.ABS_X, 0xBD, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.XReg);\n  doLDA(addr); return 4 + pageBoundary(addr, address(vLo, vHi))})\nPCODE('LDA', MODE.ABS_Y, 0xB9, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.YReg);\n  doLDA(addr); return 4 + pageBoundary(addr, address(vLo, vHi))})\nPCODE('LDA', MODE.IND_X, 0xA1, 2, (vOffset) => {const vZP = oneByteAdd(vOffset, s6502.XReg);\n  doLDA(address(memGet(vZP), memGet((vZP + 1) % 256))); return 6})\nPCODE('LDA', MODE.IND_Y, 0xB1, 2, (vZP) => doIndirectYinstruction(vZP, doLDA, false))\nPCODE('LDA', MODE.IND, 0xB2, 2, (vZP) => doIndirectInstruction(vZP, doLDA, false))\n\nconst doLDX = (addr: number) => {\n  s6502.XReg = memGet(addr)\n  checkStatus(s6502.XReg)\n}\nPCODE('LDX', MODE.IMM, 0xA2, 2, (value) => {s6502.XReg = value; checkStatus(s6502.XReg); return 2})\nPCODE('LDX', MODE.ZP_REL, 0xA6, 2, (vZP) => {doLDX(vZP); return 3})\nPCODE('LDX', MODE.ZP_Y, 0xB6, 2, (vZP) => {doLDX(oneByteAdd(vZP, s6502.YReg)); return 4})\nPCODE('LDX', MODE.ABS, 0xAE, 3, (vLo, vHi) => {doLDX(address(vLo, vHi)); return 4})\nPCODE('LDX', MODE.ABS_Y, 0xBE, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.YReg);\n  doLDX(addr); return 4 + pageBoundary(addr, address(vLo, vHi))})\n\nconst doLDY = (addr: number) => {\n  s6502.YReg = memGet(addr)\n  checkStatus(s6502.YReg)\n}\nPCODE('LDY', MODE.IMM, 0xA0, 2, (value) => {s6502.YReg = value; checkStatus(s6502.YReg); return 2})\nPCODE('LDY', MODE.ZP_REL, 0xA4, 2, (vZP) => {doLDY(vZP); return 3})\nPCODE('LDY', MODE.ZP_X, 0xB4, 2, (vZP) => {doLDY(oneByteAdd(vZP, s6502.XReg)); return 4})\nPCODE('LDY', MODE.ABS, 0xAC, 3, (vLo, vHi) => {doLDY(address(vLo, vHi)); return 4})\nPCODE('LDY', MODE.ABS_X, 0xBC, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.XReg);\n  doLDY(addr); return 4 + pageBoundary(addr, address(vLo, vHi))})\n\nconst doLSR = (addr: number) => {\n  let v = memGet(addr)\n  memGet(addr)  // extra strobe of the address (Sather IIe p. 4-27)\n  setCarry((v & 1) === 1)\n  v >>= 1\n  memSet(addr, v)\n  checkStatus(v)}\nPCODE('LSR', MODE.IMPLIED, 0x4A, 1, () => {setCarry((s6502.Accum & 1) === 1);\n  s6502.Accum >>= 1; checkStatus(s6502.Accum); return 2})\nPCODE('LSR', MODE.ZP_REL, 0x46, 2, (vZP) => {doLSR(vZP); return 5})\nPCODE('LSR', MODE.ZP_X, 0x56, 2, (vZP) => {doLSR(oneByteAdd(vZP, s6502.XReg)); return 6})\nPCODE('LSR', MODE.ABS, 0x4E, 3, (vLo, vHi) => {doLSR(address(vLo, vHi)); return 6})\nPCODE('LSR', MODE.ABS_X, 0x5E, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.XReg);\n  doLSR(addr);\n  return 6 + pageBoundary(addr, address(vLo, vHi))})\n\nPCODE('NOP', MODE.IMPLIED, 0xEA, 1, () => {return 2})\n\nconst doORA = (addr: number) => {\n  s6502.Accum |= memGet(addr)\n  checkStatus(s6502.Accum)\n}\nPCODE('ORA', MODE.IMM, 0x09, 2, (value) => {s6502.Accum |= value; checkStatus(s6502.Accum); return 2})\nPCODE('ORA', MODE.ZP_REL, 0x05, 2, (vZP) => {doORA(vZP); return 3})\nPCODE('ORA', MODE.ZP_X, 0x15, 2, (vZP) => {doORA(oneByteAdd(vZP, s6502.XReg)); return 4})\nPCODE('ORA', MODE.ABS, 0x0D, 3, (vLo, vHi) => {doORA(address(vLo, vHi)); return 4})\nPCODE('ORA', MODE.ABS_X, 0x1D, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.XReg);\n  doORA(addr); return 4 + pageBoundary(addr, address(vLo, vHi))})\nPCODE('ORA', MODE.ABS_Y, 0x19, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.YReg);\n  doORA(addr); return 4 + pageBoundary(addr, address(vLo, vHi))})\nPCODE('ORA', MODE.IND_X, 0x01, 2, (vOffset) => {const vZP = oneByteAdd(vOffset, s6502.XReg);\n  doORA(address(memGet(vZP), memGet(vZP + 1))); return 6})\nPCODE('ORA', MODE.IND_Y, 0x11, 2, (vZP) => doIndirectYinstruction(vZP, doORA, false))\nPCODE('ORA', MODE.IND, 0x12, 2, (vZP) => doIndirectInstruction(vZP, doORA, false))\n\nPCODE('PHA', MODE.IMPLIED, 0x48, 1, () => {pushStack(\"A\", s6502.Accum); return 3})\nPCODE('PHP', MODE.IMPLIED, 0x08, 1, () => {setBreak(); pushStack(\"S\", s6502.PStatus); return 3})\nPCODE('PHX', MODE.IMPLIED, 0xDA, 1, () => {pushStack(\"X\", s6502.XReg); return 3})\nPCODE('PHY', MODE.IMPLIED, 0x5A, 1, () => {pushStack(\"Y\", s6502.YReg); return 3})\nPCODE('PLA', MODE.IMPLIED, 0x68, 1, () => {s6502.Accum = popStack(); checkStatus(s6502.Accum); return 4})\nPCODE('PLP', MODE.IMPLIED, 0x28, 1, () => {setPStatus(popStack()); return 4})\nPCODE('PLX', MODE.IMPLIED, 0xFA, 1, () => {s6502.XReg = popStack(); checkStatus(s6502.XReg); return 4})\nPCODE('PLY', MODE.IMPLIED, 0x7A, 1, () => {s6502.YReg = popStack(); checkStatus(s6502.YReg); return 4})\n\nconst doROL = (addr: number) => {\n  let v = memGet(addr)\n  memGet(addr)  // extra strobe of the address (Sather IIe p. 4-27)\n  const bit0 = isCarry() ? 1 : 0;\n  setCarry((v & 128) === 128)\n  v = ((v << 1) % 256) | bit0\n  memSet(addr, v)\n  checkStatus(v)}\nPCODE('ROL', MODE.IMPLIED, 0x2A, 1, () => {const bit0 = isCarry() ? 1 : 0;\n  setCarry((s6502.Accum & 128) === 128);\n  s6502.Accum = ((s6502.Accum << 1) % 256) | bit0; checkStatus(s6502.Accum); return 2})\nPCODE('ROL', MODE.ZP_REL, 0x26, 2, (vZP) => {doROL(vZP); return 5})\nPCODE('ROL', MODE.ZP_X, 0x36, 2, (vZP) => {doROL(oneByteAdd(vZP, s6502.XReg)); return 6})\nPCODE('ROL', MODE.ABS, 0x2E, 3, (vLo, vHi) => {doROL(address(vLo, vHi)); return 6})\nPCODE('ROL', MODE.ABS_X, 0x3E, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.XReg);\n  doROL(addr);\n  return 6 + pageBoundary(addr, address(vLo, vHi))})\n\nconst doROR = (addr: number) => {\n  let v = memGet(addr)\n  memGet(addr)  // extra strobe of the address (Sather IIe p. 4-27)\n  const bit7 = isCarry() ? 128 : 0;\n  setCarry((v & 1) === 1)\n  v = (v >> 1) | bit7\n  memSet(addr, v)\n  checkStatus(v)}\nPCODE('ROR', MODE.IMPLIED, 0x6A, 1, () => {const bit7 = isCarry() ? 128 : 0;\n  setCarry((s6502.Accum & 1) === 1);\n  s6502.Accum = (s6502.Accum >> 1) | bit7; checkStatus(s6502.Accum); return 2})\nPCODE('ROR', MODE.ZP_REL, 0x66, 2, (vZP) => {doROR(vZP); return 5})\nPCODE('ROR', MODE.ZP_X, 0x76, 2, (vZP) => {doROR(oneByteAdd(vZP, s6502.XReg)); return 6})\nPCODE('ROR', MODE.ABS, 0x6E, 3, (vLo, vHi) => {doROR(address(vLo, vHi)); return 6})\nPCODE('ROR', MODE.ABS_X, 0x7E, 3, (vLo, vHi) => {const addr = twoByteAdd(vLo, vHi, s6502.XReg);\n  doROR(addr);\n  return 6 + pageBoundary(addr, address(vLo, vHi))})\n\nPCODE('RTI', MODE.IMPLIED, 0x40, 1, () => {\n  setPStatus(popStack());\n  setPC(address(popStack(), popStack()) - 1); return 6})\n\nPCODE('RTS', MODE.IMPLIED, 0x60, 1, () => {setPC(address(popStack(), popStack())); return 6})\n\n// 300: F8 38 B8 A9 00 E9 00 D8 00\nconst doSBC_BCD = (value: number) => {\n  // On 65c02, do normal hex subtraction to set the carry & overflow flags.\n  const vtmp = 255 - value\n  let tmp = s6502.Accum + vtmp + (isCarry() ? 1 : 0)\n  const newCarry = (tmp >= 256)\n  const bothPositive = (s6502.Accum <= 127 && vtmp <= 127)\n  const bothNegative = (s6502.Accum >= 128 && vtmp >= 128)\n  setOverflow((tmp % 256) >= 128 ? bothPositive : bothNegative)\n\n  let ones = (s6502.Accum & 0x0F) - (value & 0x0F) + (isCarry() ? 0 : -1)\n  tmp = s6502.Accum - value + (isCarry() ? 0 : -1)\n  if (tmp < 0) {\n    tmp -= 0x60\n  }\n  if (ones < 0) {\n    tmp -= 0x06\n  }\n  s6502.Accum = tmp & 0xFF\n  // Assume we're a 65c02 and set the zero flag properly.\n  // This doesn't happen on a 6502 for BCD mode.\n  checkStatus(s6502.Accum)\n  setCarry(newCarry)\n}\n\nconst doSBC = (addr: number) => {\n  if (BCD()) {\n    doSBC_BCD(memGet(addr))\n  } else {\n    doADC_HEX(255 - memGet(addr))\n  }\n}\n\nPCODE('SBC', MODE.IMM, 0xE9, 2, (value) => {\n  if (BCD()) {doSBC_BCD(value)} else {doADC_HEX(255 - value)}\n  return 2 + BCD()})\nPCODE('SBC', MODE.ZP_REL, 0xE5, 2, (vZP) =>\n  {doSBC(vZP); return 3 + BCD()})\nPCODE('SBC', MODE.ZP_X, 0xF5, 2, (vZP) =>\n  {doSBC(oneByteAdd(vZP, s6502.XReg)); return 4 + BCD()})\nPCODE('SBC', MODE.ABS, 0xED, 3, (vLo, vHi) =>\n  {doSBC(address(vLo, vHi)); return 4 + BCD()})\nPCODE('SBC', MODE.ABS_X, 0xFD, 3, (vLo, vHi) =>\n  {const addr = twoByteAdd(vLo, vHi, s6502.XReg);\n  doSBC(addr); return 4 + BCD() + pageBoundary(addr, address(vLo, vHi))})\nPCODE('SBC', MODE.ABS_Y, 0xF9, 3, (vLo, vHi) =>\n  {const addr = twoByteAdd(vLo, vHi, s6502.YReg);\n  doSBC(addr); return 4 + BCD() + pageBoundary(addr, address(vLo, vHi))})\nPCODE('SBC', MODE.IND_X, 0xE1, 2, (vOffset) =>\n  {const vZP = oneByteAdd(vOffset, s6502.XReg);\n  doSBC(address(memGet(vZP), memGet(vZP + 1))); return 6 + BCD()})\nPCODE('SBC', MODE.IND_Y, 0xF1, 2, (vZP) =>\n  doIndirectYinstruction(vZP, doSBC, true))\nPCODE('SBC', MODE.IND, 0xF2, 2, (vZP) =>\n  doIndirectInstruction(vZP, doSBC, true))\n\nPCODE('SEC', MODE.IMPLIED, 0x38, 1, () => {setCarry(); return 2})\nPCODE('SED', MODE.IMPLIED, 0xF8, 1, () => {setDecimal(); return 2})\nPCODE('SEI', MODE.IMPLIED, 0x78, 1, () => {setInterrupt(); return 2})\n\n// Zero Page     STA $44       $85  2   3\n// Zero Page,X   STA $44,X     $95  2   4\n// Absolute      STA $4400     $8D  3   4\n// Absolute,X    STA $4400,X   $9D  3   5\n// Absolute,Y    STA $4400,Y   $99  3   5\n// Indirect,X    STA ($44,X)   $81  2   6\n// Indirect,Y    STA ($44),Y   $91  2   6\nPCODE('STA', MODE.ZP_REL, 0x85, 2, (vZP) => {memSet(vZP, s6502.Accum); return 3})\nPCODE('STA', MODE.ZP_X, 0x95, 2, (vZP) => {memSet(oneByteAdd(vZP, s6502.XReg), s6502.Accum); return 4})\nPCODE('STA', MODE.ABS, 0x8D, 3, (vLo, vHi) => {memSet(address(vLo, vHi), s6502.Accum); return 4})\nPCODE('STA', MODE.ABS_X, 0x9D, 3, (vLo, vHi) => {\n  const addr = twoByteAdd(vLo, vHi, s6502.XReg)\n  memGet(addr)  // extra strobe of the address (Sather IIe p. 4-27)\n  memSet(addr, s6502.Accum)\n  return 5})\nPCODE('STA', MODE.ABS_Y, 0x99, 3, (vLo, vHi) => {memSet(twoByteAdd(vLo, vHi, s6502.YReg), s6502.Accum); return 5})\nPCODE('STA', MODE.IND_X, 0x81, 2, (vOffset) => {const vZP = oneByteAdd(vOffset, s6502.XReg);\n  memSet(address(memGet(vZP), memGet(vZP + 1)), s6502.Accum); return 6})\nconst doSTA = (addr: number) => {\n  memSet(addr, s6502.Accum)\n}\n// STA ($FF),Y take 6 cycles, doesn't depend upon page boundary\nPCODE('STA', MODE.IND_Y, 0x91, 2, (vZP) => {doIndirectYinstruction(vZP, doSTA, false); return 6})\nPCODE('STA', MODE.IND, 0x92, 2, (vZP) => doIndirectInstruction(vZP, doSTA, false))\n\nPCODE('STX', MODE.ZP_REL, 0x86, 2, (vZP) => {memSet(vZP, s6502.XReg); return 3})\nPCODE('STX', MODE.ZP_Y, 0x96, 2, (vZP) => {memSet(oneByteAdd(vZP, s6502.YReg), s6502.XReg); return 4})\nPCODE('STX', MODE.ABS, 0x8E, 3, (vLo, vHi) => {memSet(address(vLo, vHi), s6502.XReg); return 4})\n\nPCODE('STY', MODE.ZP_REL, 0x84, 2, (vZP) => {memSet(vZP, s6502.YReg); return 3})\nPCODE('STY', MODE.ZP_X, 0x94, 2, (vZP) => {memSet(oneByteAdd(vZP, s6502.XReg), s6502.YReg); return 4})\nPCODE('STY', MODE.ABS, 0x8C, 3, (vLo, vHi) => {memSet(address(vLo, vHi), s6502.YReg); return 4})\n\nPCODE('STZ', MODE.ZP_REL, 0x64, 2, (vZP) => {memSet(vZP, 0); return 3})\nPCODE('STZ', MODE.ZP_X, 0x74, 2, (vZP) => {memSet(oneByteAdd(vZP, s6502.XReg), 0); return 4})\nPCODE('STZ', MODE.ABS, 0x9C, 3, (vLo, vHi) => {memSet(address(vLo, vHi), 0); return 4})\nPCODE('STZ', MODE.ABS_X, 0x9E, 3, (vLo, vHi) => {\n  const addr = twoByteAdd(vLo, vHi, s6502.XReg)\n  memGet(addr)  // extra strobe of the address (Sather IIe p. 4-27)\n  memSet(addr, 0)\n  return 5})\n\nPCODE('TAX', MODE.IMPLIED, 0xAA, 1, () => {s6502.XReg = s6502.Accum; checkStatus(s6502.XReg); return 2})\nPCODE('TAY', MODE.IMPLIED, 0xA8, 1, () => {s6502.YReg = s6502.Accum; checkStatus(s6502.YReg); return 2})\nPCODE('TSX', MODE.IMPLIED, 0xBA, 1, () => {s6502.XReg = s6502.StackPtr; checkStatus(s6502.XReg); return 2})\nPCODE('TXA', MODE.IMPLIED, 0x8A, 1, () => {s6502.Accum = s6502.XReg; checkStatus(s6502.Accum); return 2})\nPCODE('TXS', MODE.IMPLIED, 0x9A, 1, () => {s6502.StackPtr = s6502.XReg; return 2})\nPCODE('TYA', MODE.IMPLIED, 0x98, 1, () => {s6502.Accum = s6502.YReg; checkStatus(s6502.Accum); return 2})\n\n// Undocumented 65c02 NOP's\n// http://www.6502.org/tutorials/65c02opcodes.html\n//       x2:     x3:     x4:     x7:     xB:     xC:     xF:\n//      -----   -----   -----   -----   -----   -----   -----\n// 0x:  2 2 .   1 1 .   . . .   1 1 a   1 1 .   . . .   1 1 c\n// 1x:  . . .   1 1 .   . . .   1 1 a   1 1 .   . . .   1 1 c\n// 2x:  2 2 .   1 1 .   . . .   1 1 a   1 1 .   . . .   1 1 c\n// 3x:  . . .   1 1 .   . . .   1 1 a   1 1 .   . . .   1 1 c\n// 4x:  2 2 .   1 1 .   2 3 g   1 1 a   1 1 .   . . .   1 1 c\n// 5x:  . . .   1 1 .   2 4 h   1 1 a   1 1 .   3 8 j   1 1 c\n// 6x:  2 2 .   1 1 .   . . .   1 1 a   1 1 .   . . .   1 1 c\n// 7x:  . . .   1 1 .   . . .   1 1 a   1 1 .   . . .   1 1 c\n// 8x:  2 2 .   1 1 .   . . .   1 1 b   1 1 .   . . .   1 1 d\n// 9x:  . . .   1 1 .   . . .   1 1 b   1 1 .   . . .   1 1 d\n// Ax:  . . .   1 1 .   . . .   1 1 b   1 1 .   . . .   1 1 d\n// Bx:  . . .   1 1 .   . . .   1 1 b   1 1 .   . . .   1 1 d\n// Cx:  2 2 .   1 1 .   . . .   1 1 b   1 1 e   . . .   1 1 d\n// Dx:  . . .   1 1 .   2 4 h   1 1 b   1 1 f   3 4 i   1 1 d\n// Ex:  2 2 .   1 1 .   . . .   1 1 b   1 1 .   . . .   1 1 d\n// Fx:  . . .   1 1 .   2 4 h   1 1 b   1 1 .   3 4 i   1 1 d\nconst twoByteNops = [0x02, 0x22, 0x42, 0x62, 0x82, 0xC2, 0xE2]\ntwoByteNops.forEach(instr => {\n  PCODE('NOPX', MODE.IMPLIED, instr, 2, () => {return 2})\n});\nfor (let i = 0; i <= 15; i++) {\n  PCODE('NOPX', MODE.IMPLIED, 3 + 16 * i, 1, () => {return 1})\n  PCODE('NOPX', MODE.IMPLIED, 7 + 16 * i, 1, () => {return 1})\n  PCODE('NOPX', MODE.IMPLIED, 0xB + 16 * i, 1, () => {return 1})  \n  PCODE('NOPX', MODE.IMPLIED, 0xF + 16 * i, 1, () => {return 1})  \n}\nPCODE('NOPX', MODE.IMPLIED, 0x44, 2, () => {return 3})\nPCODE('NOPX', MODE.IMPLIED, 0x54, 2, () => {return 4})\nPCODE('NOPX', MODE.IMPLIED, 0xD4, 2, () => {return 4})\nPCODE('NOPX', MODE.IMPLIED, 0xF4, 2, () => {return 4})\nPCODE('NOPX', MODE.IMPLIED, 0x5C, 3, () => {return 8})\nPCODE('NOPX', MODE.IMPLIED, 0xDC, 3, () => {return 4})\nPCODE('NOPX', MODE.IMPLIED, 0xFC, 3, () => {return 4})\n","\n// export const code = ''\nexport const code2 = `\n        ORG   $300\n; set up Mockingboard\n        LDA #$C0    ; enable Mockingboard\n        STA $C030\n        LDA #$80    ; select channel 0\n        STA $C010\n        LDA #$00    ; set frequency LSB to 0\n        STA $C012\n        LDA #$05    ; set frequency MSB to 5 (261 Hz)\n        STA $C013\n        LDA #$0F    ; set volume to maximum\n        STA $C015\n\n; play notes\n        LDA #$80    ; start sound\n        STA $C010\n        LDX #20     ; loop for 20 cycles (approx. 1 second)\nLOOP    DEX\n        BNE LOOP\n        LDA #$00    ; stop sound\n        STA $C010\n\n; end of program\n        RTS\n`\nexport const code = `\n         ORG   $300\nFREQ     EQU   $350\nPLSWIDTH EQU   $352\n\n         LDA   #$FF\n         STA   FREQ\n         LDA   #$80\n         STA   PLSWIDTH\nPLAY     LDA   $C030\n         LDY   PLSWIDTH\nPULSE    DEY\n         BNE   PULSE\n         LDA   $C030\n         LDX   FREQ\nCOUNTDN  DEX\n         BNE   COUNTDN\n         JSR   READKB\n         JMP   PLAY\n\nINCR     INC   FREQ\n         RTS\n\nDECR     DEC   FREQ\n         RTS\n\nPULSEINC DEC   PLSWIDTH\n         INC   FREQ\n         RTS\n\nPULSEDEC INC   PLSWIDTH\n         DEC   FREQ\n         RTS\n\nREADKB   LDA   $C000\n         STA   $C010   \n         CMP   #$88\n         BEQ   INCR\n         CMP   #$95\n         BEQ   DECR\n         CMP   #$C1\n         BEQ   PULSEINC\n         CMP   #$DA\n         BEQ   PULSEDEC\n         RTS\n`\n","export const disk2driver = [0xA2,0x20,0xA0,0x00,0xA2,0x03,0x86,0x3C,0x8A,0x0A,0x24,0x3C,0xF0,0x10,0x05,0x3C,0x49,0xFF,0x29,0x7E,0xB0,0x08,0x4A,0xD0,0xFB,0x98,0x9D,0x56,0x03,0xC8,0xE8,0x10,0xE5,0x20,0x58,0xFF,0xBA,0xBD,0x00,0x01,0x0A,0x0A,0x0A,0x0A,0x85,0x2B,0xAA,0xBD,0x8E,0xC0,0xBD,0x8C,0xC0,0xBD,0x8A,0xC0,0xBD,0x89,0xC0,0xA0,0x50,0xBD,0x80,0xC0,0x98,0x29,0x03,0x0A,0x05,0x2B,0xAA,0xBD,0x81,0xC0,0xA9,0x56,0x20,0xA8,0xFC,0x88,0x10,0xEB,0x85,0x26,0x85,0x3D,0x85,0x41,0xA9,0x08,0x85,0x27,0x18,0x08,0xBD,0x8C,0xC0,0x10,0xFB,0x49,0xD5,0xD0,0xF7,0xBD,0x8C,0xC0,0x10,0xFB,0xC9,0xAA,0xD0,0xF3,0xEA,0xBD,0x8C,0xC0,0x10,0xFB,0xC9,0x96,0xF0,0x09,0x28,0x90,0xDF,0x49,0xAD,0xF0,0x25,0xD0,0xD9,0xA0,0x03,0x85,0x40,0xBD,0x8C,0xC0,0x10,0xFB,0x2A,0x85,0x3C,0xBD,0x8C,0xC0,0x10,0xFB,0x25,0x3C,0x88,0xD0,0xEC,0x28,0xC5,0x3D,0xD0,0xBE,0xA5,0x40,0xC5,0x41,0xD0,0xB8,0xB0,0xB7,0xA0,0x56,0x84,0x3C,0xBC,0x8C,0xC0,0x10,0xFB,0x59,0xD6,0x02,0xA4,0x3C,0x88,0x99,0x00,0x03,0xD0,0xEE,0x84,0x3C,0xBC,0x8C,0xC0,0x10,0xFB,0x59,0xD6,0x02,0xA4,0x3C,0x91,0x26,0xC8,0xD0,0xEF,0xBC,0x8C,0xC0,0x10,0xFB,0x59,0xD6,0x02,0xD0,0x87,0xA0,0x00,0xA2,0x56,0xCA,0x30,0xFB,0xB1,0x26,0x5E,0x00,0x03,0x2A,0x5E,0x00,0x03,0x2A,0x91,0x26,0xC8,0xD0,0xEE,0xE6,0x27,0xE6,0x3D,0xA5,0x3D,0xCD,0x00,0x08,0xA6,0x2B,0x90,0xDB,0x4C,0x01,0x08,0x00,0x00,0x00,0x00,0x00]\n// export const slot_disk2=`oiCgAKIDhjyKCiQ88BAFPEn/KX6wCErQ+5idVgPI6BDlIFj/ur0AAQoKCgqFK6q9\n// jsC9jMC9isC9icCgUL2AwJgpAwoFK6q9gcCpViCo/IgQ64UmhT2FQakIhScYCL2M\n// wBD7SdXQ972MwBD7yarQ8+q9jMAQ+8mW8AkokN9JrfAl0NmgA4VAvYzAEPsqhTy9\n// jMAQ+yU8iNDsKMU90L6lQMVB0Liwt6BWhDy8jMAQ+1nWAqQ8iJkAA9DuhDy8jMAQ\n// +1nWAqQ8kSbI0O+8jMAQ+1nWAtCHoACiVsow+7EmXgADKl4AAyqRJsjQ7uYn5j2l\n// Pc0ACKYrkNtMAQgAAAAAAA==`\n","import { cycleCount, incrementPC, pcodes, s6502, setCycleCount } from \"./instructions\"\nimport { memGet, specialJumpTable } from \"./memory\"\nimport { doSetCPUState } from \"./motherboard\"\nimport { SWITCHES } from \"./softswitches\"\nimport { STATE, getInstrString, getProcessorStatus } from \"./utility\"\n\n// let prevMemory = Buffer.from(mainMem)\n// let DEBUG_ADDRESS = -1 // 0x9631\nlet doDebug = false\n// let doDebugZeroPage = false\nconst instrTrail = new Array<string>(1000)\nlet posTrail = 0\nlet breakpoint = -1\nlet runToRTS = false\n\nexport const doSetDebug = (debug = true) => {\n  doDebug = debug\n}\n\nexport const doSetRunToRTS = (run = true) => {\n  runToRTS = run\n}\n\nexport const doSetBreakpoint = (breakpt: number) => {\n  breakpoint = breakpt\n//  if (breakpoint !== 0) doDebug = true\n}\n\n// let memZP = new Uint8Array(256).fill(0)\n// const checkZeroPageDiff = () => {\n//   const mem = getDataBlock(0)\n//   const diff = new Uint8Array(256)\n//   let ndiff = 0\n//   for (let i=0; i < 256; i++) {\n//     diff[i] = mem[i] - memZP[i]\n//     memZP[i] = mem[i]\n//     if (diff[i]) ndiff++\n//   }\n//   const skip = [0x4E, 0xEB, 0xEC, 0xED, 0xF9, 0xFA, 0xFB, 0xFC]\n//   for (let i = 0; i < skip.length; i++) {\n//     if (diff[skip[i]]) {\n//       diff[skip[i]] = 0\n//       ndiff--\n//     }\n//   }\n//   let s = ''\n//   if (ndiff > 0 && ndiff < 127) {\n//     for (let i=0; i < 256; i++) {\n//       if (diff[i]) s += ` ${toHex(i)}:${toHex(diff[i])}`\n//     }\n//     console.log(s)\n//   }\n// }\n\nconst outputInstructionTrail = () => {\n  instrTrail.slice(posTrail).forEach(s => console.log(s));\n  instrTrail.slice(0, posTrail).forEach(s => console.log(s));\n}\n\nexport const processInstruction = (step = false) => {\n  let cycles = 0\n  let PC1 = s6502.PC\n  const instr = memGet(s6502.PC)\n  const vLo = s6502.PC < 0xFFFF ? memGet(s6502.PC + 1) : 0\n  const vHi = s6502.PC < 0xFFFE ? memGet(s6502.PC + 2) : 0\n  let code = pcodes[instr]\n  if (!code) {\n    code = pcodes[0xEA]\n  }\n  if (code) {\n    if (PC1 === breakpoint && !step) {\n      doSetCPUState(STATE.PAUSED)\n      return -1\n    }\n    // HACK\n    const fn = specialJumpTable.get(PC1)\n    if (fn && !SWITCHES.INTCXROM.isSet) {\n      fn()\n    }\n    // END HACK\n    if (false && PC1 === 0x5887) {\n      outputInstructionTrail()\n      doDebug = true\n    }\n    cycles = code.execute(vLo, vHi)\n    // Do not output during the Apple II's WAIT subroutine\n    if (doDebug && (PC1 < 0xFCA8 || PC1 > 0xFCB3) && PC1 < 0xFF47) {\n      const ins = getInstrString(code, vLo, vHi, PC1) + '            '\n      const out = `${ins.slice(0, 22)}  ${getProcessorStatus(s6502)}`\n      instrTrail[posTrail] = out\n      posTrail = (posTrail + 1) % instrTrail.length\n    }\n    setCycleCount(cycleCount + cycles)\n    incrementPC(code.PC)\n    if (code.pcode === 0x60 && runToRTS) {\n      runToRTS = false\n      doSetCPUState(STATE.PAUSED)\n      return -1\n    }\n  }\n  return cycles\n}\n","// Chris Torrence, 2022\nimport { Buffer } from \"buffer\"\nimport { passMachineState } from \"./worker2main\"\nimport { s6502, set6502State, reset6502, setCycleCount, stack } from \"./instructions\"\nimport { STATE, toHex } from \"./utility\"\nimport { getDriveSaveState, restoreDriveSaveState, doResetDrive, doPauseDrive } from \"./drivestate\"\n// import { slot_omni } from \"./roms/slot_omni_cx00\"\nimport { SWITCHES } from \"./softswitches\";\nimport { memory, memGet, getTextPage, getHires,  setSlotDriver, memoryReset, updateAddressTables } from \"./memory\"\nimport { setButtonState, handleGamepads } from \"./joystick\"\nimport { parseAssembly } from \"./assembler\";\nimport { code } from \"./assemblycode\"\nimport { disk2driver } from \"./roms/slot_disk2_cx00\"\nimport { handleGameSetup } from \"./game_mappings\"\nimport { doSetDebug, doSetRunToRTS, processInstruction } from \"./cpu6502\"\n\n// let timerID: any | number = 0\nlet startTime = 0\nlet prevTime = 0\nlet normalSpeed = true\nlet speed = 0\nlet refreshTime = 16.6881 // 17030 / 1020.488\nlet timeDelta = 0\nlet cpuState = STATE.IDLE\nlet iRefresh = 0\nlet saveTimeSlice = false\nlet iSaveState = 0\nlet iTempState = 0\nlet maxState = 60\nlet saveStates = Array<string>(maxState).fill('')\n\nconst getApple2State = (): SAVEAPPLE2STATE => {\n  const softSwitches: { [name: string]: boolean } = {}\n  for (const key in SWITCHES) {\n    softSwitches[key] = SWITCHES[key as keyof typeof SWITCHES].isSet\n  }\n  const membuffer = Buffer.from(memory)\n  // let memdiff: { [addr: number]: number } = {};\n  // for (let i = 0; i < memory.length; i++) {\n  //   if (prevMemory[i] !== memory[i]) {\n  //     memdiff[i] = memory[i]\n  //   }\n  // }\n  // prevMemory = memory\n  return {\n    s6502: s6502,\n    softSwitches: softSwitches,\n    memory: membuffer.toString(\"base64\"),\n    memAux: '',\n    memc000: '',\n  }\n}\n\nconst setApple2State = (newState: SAVEAPPLE2STATE) => {\n  set6502State(newState.s6502)\n  const softSwitches: { [name: string]: boolean } = newState.softSwitches\n  for (const key in softSwitches) {\n    const keyTyped = key as keyof typeof SWITCHES\n    try {\n      SWITCHES[keyTyped].isSet = softSwitches[key]    \n    } catch (error) {\n    }\n  }\n  memory.set(Buffer.from(newState.memory, \"base64\"))\n  updateAddressTables()\n  handleGameSetup(true)\n  // mainMem.set(Buffer.from(newState.memory, \"base64\"))\n  // memC000.set(Buffer.from(newState.memc000, \"base64\"))\n  // if (newState.memAux !== undefined) {\n  //   auxMem.set(Buffer.from(newState.memAux, \"base64\"))\n  // }\n}\n\n// export const doRequestSaveState = () => {\n//   passSaveState(doGetSaveState())\n// }\n\nexport const doGetSaveState = (full = false) => {\n  const state = { state6502: getApple2State(), driveState: getDriveSaveState(full) }\n  return JSON.stringify(state)\n//  return Buffer.from(compress(JSON.stringify(state)), 'ucs2').toString('base64')\n}\n\nexport const doRestoreSaveState = (sState: string) => {\n  const state = JSON.parse(sState);\n  setApple2State(state.state6502 as SAVEAPPLE2STATE)\n  restoreDriveSaveState(state.driveState)\n  updateExternalMachineState()\n}\n\n// const testTiming = () => {\n//   let t0 = performance.now()\n//   for (let j = 0; j < 10000; j++) {\n//     for (let i = 0; i < 0xBFFF; i++) {\n//       memGet(i)    \n//     }\n//   }\n//   let tdiff = performance.now() - t0\n//   console.log(`memGet time = ${tdiff}`)\n//   t0 = performance.now()\n//   for (let j = 0; j < 10000; j++) {\n//     for (let i = 0; i < 0xBFFF; i++) {\n//       memSet(i, 255)    \n//     }\n//   }\n//   tdiff = performance.now() - t0\n//   console.log(`memSet time = ${tdiff}`)\n// }\n\nconst doBoot = () => {\n  setCycleCount(0)\n  memoryReset()\n  setSlotDriver(6, Uint8Array.from(disk2driver))\n  if (code.length > 0) {\n    let pcode = parseAssembly(0x300, code.split(\"\\n\"));\n    memory.set(pcode, 0x300);\n  }\n//  testTiming()\n  doReset()\n}\n\nconst doReset = () => {\n//  memoryReset()\n  for (const key in SWITCHES) {\n    const keyTyped = key as keyof typeof SWITCHES\n    SWITCHES[keyTyped].isSet = false\n  }\n  SWITCHES.TEXT.isSet = true\n  // Reset banked RAM\n  memGet(0xC082)\n  reset6502()\n  doResetDrive()\n  setButtonState()\n}\n\nexport const doSetNormalSpeed = (normal: boolean) => {\n  normalSpeed = normal\n  refreshTime = normalSpeed ? 16.6881 : 0\n  resetRefreshCounter()\n}\n\nexport const doGoBackInTime = () => {\n  doSetCPUState(STATE.PAUSED)\n  // if this is the first time we're called, make sure our current\n  // state is up to date\n  if (iTempState === iSaveState) {\n    saveStates[iSaveState] = doGetSaveState()\n  }\n  const newTmp = (iTempState + maxState - 1) % maxState\n  if (newTmp === iSaveState || saveStates[newTmp] === '') {\n    return\n  }\n  iTempState = newTmp\n  doRestoreSaveState(saveStates[newTmp])\n}\n\nexport const doGoForwardInTime = () => {\n  doSetCPUState(STATE.PAUSED)\n  if (iTempState === iSaveState) {\n    return\n  }\n  const newTmp = (iTempState + 1) % maxState\n  if (saveStates[newTmp] === '') {\n    return\n  }\n  iTempState = newTmp\n  doRestoreSaveState(saveStates[newTmp])\n}\n\nexport const doSaveTimeSlice = () => {\n  // Set a flag and save our slice at the end of the next 6502 display cycle.\n  // Otherwise we risk saving in the middle of a keystroke.\n  saveTimeSlice = true\n}\n\nexport const doStepInto = () => {\n  doSetDebug()\n  if (cpuState === STATE.IDLE) {\n    doBoot()\n    cpuState = STATE.PAUSED\n  }\n  processInstruction(true)\n  cpuState = STATE.PAUSED\n  updateExternalMachineState()\n}\n\nexport const doStepOver = () => {\n  doSetDebug()\n  if (cpuState === STATE.IDLE) {\n    doBoot()\n    cpuState = STATE.PAUSED\n  }\n  if (memGet(s6502.PC) === 0x20) {\n    // If we're at a JSR then briefly step in, then step out.\n    processInstruction(true)\n    doStepOut()\n  } else {\n    // Otherwise just do a single step.\n    doStepInto()\n  }\n}\n\nexport const doStepOut = () => {\n  doSetDebug()\n  if (cpuState === STATE.IDLE) {\n    doBoot()\n    cpuState = STATE.PAUSED\n  }\n  doSetRunToRTS()\n  doSetCPUState(STATE.RUNNING)\n}\n\nconst resetRefreshCounter = () => {\n  iRefresh = 0\n  prevTime = performance.now()\n  startTime = prevTime\n}\n\nexport const doSetCPUState = (cpuStateIn: STATE) => {\n  cpuState = cpuStateIn\n  if (cpuState === STATE.PAUSED || cpuState === STATE.RUNNING) {\n    doPauseDrive(cpuState === STATE.RUNNING)\n  }\n  updateExternalMachineState()\n  resetRefreshCounter()\n  if (speed === 0) {\n    doAdvance6502Timer()\n  }\n}\n\nexport const getStackString = () => {\n  const stackvalues = memory.slice(256, 512)\n  const result = new Array<string>()\n  for (let i = 0xFF; i > s6502.StackPtr; i--) {\n    let value = \"$\" + toHex(stackvalues[i])\n    let cmd = stack[i]\n    if ((stack[i].length > 3) && (i - 1) > s6502.StackPtr) {\n      if (stack[i-1] === \"JSR\" || stack[i-1] === \"BRK\") {\n        i--\n        value += toHex(stackvalues[i])\n      } else {\n        cmd = ''\n      }\n    }\n    value = (value + \"   \").substring(0, 6)\n    result.push(toHex(0x100 + i, 4) + \": \" + value + cmd)\n  }\n  return result\n}\n\nconst getDebugString = () => {\n  return ''\n  // const status = Array<String>(16).fill(\"\")\n  // // const stackString = getStackString()\n  // // for (let i = 0; i < Math.min(20, stackString.length); i++) {\n  // //   status[i] = stackString[i]\n  // // }\n  // for (let j = 0; j < 16; j++) {\n  //   let s = toHex(16 * j) + \":\"\n  //   for (let i = 0; i < 16; i++) {\n  //     s += \" \" + toHex(mainMem[j * 16 + i])\n  //   }\n  //   status[j] = s\n  // }\n  // return status.join('\\n')\n}\n\nconst updateExternalMachineState = () => {\n  const state: MachineState = {\n    state: cpuState,\n    speed: speed.toFixed(2),\n    altChar: SWITCHES.ALTCHARSET.isSet,\n    textPage: getTextPage(),\n    lores: getTextPage(true),\n    hires: getHires(),\n    zeroPageStack: getDebugString(),\n    button0: SWITCHES.PB0.isSet,\n    button1: SWITCHES.PB1.isSet,\n  }\n  passMachineState(state)\n}\n\nconst doAdvance6502 = () => {\n  const newTime = performance.now()\n  timeDelta = newTime - prevTime\n  if (timeDelta < refreshTime) return\n  prevTime = newTime\n  if (cpuState === STATE.IDLE || cpuState === STATE.PAUSED) {\n    return;\n  }\n  if (cpuState === STATE.NEED_BOOT) {\n    doBoot();\n    doSetCPUState(STATE.RUNNING)\n  } else if (cpuState === STATE.NEED_RESET) {\n    doReset();\n    doSetCPUState(STATE.RUNNING)\n  }\n  let cycleTotal = 0\n  while (true) {\n    const cycles = processInstruction();\n    if (cycles < 0) break\n    cycleTotal += cycles;\n    if (cycleTotal >= 17030) {\n      break;\n    }\n  }\n  iRefresh++\n  speed = (iRefresh * 17.030) / (performance.now() - startTime)\n  updateExternalMachineState()\n  if (saveTimeSlice) {\n    saveTimeSlice = false\n    iSaveState = (iSaveState + 1) % maxState\n    iTempState = iSaveState\n//    console.log(\"iSaveState \" + iSaveState)\n    saveStates[iSaveState] = doGetSaveState()\n  }\n}\n\nconst doAdvance6502Timer = () => {\n  doAdvance6502()\n  const iRefreshFinish = (iRefresh + 5)\n  while (cpuState === STATE.RUNNING && iRefresh !== iRefreshFinish) {\n    doAdvance6502()\n  }\n  if (cpuState === STATE.RUNNING) {\n    handleGamepads()\n    setTimeout(doAdvance6502Timer, 0)\n  } else {\n    setTimeout(doAdvance6502Timer, 10)\n  }\n}\n","import { doSetCPUState,\n  doGetSaveState, doRestoreSaveState, doSetNormalSpeed,\n  doGoBackInTime, doGoForwardInTime,\n  doStepInto, doStepOver, doStepOut } from \"./motherboard\";\nimport { doSetDriveProps } from \"./drivestate\"\nimport { sendTextToEmulator } from \"./keyboard\"\nimport { pressAppleCommandKey, setGamepads } from \"./joystick\"\nimport { DRIVE } from \"./utility\";\nimport { doSetBreakpoint, doSetDebug } from \"./cpu6502\";\n\n// This file must have worker types, but not DOM types.\n// The global should be that of a dedicated worker.\n\n// This fixes `self`'s type.\ndeclare var self: DedicatedWorkerGlobalScope;\nexport {};\n\nconst doPostMessage = (msg: string, payload: any) => {\n  self.postMessage({msg, payload});\n}\n\nexport const passMachineState = (state: MachineState) => {\n  doPostMessage(\"MACHINE_STATE\", state)\n}\n\nexport const passClickSpeaker = (cycleCount: number) => {\n  doPostMessage(\"CLICK\", cycleCount)\n}\n\nexport const passDriveProps = (props: DriveProps) => {\n  doPostMessage(\"DRIVE_PROPS\", props)\n}\n\nexport const passDriveSound = (sound: DRIVE) => {\n  doPostMessage(\"DRIVE_SOUND\", sound)\n}\n\nconst passSaveState = (saveState: string) => {\n  doPostMessage(\"SAVE_STATE\", saveState)\n}\n\nexport const passRumble = (params: GamePadActuatorEffect) => {\n  doPostMessage(\"RUMBLE\", params)\n}\n\nexport const passHelptext = (helptext: string) => {\n  doPostMessage(\"HELP_TEXT\", helptext)\n}\n\nself.onmessage = (e: MessageEvent) => {\n  switch (e.data.msg) {\n    case \"STATE\":\n      doSetCPUState(e.data.payload)\n      break;\n    case \"DEBUG\":\n      doSetDebug(e.data.payload)\n      break;\n    case \"BREAKPOINT\":\n      doSetBreakpoint(e.data.payload)\n      break;\n    case \"STEP_INTO\":\n      doStepInto()\n      break;\n    case \"STEP_OVER\":\n      doStepOver()\n      break;\n    case \"STEP_OUT\":\n      doStepOut()\n      break;\n    case \"SPEED\":\n      doSetNormalSpeed(e.data.payload)\n      break;\n    case \"TIME_TRAVEL\":\n      if (e.data.payload === \"FORWARD\") {\n          doGoForwardInTime()\n      } else {\n          doGoBackInTime()\n      }\n      break;\n    case \"RESTORE_STATE\":\n      doRestoreSaveState(e.data.payload)\n      break;\n    case \"KEYBUFFER\":\n      sendTextToEmulator(e.data.payload)\n      break;\n    case \"APPLE_PRESS\":\n      pressAppleCommandKey(true, e.data.payload)\n      break;\n    case \"APPLE_RELEASE\":\n      pressAppleCommandKey(false, e.data.payload)\n      break;\n    case \"GET_SAVE_STATE\":\n      passSaveState(doGetSaveState(true))\n      break;\n    case \"DRIVE_PROPS\":\n      const props = e.data.payload as DriveProps\n      doSetDriveProps(props)\n      break;\n    case \"GAMEPAD\":\n      setGamepads(e.data.payload)\n      break\n    default:\n      break;\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [669], function() { return __webpack_require__(6148); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"14135427\" + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t148: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkapple2ts\"] = self[\"webpackChunkapple2ts\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn __webpack_require__.e(669).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["STATE","COLOR_MODE","ARROW","DRIVE","MODE","gamePads","mapping","isRelativeInstr","instr","startsWith","toHex","value","ndigits","arguments","length","undefined","toString","toUpperCase","slice","getProcessorStatus","s6502","concat","Accum","XReg","YReg","PStatus","P","StackPtr","getInstrString","code","vLo","vHi","PC","result","_modeString","mode","prefix","suffix","IMM","ZP_X","ABS_X","ZP_Y","ABS_Y","IND","IND_X","IND_Y","modeString","_modeString2","_slicedToArray","name","addr","address","toASCII","Uint8Array","s","split","map","char","charCodeAt","uint32toBytes","n","replaceSuffix","fname","i","lastIndexOf","substring","maxTimeoutCycles","Math","trunc","paddle0timeout","paddle1timeout","paddle2timeout","paddle3timeout","countStart","leftAppleDown","rightAppleDown","leftButtonDown","rightButtonDown","isPB2down","isLeftDown","isRightDown","setLeftButtonDown","setRightButtonDown","valueToTimeout","min","max","setGamepad0","setGamepad1","setGamepad2","setGamepad3","setButtonState","SWITCHES","pressAppleCommandKey","isDown","left","checkJoystickValues","cycleCount","diff","memSetC000","nearZero","handleGamepad","gp","stick","axes","xstick","ystick","dist","sqrt","clip","abs","convertGamepadAxes","buttonPressed","buttons","forEach","button","handleRumbleMapping","timeout","leftdown","rightdown","buttonreleased","aztec","data","keymap","gamepad","addToBuffer","addToBufferDebounce","str","getTextPageAsString","includes","rumble","setup","helptext","firebug","memB6","memB7","karateka","newValue","memGet","passRumble","startDelay","duration","weakMagnitude","strongMagnitude","wolfenstein","console","log","memSet","gameLibrary","Array","push","defaultButtons","dualJoysticks","isJoystick2","gamepadMapping","_i2","_gameLibrary2","game","matchMemory","_i3","_gameLibrary3","handleGameSetup","reset","_i4","_gameLibrary4","passHelptext","keyBuffer","prevCount","popKey","memGetC000","key","keyPress","doSaveTimeSlice","prevKey","text","tPrev","t","performance","now","sendTextToEmulator","_i","_gameLibrary","keyMapping","sswitch","NewSwitch","offAddr","isSetAddr","onAddr","writeOnly","isSet","setFunc","rand","floor","random","STORE80","RAMRD","RAMWRT","INTCXROM","ALTZP","SLOTC3ROM","COLUMN80","ALTCHARSET","KBRDSTROBE","keyvalue","BSRBANK2","BSRREADRAM","CASSOUT","SPEAKER","passClickSpeaker","GCSTROBE","EMUBYTE","TEXT","MIXED","PAGE2","HIRES","AN0","AN1","AN2","AN3","CASSIN1","PB0","PB1","PB2","JOYSTICK12","JOYSTICK34","CASSIN2","FASTCHIP_LOCK","FASTCHIP_ENABLE","FASTCHIP_SPEED","JOYSTICKRESET","resetJoystick","BANKSEL","LASER128EX","READBSR2","WRITEBSR2","OFFBSR2","RDWRBSR2","READBSR1","WRITEBSR1","OFFBSR1","RDWRBSR1","DRVSM0","DRVSM1","DRVSM2","DRVSM3","DRVSEL","DRVDATA","DRVWRITE","checkSoftSwitches","calledFromMemSet","handleBankedRAM","sswitch1","error","write_byte","woz","position","shift","byte_position","write_4_and_4","write_sync","encode_6_and_2","src","six_and_two_mapping","dest","bit_reverse","c","location","serialise_track","track_number","is_prodos","track_position","fill","sector","ls","contents","crcTable","Uint32Array","makeCRCTable","k","decodeWoz2","driveState","diskData","isWoz2","find","isWriteProtected","crc","storedCRC","pow","actualCRC","offset","crc32","alert","filename","htrack","tmap_index","tmap_offset","trk","trackStart","trackNbits","decodeDSK","newData","dskData","isPO","set","trackInput","trackData","convertdsk2woz","toLowerCase","endsWith","diskHasChanges","int32","isHardDriveImage","f","decodeDiskData","hardDrive","status","nbytes","magic","String","fromCharCode","decode2MG","isDSK","isWoz1","decodeWoz1","parseNumberOptionalAddressMode","operand","IMPLIED","ABS","ZP_REL","parseInt","labels","getOperandModeValue","pc","pass","match","labelOperand","label","operation","replace","splitOperand","isImmediate","Error","parseOnce","start","instructions","prevLabel","line","trimEnd","codeLine","splitLine","parts","_parseNumberOptionalA","_parseNumberOptionalA2","handleLabel","_getOperandModeValue","_getOperandModeValue2","pcodes","findIndex","newInstructions","pcode","getHexCodesForInstruction","apply","_toConsumableArray","parseAssembly","timerID","driverAddr","code1","prodos8driver","driver","pcode1","pcode2","enableHardDrive","enable","slot","setSlotDriver","processHardDriveBlockAccess","processSmartPortAccess","ds","getHardDriveState","dd","getHardDriveData","S","callAddr","spCommand","spParamList","unitNumber","bufferAddr","setCarry","statusCode","blockStart","dataRead","setDataBlock","motorRunning","setTimeout","passData","block","dataLen","setX","setY","nblocks","dataWrite","getDataBlock","initDriveState","drive","halftrack","prevHalfTrack","writeMode","currentPhase","trackLocation","driveData","currentDrive","setCurrentDrive","getCurrentDriveState","getCurrentDriveData","dprops","passDriveProps","getDriveSaveState","full","Buffer","motorOffTimeout","doResetDiskDrive","doMotorTimeout","doPauseDiskDrive","startMotor","passDriveSound","MOTOR_OFF","moveHead","TRACK_END","TRACK_SEEK","pickbit","clearbit","getNextBit","bit","byte","b","dataRegister","prevCycleCount","doWriteBit","fileOffset","doWriteByte","delta","debugCache","clearTimeout","MOTOR_ON","dumpData","handleDriveSoftSwitches","getNextByte","stopMotor","dsOld","ps","a","ascend","descend","memory","addressGetTable","addressSetTable","AUXindex","ROMstartMinusC000","SLOTstartMinusC100","AUXstart","updateAddressTables","offsetAuxRead","offsetAuxWrite","offsetPage2","offsetTextPageRead","offsetTextPageWrite","offsetHgrPageRead","offsetHgrPageWrite","updateMainAuxMemoryTable","offsetZP","updateReadBankSwitchedRamTable","updateWriteBankSwitchedRamTable","ROMindexMinusC0","updateSlotRomTable","specialJumpTable","Map","jump","fn","memoryReset","rom64","rom","memGetSoftSwitch","page","shifted","repeat","TEXT_PAGE1","TEXT_PAGE2","getTextPage","jstart","jend","is80column","pageOffset","textPage","j","joffset","getHires","doubleRes","nlines","hgrPage","setCycleCount","cycles","incrementPC","setPC","assert","isNaN","setPStatus","stack","pushStack","call","popStack","isCarry","isZero","setZero","setInterrupt","isDecimal","BCD","setDecimal","setBreak","isOverflow","setOverflow","isNegative","setNegative","checkStatus","doBranch","takeBranch","oldPC","pageBoundary","oneByteAdd","twoByteAdd","addr1","addr2","PCODE","execute","doIndirectYinstruction","vZP","doInstruction","addBCD","doIndirectInstruction","doADC_BCD","ones","tmp","bothPositive","bothNegative","doADC_HEX","doADC","vOffset","doAND","doASL","v","doBit","PC2","doCMP","doCMP1","doCPX","doCPY","doDEC","doEOR","doINC","doLDA","doLDX","doLDY","doLSR","doORA","doROL","bit0","doROR","bit7","doSBC_BCD","vtmp","newCarry","doSBC","doSTA","disk2driver","doDebug","instrTrail","posTrail","breakpoint","runToRTS","doSetDebug","processInstruction","step","PC1","doSetCPUState","PAUSED","get","ins","out","startTime","prevTime","speed","refreshTime","cpuState","IDLE","iRefresh","saveTimeSlice","iSaveState","iTempState","saveStates","getApple2State","softSwitches","membuffer","memAux","memc000","setApple2State","newState","new6502","keyTyped","doGetSaveState","state","state6502","JSON","stringify","doRestoreSaveState","sState","parse","restoreDriveSaveState","updateExternalMachineState","doBoot","from","doReset","doStepInto","doStepOut","doSetRunToRTS","RUNNING","resetRefreshCounter","cpuStateIn","doPauseDrive","doAdvance6502Timer","toFixed","altChar","lores","hires","zeroPageStack","button0","button1","passMachineState","doAdvance6502","newTime","NEED_BOOT","NEED_RESET","cycleTotal","iRefreshFinish","doPostMessage","msg","payload","self","postMessage","props","sound","params","onmessage","e","breakpt","normal","newTmp","doGoForwardInTime","doGoBackInTime","saveState","doSetDriveProps","gamePadsIn","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","x","__webpack_exports__","O","deferred","chunkIds","priority","notFulfilled","Infinity","fulfilled","Object","keys","every","splice","r","d","definition","o","defineProperty","enumerable","chunkId","Promise","all","reduce","promises","u","miniCssF","obj","prop","prototype","hasOwnProperty","p","installedChunks","importScripts","chunkLoadingGlobal","parentChunkLoadingFunction","bind","moreModules","runtime","pop","next","then"],"sourceRoot":""}